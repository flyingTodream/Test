(function(t){function e(e){for(var i,r,s=e[0],c=e[1],d=e[2],l=0,h=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function r(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0a32e6":"7671d49b","chunk-2d0afe3b":"6f8ac8bf","chunk-2d0b2965":"83f2e5fe","chunk-2d0c4237":"1f0fbee2","chunk-2d0c8443":"f6352ddb","chunk-2d0f0860":"2928dcd2","chunk-2d213c9c":"62a1c2e7","chunk-2d0c5546":"b45d9b4d","chunk-2d0d05c9":"afced8e0","chunk-2d0df258":"0ccada08","chunk-2d21a74b":"1510bd6c"}[t]+".js"}function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=o[t]=[e,i]}));e.push(n[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=r(t);var d=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=o[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}o[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/mobile/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"14bd":function(t,e,n){},1927:function(t,e,n){},"371c":function(t,e,n){"use strict";n("99af"),n("a15b"),n("d81d");var i=n("2909"),o={};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e="";switch(t){case"default":e="#35495E";break;case"primary":e="#3488ff";break;case"success":e="#43B883";break;case"warning":e="#e6a23c";break;case"danger":e="#f56c6c";break;default:break}return e}o.capsule=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary";console.log("%c ".concat(t," %c ").concat(e," %c"),"background:#35495E; padding: 1px; border-radius: 3px 0 0 3px; color: #fff;","background:".concat(a(n),"; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff;"),"background:transparent")},o.colorful=function(t){var e;(e=console).log.apply(e,["%c".concat(t.map((function(t){return t.text||""})).join("%c"))].concat(Object(i["a"])(t.map((function(t){return"color: ".concat(a(t.type),";")})))))},o.default=function(t){o.colorful([{text:t}])},o.primary=function(t){o.colorful([{text:t,type:"primary"}])},o.success=function(t){o.colorful([{text:t,type:"success"}])},o.warning=function(t){o.colorful([{text:t,type:"warning"}])},o.danger=function(t){o.colorful([{text:t,type:"danger"}])},o.init=function(){var t="海报设计";o.colorful([{text:t,type:"success"}])},o.init(),e["a"]=o},4360:function(t,e,n){"use strict";n.d(e,"c",(function(){return m})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return p}));n("4160"),n("a434"),n("b64b"),n("159b"),n("96cf");var i=n("1da1"),o=n("ba4c"),a=n.n(o),r=n("371c");function s(t){sessionStorage.setItem("poster",JSON.stringify(t))}function c(){try{return JSON.parse(sessionStorage.getItem("poster"))}catch(t){return null}}var d=n("24e4"),l=n.n(d),u=window.Undo=function(t){return new l.a({maxLength:50,provider:function(e){e(JSON.stringify(t))}})},h=c(),m=window.state=a.a.observable({global:{dpi:72,unit:"px",zoom:.25,showWatermark:!1},goodsId:null,id:null,realWidth:null,realHeight:null,realZoom:null,layout:{width:1242,height:2208,title:"新的设计",elements:[],backgroundColor:"#000000",backgroundImage:null,backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},backgroundRepeat:"no-repeat",backgroundSize:null},undoable:!1,redoable:!1,guider:{},current:{id:-1,type:"canvas",edit:!1},context:{clipBoard:null},backgroundInfo:{changed:!1,backgroundColor:"#000",backgroundImage:null,backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},backgroundRepeat:"no-repeat",backgroundSize:null},selectedItem:[]});h&&Object.keys(m).forEach((function(t){void 0!==h[t]&&(m[t]=h[t])}));var f=window.historys=u(m);f.initialize(JSON.stringify(m));var g=window.getter={zoom:function(){return m.global.zoom},save:function(){return{global:m.global,layout:m.layout}},global:function(){return m.global},layout:function(){return m.layout},id:function(){return m.id},goodsId:function(){return m.goodsId},template:function(){return{detail:JSON.stringify({global:m.global,layout:m.layout}),name:m.layout.title}},title:function(){return m.layout.title||""},canvasW:function(){return m.layout.width},canvasH:function(){return m.layout.height},undoStatus:function(){return m.undoable},redoStatus:function(){return m.redoable},guider:function(){return m.guider},current:function(){return m.current},bgIsInit:function(){return m.backgroundInfo.changed},selectedItem:function(){return m.selectedItem}},p=window.mitation={setRealZoom:function(t){m.realZoom=t},setRealSize:function(t,e){m.realWidth=t,m.realHeight=e},deleteElement:function(t){m.layout.elements.splice(t,1)},updateCurrentEdit:function(t){m.current.edit=t},updateContent:function(t,e){m.layout.elements[t].content=e},changeSize:function(t,e,n){-1!=t&&(m.layout.elements[t].width=e,m.layout.elements[t].height=n)},resetCurrent:function(){m.current.id=-1,m.current.type="canvas"},setZoom:function(t){m.global.zoom=t},setId:function(t){m.id=t},setTemplate:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return m.goodsId=e,m.global=t.global,m.global.dpi=t.global.dpi||72,m.layout=t.hasOwnProperty("layouts")?t.layouts[0]:t.layout,n.initBgInfo(),i.next=7,s({global:m.global,layout:m.layout,current:m.current,backgroundInfo:m.backgroundInfo,goodsId:m.goodsId,id:m.id});case 7:f.initialize(JSON.stringify(m));case 8:case"end":return i.stop()}}),i)})))()},setCanvasW:function(t){m.layout.width=t},setCanvasH:function(t){m.layout.height=t},setCanvasSize:function(t,e){m.layout.width=t,m.layout.height=e},setTitle:function(t){m.layout.title=t||""},updateTransformPosition:function(t,e){m.layout.elements[t].top=e.top,m.layout.elements[t].left=e.left},_updateTransformSize:function(t,e){m.layout.elements[t].width=e.width/m.global.zoom,m.layout.elements[t].height=e.height/m.global.zoom,e.left&&(m.layout.elements[t].left=e.left/m.global.zoom),e.top&&(m.layout.elements[t].top=e.top/m.global.zoom)},updateTransformRotate:function(t,e){m.layout.elements[t].transform=e},updateWidgetSize:function(t,e,n){"transform"===e&&this._updateTransformSize(t,n)},setHistoryState:function(){m.redoable=f.canRedo(),m.undoable=f.canUndo(),s({global:m.global,layout:m.layout,current:m.current,backgroundInfo:m.backgroundInfo,goodsId:m.goodsId,id:m.id})},setLogger:function(){r["a"].primary(">>>>>>>logger>>>>>>>>>"),f.save(),this.setHistoryState()},setUndo:function(){var t=this;f.undo((function(e){var n=JSON.parse(e);m.layout=n.layout,m.global=n.global,m.current=n.current,t.setHistoryState()})),this.resizeCanvas()},resizeCanvas:function(){this.setCanvasSize(m.realWidth,m.realHeight),this.setZoom(m.realZoom)},setRedo:function(){var t=this;f.redo((function(e){var n=JSON.parse(e);m.layout=n.layout,m.global=n.global,m.current=n.current,t.setHistoryState()}))},setGuider:function(t){m.guider=t},addText:function(t){m.layout.elements.push(t),this.setLogger()},addImage:function(t){m.layout.elements.push(t),this.setLogger()},updateImg:function(t,e,n,i){m.layout.elements[t].url=e,m.layout.elements[t].orginUrl=e,m.layout.elements[t].width=n,m.layout.elements[t].height=i},setCurrent:function(t){m.current=t},initBgInfo:function(){m.layout.backgroundColor&&(m.backgroundInfo.backgroundColor=m.layout.backgroundColor),m.layout.backgroundImage&&(m.backgroundInfo.backgroundImage=m.layout.backgroundImage),m.layout.backgroundImageInfo&&(m.backgroundInfo.backgroundImageInfo=Object.assign({},m.layout.backgroundImageInfo)),m.layout.backgroundRepeat&&(m.backgroundInfo.backgroundRepeat=m.layout.backgroundRepeat),m.layout.backgroundSize&&(m.backgroundInfo.backgroundSize=m.layout.backgroundSize),m.backgroundInfo.changed=!1},setSelectedItem:function(t){m.selectedItem=t},setWaterMask:function(t){m.global.showWatermark=t},updateText:function(t,e){m.layout.elements[t].content=e,this.setLogger()},changeImgUrl:function(t,e){m.layout.elements[t].orginUrl||(m.layout.elements[t].orginUrl=m.layout.elements[t].url),m.layout.elements[t].url=e},setFontFamily:function(t,e){m.layout.elements[t].fontFamily=e},setFontColor:function(t,e){m.layout.elements[t].color=e},setFontSize:function(t,e){m.layout.elements[t].fontSize=e},setTextalign:function(t,e){m.layout.elements[t].textAlign=e}}},"4e02":function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c}));var i=n("b775");function o(t){return Object(i["c"])({url:"/production/save",method:"post",data:t})}function a(t){return Object(i["c"])({url:"/resource/getfont?name="+t,method:"get"})}function r(t){return Object(i["c"])({url:"/goods/detail",method:"get",params:t})}function s(t){return Object(i["c"])({url:"/resource/list",method:"get",params:t})}function c(t){return Object(i["c"])({url:"/resource/detail",method:"get",params:t})}},"56d7":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("d3b7"),n("b5c2"),n("450d");var i=n("20cf"),o=n.n(i),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("ba4c")),r=n.n(a),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("VxDesignLayout")],1)},c=[],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"design-app"}},[t.error?n("VxError"):t._e(),t.saveLoading?n("div",{staticClass:"vx-design-bottom-noselect__loading"},[n("Vxloading",{attrs:{msg:"正在保存图片，请稍等"}})],1):t._e(),n("VxMenu",{on:{loading:t.loadingHandler,redo:t.redoHandler,undo:t.undoHandler,delete:t.deleteHandler}}),n("div",{staticClass:"design-main"},[n("vx-canvas",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],on:{edit:t.editHandler}}),n("VxLoading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{msg:"正在加载模板，请稍后"}})],1),n("VxConfig",{attrs:{editAble:t.edit,selectWidget:t.selectWidget},on:{panelShow:t.panelShowHandler,add:t.addHandler}})],1)},l=[],u=(n("99af"),n("4160"),n("a630"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("0fb7"),n("f529")),h=n.n(u),m=(n("96cf"),n("1da1")),f=n("4360"),g=n("ed08"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("div",{ref:"container",staticClass:"design-container",attrs:{id:"js-container"},on:{click:function(e){return e.target!==e.currentTarget||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.selectCanvasHandler(e)}}},[n("div",{staticClass:"design-canvas",style:t.canvasStyles},[n("div",{staticClass:"editor-shell",style:t.canvasStyles},[n("div",{ref:"canvas",staticClass:"editor-canvas"},[n("div",{staticClass:"editor-layout"},[n("vx-Editor-bg",{attrs:{zoom:t.global.zoom}}),n("vx-water-mark"),t._l(t.layout.elements,(function(e,i){return[n("VxShape",{key:i,attrs:{item:e,index:i},on:{edit:t.editHandler}})]})),n("vx-editor-guider")],2)])])]),n("vx-selector")],1)])},v=[],w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-background",style:t.backStyle,on:{click:function(e){return e.stopPropagation(),t.selectHandler(e)}}},[n("div",{staticClass:"editor-background__main",style:t.mainStyle},[t.bgImg?n("img",{style:t.imgStyle,attrs:{src:t.bgImg}}):t._e()])])},b=[],y=(n("a9e3"),{name:"vx-editor-bg",props:{zoom:{type:Number}},computed:{w:function(){return f["a"].layout().width*f["a"].global().zoom},h:function(){return f["a"].layout().height*f["a"].global().zoom},widget:function(){return f["a"].cutImage()},layoutZoom:function(){return f["a"].zoom()},bgColor:function(){return f["a"].layout().backgroundColor},bgImg:function(){return f["a"].layout().backgroundImage},bgImgInfo:function(){return f["a"].layout().backgroundImageInfo},bgSize:function(){return f["a"].layout().backgroundSize},bgPosition:function(){return f["a"].layout().backgroundPosition},mainStyle:function(){var t={};return this.bgImgInfo&&(t.left="".concat(this.bgImgInfo.left,"px"),t.top="".concat(this.bgImgInfo.top,"px"),t.width="".concat(this.bgImgInfo.width*this.cutZoom*this.zoom,"px"),t.height="".concat(this.bgImgInfo.height*this.cutZoom*this.zoom,"px")),t},backStyle:function(){var t={};t.backgroundColor=this.bgColor;var e=this.bgImgInfo&&this.bgImgInfo.transform||{a:0,b:0,c:0,tx:0,ty:0};return t.transform="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.tx,",").concat(e.ty,")"),t},imgStyle:function(){var t={opacity:this.bgImgInfo.opacity};return t.width="".concat(this.bgImgInfo.width*this.zoom,"px"),t.height="".concat(this.bgImgInfo.height*this.zoom,"px"),t}},methods:{selectHandler:function(){this.$emit("select")}}}),x=y,z=n("2877"),S=Object(z["a"])(x,w,b,!1,null,null,null),H=S.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showWatermark?t._e():n("div",{staticClass:"editor-watermark",style:t.styles},[n("img",{ref:"image",attrs:{src:t.url}})])},k=[],I={name:"vx-water-mark",data:function(){return{url:n("ac50")}},props:{type:{type:String,defult:""}},computed:{showWatermark:function(){return f["a"].global().showWatermark},zoom:function(){return f["a"].global().zoom},w:function(){return f["a"].layout().width},h:function(){return f["a"].layout().height},styles:function(){var t=0;return t="print"===this.type?1:this.w>=this.h?this.h/this.w/3:this.w/this.h/3,{width:"".concat(642*t,"px"),right:"".concat(10,"px"),height:"auto",bottom:"".concat(0,"px"),"z-index":"1000"}}}},C=I,E=Object(z["a"])(C,_,k,!1,null,null,null),M=E.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-guider"},[n("div",{staticClass:"editor-guider-line editor-guider-t",style:t.tStyles}),n("div",{staticClass:"editor-guider-line editor-guider-l",style:t.lStyles}),n("div",{staticClass:"editor-guider-line editor-guider-b",style:t.bStyles}),n("div",{staticClass:"editor-guider-line editor-guider-r",style:t.rStyles}),n("div",{staticClass:"editor-guider-line editor-guider-cx",style:t.cxStyles}),n("div",{staticClass:"editor-guider-line editor-guider-cy",style:t.cyStyles})])},W=[],O={name:"vx-editor-guider",computed:{zoom:function(){return f["a"].zoom()},guider:function(){return f["a"].guider()},tStyles:function(){if(!this.guider.hasOwnProperty("T"))return{};var t=this.guider.T;return{top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",display:"block"}},lStyles:function(){if(!this.guider.hasOwnProperty("L"))return{};var t=this.guider.L;return{top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",display:"block"}},bStyles:function(){if(!this.guider.hasOwnProperty("B"))return{};var t=this.guider.B;return{bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",display:"block"}},rStyles:function(){if(!this.guider.hasOwnProperty("R"))return{};var t=this.guider.R;return{right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",display:"block"}},cxStyles:function(){if(!this.guider.hasOwnProperty("cx"))return{};var t=this.guider.cx;return{right:0,top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:0,display:"block"}},cyStyles:function(){if(!this.guider.hasOwnProperty("cy"))return{};var t=this.guider.cy;return{top:0,left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",bottom:0,display:"block"}}},mounted:function(){window.addEventListener("touchmove",(function(){f["b"].setGuider({})}))}},N=O,T=Object(z["a"])(N,L,W,!1,null,null,null),P=T.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-selector"},[t.selected?n("div",{ref:"selector",staticClass:"editor-selector-content",style:t.styles}):t._e()])},$=[],R=(n("caad"),n("c975"),n("a434"),n("2532"),{name:"vx-editor-selector",data:function(){return{top:0,left:0,width:0,height:0,selected:!1,l:0,t:0,canvasT:0,canvasL:0,canvasW:0,canvasH:0,selectItem:[]}},computed:{zoom:function(){return f["a"].zoom()},styles:function(){var t=this.top,e=this.left,n=this.width,i=this.height;return this.width<0&&(e=this.left+this.width,n=Math.abs(this.width)),this.height<0&&(t=this.top+this.height,i=Math.abs(this.height)),{top:t+"px",left:e+"px",width:n+"px",height:i+"px"}},selectedArea:function(){var t=this.top,e=this.left,n=this.width,i=this.height;return this.width<0&&(e=this.left+this.width,n=Math.abs(this.width)),this.height<0&&(t=this.top+this.height,i=Math.abs(this.height)),{l:e-this.canvasL,t:t-this.canvasT,b:t+i-this.canvasT,r:e+n-this.canvasL}}},mounted:function(){document.querySelector("#js-container").addEventListener("mousedown",this.selected_mousedown_Handler,!1),window.addEventListener("mouseup",this.selected_mouseup_Handler,!1)},methods:{initStyle:function(){this.top=0,this.left=0,this.width=0,this.height=0},selected_mousedown_Handler:function(t){var e=document.querySelector("#js-container").getBoundingClientRect();e.x&&(this.l=e.x),e.y&&(this.t=e.y);var n=document.querySelector("#js-container .editor-canvas").getBoundingClientRect();n.left&&(this.canvasL=n.left-this.l),n.top&&(this.canvasT=n.top-this.t),this.initStyle(),this.left=t.pageX-this.l,this.top=t.pageY-this.t,this.selectItem=[],window.addEventListener("mousemove",this.selected_mousemove_Handler)},selected_mousemove_Handler:function(t){t.preventDefault(),this.selected=!0,this.height=t.pageY-this.t-this.top,this.width=t.pageX-this.l-this.left,this.selectElementHandler()},selected_mouseup_Handler:function(){window.removeEventListener("mousemove",this.selected_mousemove_Handler),this.selected=!1,f["b"].setSelectedItem(this.selectItem),this.initStyle()},selectElementHandler:function(){var t=this;f["a"].layout().elements.forEach((function(e,n){var i=e.top*t.zoom,o=(e.left+e.width)*t.zoom,a=(e.top+e.height)*t.zoom,r=e.left*t.zoom;if(o<t.selectedArea.r&&r>t.selectedArea.l&&a<t.selectedArea.b&&i>t.selectedArea.t)!t.selectItem.includes(n)&&t.selectItem.push(n);else{var s=t.selectItem.indexOf(n);-1!==s&&t.selectItem.splice(s,1)}})),f["b"].setSelectedItem(this.selectItem)}}}),A=R,V=Object(z["a"])(A,j,$,!1,null,null,null),D=V.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.item.type},[n("vx-transform",{key:t.index,style:t.elementStyles,attrs:{active:t.active,selectedItem:t.selectedItem},on:{editor:t.editorHandler,edit:t.editHandler},nativeOn:{touchstart:function(e){return t.selectWidgetHandler(t.index)}}}),"text"===t.item.type?n("vx-editor-text",{key:t.item.id,attrs:{index:t.index,zoom:t.global.zoom,editor:t.editor===t.index,data:t.item},on:{"update:data":function(e){t.item=e}},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}}):t._e(),"threeText"===t.item.type?n("vx-editor-three-text",{key:t.item.id,attrs:{index:t.index,zoom:t.global.zoom,editor:t.editor===t.index,data:t.item},on:{"update:data":function(e){t.item=e}},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}}):t._e(),"image"===t.item.type||"mask"===t.item.type?n("vx-editor-image",{key:t.item.id,attrs:{zoom:t.global.zoom,index:t.index,data:t.item},on:{"update:data":function(e){t.item=e}}}):t._e(),["svg"].includes(t.item.type)?n("vx-editor-svg",{key:t.item.id,attrs:{zoom:t.global.zoom,index:t.index,data:t.item},on:{"update:data":function(e){t.item=e}}}):t._e()],1)},X=[],F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-text",style:t.elementStyles,on:{touchstart:function(e){return t.mousedownHandler(e)}}},[n("div",{staticClass:"element-inner",style:t.innerStyle},[n("div",{staticClass:"element-inner-content",style:t.contentStyle},[n("div",{ref:"edit",staticClass:"element-main",style:t.mainStyles,on:{mousemove:function(t){t.stopPropagation()},input:t.changeHandler}},[n("pre",{ref:"content",style:t.textStyles,attrs:{id:"content"},domProps:{innerHTML:t._s(t.content)}})])])])])},Z=[],U={name:"vx-editor-text",props:{data:{},value:String,zoom:{type:Number,default:0},index:Number},mounted:function(){},computed:{content:function(){return this.data.content},current:function(){return getter.current()},layoutZoom:function(){return getter.zoom()},elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:this.data.hidden?"hidden":"visible",width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px",opacity:this.data.opacity,"z-index":"".concat(this.index)}},innerStyle:function(){return{textAlign:this.data.textAlign,lineHeight:1.2,width:this.data.width+"px",transform:"scale(".concat(this.zoom,")")}},contentStyle:function(){return{writingMode:this.data.writingMode}},mainStyles:function(){var t={color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",letterSpacing:this.data.letterSpacing+"px",verticalAlign:this.data.verticalAlign,width:"100%",height:"max-content",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration};return t},textStyles:function(){return{color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",width:this.data.width+"px",wordBreak:"break-all",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration}}},methods:{mousedownHandler:function(t){t.stopPropagation()},changeHandler:function(){var t=this.$refs.edit;f["b"].updateCurrentEdit(!0),f["b"].changeSize(this.index,t.offsetWidth,t.offsetHeight)},transfromHandler:function(){f["b"].changeSize(this.index,this.$refs.content.offsetWidth,this.$refs.content.offsetHeight),this.$emit("event",{index:this.index,type:"transfrom"})}},watch:{"data.fontSize":function(){f["b"].changeSize(this.index,this.$refs.content.offsetWidth,this.$refs.content.offsetHeight)},"data.content":function(){f["b"].changeSize(this.index,this.$refs.content.offsetWidth,this.$refs.content.offsetHeight)}}},J=U,G=(n("f5d7"),Object(z["a"])(J,F,Z,!1,null,"5b02376a",null)),Y=G.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-three-text",class:{"editor-element-editing":t.editor},style:t.elementStyles,on:{touchend:t.transfromHandler}},[n("div",{staticClass:"element-main"},[n("div",{staticClass:"three-text",style:t.mainStyles,on:{mousemove:function(t){t.stopPropagation()}}},[t.editor?n("div",{ref:"edit",style:t.textStyles,attrs:{contenteditable:t.editor}}):n("canvas",{style:t.textStyles})])]),n("i",{staticClass:"border-before"})])},K=[],Q=(n("a15b"),n("38cf"),{name:"vx-editor-three-text",props:{data:{},value:String,zoom:{type:Number,default:0},index:Number,editor:Boolean},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:this.data.hidden?"hidden":"visible",transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px",opacity:this.data.opacity}},mainStyles:function(){var t={color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",letterSpacing:this.data.letterSpacing+"px",verticalAlign:this.data.verticalAlign,width:"100%",height:"auto",minHeight:this.data.height*this.zoom+"px"};if(this.data.textEffects&&this.data.textEffects.length>0){var e=this.data.textEffects,n=null,i=null,o=null,a=null,r=null,s=null,c=null;e.forEach((function(t){if(t.filling.enable){if(0===t.filling.type&&(o="".concat(t.filling.color)),1===t.filling.type){var e=t.filling.imageContent;o="transparent",a="url(".concat(e.image,")"),r="".concat(e.width*e.scaleX,"px ").concat(e.height*e.scaleY,"px"),s=1===e.repeat?"repeat":null,c="text"}if(2===t.filling.type){var d=t.filling.gradient;o="transparent";var l=["".concat(d.angle+90,"deg")];d.forEach((function(t){l.push("".concat(t.color," ").concat(100*t.offset,"%"))})),a="linear-gradient(".concat(l.join(","),")")}}else o=null,a=null,r=null,s=null,c=null;n=t.shadow.enable?"".concat(t.shadow.color," ").concat(t.shadow.offsetX,"px ").concat(t.shadow.offsetY,"px ").concat(t.shadow.blur,"px"):null,i=t.stroke.enable?"".concat(t.stroke.width,"px ").concat(t.stroke.color):null})),n&&(t["textShadow"]=n),i&&(t["-webkit-text-stroke"]=i),o&&(t["-webkit-text-fill-color"]=o),r&&(t["backgroundSize"]=r),a&&(t["backgroundImage"]=a),s&&(t["backgroundRepeat"]=s),c&&(t["backgroundClip"]=c)}return t},textStyles:function(){return{color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration}}},methods:{transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom"})}},watch:{editor:function(t){if(!t){var e=this.$refs.edit;this.$emit("input",e.innerText)}}}}),tt=Q,et=Object(z["a"])(tt,q,K,!1,null,null,null),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-image",style:t.elementStyles,on:{touchend:t.transfromHandler}},[n("div",{staticClass:"element-main",style:t.mainStyles},[n("img",{style:t.imageStyles,attrs:{draggable:"false",src:t.data.url}})]),n("i",{staticClass:"border-before"})])},ot=[],at=(n("4de4"),{name:"vx-editor-image",props:{data:{},zoom:{type:Number,default:0},index:Number},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px","z-index":"".concat(this.index)}},mainStyles:function(){return{borderRadius:this.data.borderRadius,overflow:this.data.hidden?"hidden":"visible",opacity:this.data.opacity,padding:this.data.padding.join("px ")}},imageStyles:function(){var t=this.data.clip||{},e={position:"absolute",top:(t.top||0)+"px",left:(t.left||0)+"px",width:(t.width||this.data.width)*this.zoom+"px",height:(t.height||this.data.height)*this.zoom+"px",filter:this.data.filter,"-webkit-filter":"".concat(this.data.filter)};return e}},methods:{transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",editable:!1})}}}),rt=at,st=Object(z["a"])(rt,it,ot,!1,null,null,null),ct=st.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-svg",style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.transfromHandler(e)}}},[n("div",{staticClass:"element-main",domProps:{innerHTML:t._s(t.html)}}),n("i",{staticClass:"border-before"})])},lt=[],ut=(n("ac1f"),n("5319"),{name:"vx-editor-svg",props:{data:{},zoom:{type:Number,default:0},index:Number},data:function(){return{svg:""}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px","z-index":"".concat(this.index)}},mainStyles:function(){return{borderRadius:this.data.borderRadius,overflow:this.data.hidden?"hidden":"visible",opacity:this.data.opacity,padding:this.data.padding.join("px ")}},imageStyles:function(){var t=this.data.clip||{};return{position:"absolute",top:(t.top||0)+"px",left:(t.left||0)+"px",width:(t.width||this.data.width)*this.zoom+"px",height:(t.height||this.data.height)*this.zoom+"px"}},html:function(){var t=this.svg;return this.data.colors.length>=0&&this.data.colors.forEach((function(e,n){t=t.replace("{{colors[".concat(n,"]}}"),e)})),t}},mounted:function(){this.getSvgHandler(this.data.url)},methods:{transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",editable:!1})},getSvgHandler:function(t){var e=this;this.$axios.get(t,{}).then((function(t){e.svg=t})).catch((function(t){g["c"].danger(t)}))}}}),ht=ut,mt=Object(z["a"])(ht,dt,lt,!1,null,null,null),ft=mt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-transform-wrap"},[t.active?n("div",{ref:"transform",staticClass:"editor-transform",class:{"editor-custorm":t.editor,"editor-min-w":t.widget.width*t.zoom<42,"editor-min-h":t.widget.height*t.zoom<42},style:t.styles,attrs:{id:"touch"},on:{touchend:function(e){return e.stopPropagation(),t.editorHandler(e)},touchstart:function(e){return t.mousedownHandler(e)}}},[n("i",{staticClass:"editor-grip-tips"},[n("b",[t._v(t._s(t.tips))])]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeN,expression:"(!isMouseDown || resizeN)"}],staticClass:"editor-grip editor-grip-n",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeN_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeE,expression:"!isMouseDown || resizeE"}],staticClass:"editor-grip editor-grip-e",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeE_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeS,expression:"(!isMouseDown || resizeS)"}],staticClass:"editor-grip editor-grip-s",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeS_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeW,expression:"!isMouseDown || resizeW"}],staticClass:"editor-grip editor-grip-w",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeW_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeNW,expression:"!isMouseDown || resizeNW"}],staticClass:"editor-grip editor-grip-nw",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeNW_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeNE,expression:"!isMouseDown || resizeNE"}],staticClass:"editor-grip editor-grip-ne",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeNE_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeSE,expression:"!isMouseDown || resizeSE"}],staticClass:"editor-grip editor-grip-se",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeSE_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeSW,expression:"!isMouseDown || resizeSW"}],staticClass:"editor-grip editor-grip-sw",on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.resizeSW_down_Handler(e)}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.rotating,expression:"!isMouseDown || rotating"}],staticClass:"editor-rotator",style:{transform:"matrix("+t.transform.join(", ")+")"},on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.rotate_down_Handler(e)}}},[n("b",{ref:"rotate"},[n("svg",{staticClass:"vx",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#vx-rotate"}})]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.degShow,expression:"degShow"}],staticClass:"deg"},[t._v(t._s(t.rotate)+"°")])])])]):t._e()])},pt=[],vt=n("5530"),wt=29,bt=36,yt={name:"vx-transform",mixins:[g["d"]],components:{},props:{selectedItem:{type:Array},active:{type:Boolean}},data:function(){return{logger:!1,dragging:!1,rotating:!1,degShow:!0,resizeN:!1,resizeS:!1,resizeE:!1,resizeW:!1,resizeSE:!1,resizeSW:!1,resizeNE:!1,resizeNW:!1,t:0,l:0,st:0,el:0,wl:0,width:0,left:0,top:0,height:0,sel:0,nel:0,nwl:0,swl:0,cx:0,cy:0,rotate:0,transform:[],editor:!1,isMouseDown:!1,isSelected:!1,ismove:!1,startY:0,startX:0,startTop:0,startLeft:0}},mounted:function(){this.active&&this.touchendHandler()},computed:{tips:function(){return["text","threeText"].includes(this.widget.type)?"点击修改文字":["image","mask"].includes(this.widget.type)?"点击替换图片":""},zoom:function(){return f["a"].zoom()},layout:function(){return f["a"].layout()},selectWidget:function(){return f["a"].current()},type:function(){var t=this.selectWidget.id;return null==t||-1==t||"text"==this.layout.elements[t].type},widget:function(){var t=this.selectWidget.id;if(t<0)return{index:-1};var e=this.layout.elements[t];if(e){var n={w:e.width,h:e.height,l:e.left,t:e.top},i=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};return{transform:i,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1}}return null},styles:function(){return{width:this.widget.width*this.zoom+"px",height:this.widget.height*this.zoom+"px",transform:"matrix(".concat(this.widget.transform.a,",").concat(this.widget.transform.b,",").concat(this.widget.transform.c,",").concat(this.widget.transform.d,",").concat(this.widget.transform.tx,",").concat(this.widget.transform.ty,")"),display:this.widget.display}}},methods:{editClosehandler:function(){this.editor=!1},touchendHandler:function(){var t=this,e=document.querySelector("#touch");e.addEventListener("touchend",(function(e){t.dragging=!1,t.rotating=!1,t.degShow=!1,t.resizeS=!1,t.resizeE=!1,t.resizeW=!1,t.resizeN=!1,t.resizeNE=!1,t.resizeSE=!1,t.resizeSW=!1,t.resizeNW=!1,f["b"].setGuider({}),t.ismove=!1,t.logger&&(f["b"].setLogger(),t.logger=!1),t.isMouseDown=!1,t.isSelected&&(t.selected(e),t.isSelected=!1),window.removeEventListener("touchmove",t.touchmoveHandler),window.removeEventListener("touchmove",t.resizeS_move_Handler),window.removeEventListener("touchmove",t.resizeE_move_Handler),window.removeEventListener("touchmove",t.resizeW_move_Handler),window.removeEventListener("touchmove",t.resizeN_move_Handler),window.removeEventListener("touchmove",t.resizeSE_move_Handler),window.removeEventListener("touchmove",t.resizeNE_move_Handler),window.removeEventListener("touchmove",t.resizeNW_move_Handler),window.removeEventListener("touchmove",t.resizeSW_move_Handler),window.removeEventListener("touchmove",t.rotate_move_Handler)}))},_mousedownHandler:function(){this.logger=!0,this.isMouseDown=!0},mousedownHandler:function(t){this.ismove=!1,this.dragging=!0,this.isSelected=!0;var e=t.targetTouches[0],n=Object(vt["a"])({},this.widget);this.startY=e.clientY,this.startX=e.clientX,this.startTop=n.top*this.zoom,this.startLeft=n.left*this.zoom,window.addEventListener("touchmove",this.touchmoveHandler)},touchmoveHandler:function(t){if(this.ismove=!0,this.dragging){var e=t.targetTouches[0],n=Object(vt["a"])({},this.widget),i=e.clientX,o=e.clientY;n.top=o-this.startY+this.startTop,n.left=i-this.startX+this.startLeft,f["b"].updateTransformPosition(this.widget.index,{left:n.left/this.zoom,top:n.top/this.zoom})}},resizeS_down_Handler:function(t){this._mousedownHandler(),this.resizeS=!0,this.st=t.touches[0].clientY-t.target.offsetTop,window.addEventListener("touchmove",this.resizeS_move_Handler)},resizeS_move_Handler:function(t){this.ismove=!0,this.resizeS&&(this.widget.height=(t.touches[0].clientY-this.st+bt)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}),this.touchendHandler())},resizeE_down_Handler:function(t){this._mousedownHandler(),this.resizeE=!0,this.el=t.touches[0].clientX-t.target.offsetLeft,window.addEventListener("touchmove",this.resizeE_move_Handler)},resizeE_move_Handler:function(t){this.ismove=!0,this.resizeE&&(this.widget.width=(t.touches[0].clientX-this.el+wt)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}),this.touchendHandler())},resizeW_down_Handler:function(t){this._mousedownHandler(),this.resizeW=!0,this.wl=t.touches[0].clientX-t.target.offsetLeft,this.width=this.widget.width,this.left=this.widget.left,window.addEventListener("touchmove",this.resizeW_move_Handler)},resizeW_move_Handler:function(t){this.ismove=!0,this.resizeW&&(this.widget.width=(this.width*this.zoom-(t.touches[0].clientX-this.wl))/this.zoom,this.widget.left=(this.left*this.zoom+t.touches[0].clientX-this.wl)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom}),this.touchendHandler())},resizeN_down_Handler:function(t){this._mousedownHandler(),this.resizeN=!0,this.nt=t.touches[0].clientY-t.target.offsetTop,this.height=this.widget.height,this.top=this.widget.top,window.addEventListener("touchmove",this.resizeN_move_Handler)},resizeN_move_Handler:function(t){this.ismove=!0,this.resizeN&&(this.widget.height=(this.height*this.zoom-(t.touches[0].clientY-this.nt))/this.zoom,this.widget.top=(this.top*this.zoom+t.touches[0].clientY-this.nt)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,top:this.widget.top*this.zoom}),this.touchendHandler())},resizeSE_down_Handler:function(t){this._mousedownHandler(),this.resizeSE=!0,this.sel=t.touches[0].clientX-t.target.offsetLeft,window.addEventListener("touchmove",this.resizeSE_move_Handler)},resizeSE_move_Handler:function(t){this.ismove=!0,this.resizeSE&&(this.widget.height=(this.widget.height*this.zoom+t.touches[0].clientX-this.sel+bt-this.widget.width*this.zoom)/this.zoom,this.widget.width=(t.touches[0].clientX-this.sel+bt)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}),this.touchendHandler())},resizeNE_down_Handler:function(t){this._mousedownHandler(),this.resizeNE=!0,this.nel=t.touches[0].clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("touchmove",this.resizeNE_move_Handler)},resizeNE_move_Handler:function(t){this.ismove=!0,this.resizeNE&&(this.widget.width=(t.touches[0].clientX-this.nel+wt)/this.zoom,this.widget.height=(this.height*this.zoom+t.touches[0].clientX-this.nel+wt-this.width*this.zoom)/this.zoom,this.widget.top=(this.top*this.zoom-(t.touches[0].clientX-this.nel+wt-this.width*this.zoom))/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}),this.touchendHandler())},resizeSW_down_Handler:function(t){this._mousedownHandler(),this.resizeSW=!0,this.swl=t.touches[0].clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("touchmove",this.resizeSW_move_Handler)},resizeSW_move_Handler:function(t){this.ismove=!0,this.resizeSW&&(this.widget.width=(this.width*this.zoom-(t.touches[0].clientX-this.swl))/this.zoom,this.widget.height=(this.height*this.zoom-(t.touches[0].clientX-this.swl))/this.zoom,this.widget.left=(this.left*this.zoom+t.touches[0].clientX-this.swl)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}),this.touchendHandler())},resizeNW_down_Handler:function(t){this._mousedownHandler(),this.resizeNW=!0,this.nwl=t.touches[0].clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("touchmove",this.resizeNW_move_Handler)},resizeNW_move_Handler:function(t){this.ismove=!0,this.resizeNW&&(this.widget.width=(this.width*this.zoom-(t.touches[0].clientX-this.nwl))/this.zoom,this.widget.height=(this.height*this.zoom-(t.touches[0].clientX-this.nwl))/this.zoom,this.widget.left=(this.left*this.zoom+t.touches[0].clientX-this.nwl)/this.zoom,this.widget.top=(this.top*this.zoom+t.touches[0].clientX-this.nwl)/this.zoom,f["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}),this.touchendHandler())},rotate_down_Handler:function(){this._mousedownHandler(),this.degShow=!0,this.rotating=!0;var t=this.$refs.transform.getBoundingClientRect(),e=t.top,n=t.left,i=t.width,o=t.height;this.cx=window.pageXOffset+n+i/2,this.cy=window.pageYOffset+e+o/2,window.addEventListener("touchmove",this.rotate_move_Handler)},rotate_move_Handler:function(t){if(this.ismove=!0,this.rotating){var e=this.getMouseCoordinate(t),n=e.x,i=e.y,o=i-this.cy,a=n-this.cx,r=this._adsorptionRotate((this.getAngle(a,o)+90)%360);this.rotate=180-r,this.rotate<0&&(this.rotate=360+this.rotate);var s=r*Math.PI/180,c=-Math.cos(s),d=-Math.sin(s);this.widget.transform={a:c,b:d,c:-d,d:c,tx:this.widget.transform.tx,ty:this.widget.transform.ty},this.transform=[c,-d,d,c,-14,0],f["b"].updateTransformRotate(this.widget.index,this.widget.transform),this.touchendHandler()}},editorHandler:function(){this.ismove||(["text","threeText"].includes(this.widget.type)?(this.editor=!0,this.$emit("editor","edit",this.widget.index)):["image","mask"].includes(this.widget.type)&&this.$emit("editor","upload",this.widget.index))},getMouseCoordinate:function(t){return{x:t.touches[0].pageX||t.touches[0].clientX+document.body.scrollLeft,y:t.touches[0].pageY||t.touches[0].clientY+document.body.scrollTop}},getAngle:function(t,e){var n=Math.atan2(e,t);return n=Math.round(180/Math.PI*n),n<0&&(n=360+n),n},_adsorptionRotate:function(t){return t>357?360:t<3?0:Math.abs(t-45)<3?45:Math.abs(t-90)<3?90:Math.abs(t-135)<3?135:Math.abs(t-180)<3?180:Math.abs(t-225)<3?225:Math.abs(t-270)<3?270:t}},watch:{"widget.index":function(){this.editor=!1},active:function(t){var e=this;t&&this.$nextTick((function(){e.touchendHandler()}))},editor:function(t){this.$emit("edit",t)}}},xt=yt,zt=Object(z["a"])(xt,gt,pt,!1,null,null,null),St=zt.exports,Ht={name:"vx-shape",props:{item:{},index:Number},mixins:[g["d"]],data:function(){return{editor:-1,over:{},top:0,left:0,contextmenuShow:!1,isMove:!1}},components:{VxEditorText:Y,VxEditorThreeText:nt,VxEditorImage:ct,VxEditorSvg:ft,VxTransform:St},computed:{zoom:function(){return f["a"].zoom()},active:function(){return this.selectWidget.id===this.index},global:function(){return f["a"].global()},layout:function(){return f["a"].layout()},selectWidget:function(){return f["a"].current()},selectedItem:function(){return f["a"].selectedItem()},elementStyles:function(){var t=this.item;return{overflow:t.hidden?"hidden":"visible",width:t.width*this.global.zoom+"px",height:t.height*this.global.zoom+"px",top:t.top*this.global.zoom+"px",left:t.left*this.global.zoom+"px",opacity:t.opacity,"z-index":"".concat(1e3)}}},methods:{editHandler:function(t){this.$emit("edit",t)},editorHandler:function(t,e){"edit"===t?this.editor=e:this.$upload().then((function(t){f["b"].updateImg(e,t.url,getQueryVariable("width",t.url),getQueryVariable("height",t.url))})).catch((function(t){log.danger(t)}))},selectWidgetHandler:function(t){this.over=this.overlap(t),f["b"].setCurrent({id:t,index:t,type:"widget",over:this.over}),this.transformHandler(t)},transformHandler:function(t){this.over=this.overlap(t)}}},_t=Ht,kt=Object(z["a"])(_t,B,X,!1,null,null,null),It=kt.exports,Ct={name:"vx-canvas",mixins:[g["d"]],components:{VxShape:It,VxEditorBg:H,VxWaterMark:M,VxEditorGuider:P,vxSelector:D},data:function(){return{timer:null,editor:-1,type:null,lock:!1,contextmenuTop:0,contextmenuleft:0,container:{y:99},isMultipleSelect:!1}},computed:{global:function(){return f["a"].global()},layout:function(){return f["a"].layout()},selectWidget:function(){return f["a"].current()},canvasStyles:function(){return{width:"".concat(this.layout.width,"px"),height:"".concat(this.layout.height,"px")}},selectedItem:function(){return f["a"].selectedItem()},elementStyles:function(){var t=this.layout.elements[this.selectWidget.id],e=t.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:t.hidden?"hidden":"visible",width:t.width*this.global.zoom+"px",height:t.height*this.global.zoom+"px",transform:"matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.tx,",").concat(e.ty,")"),top:t.top*this.global.zoom+"px",left:t.left*this.global.zoom+"px",opacity:t.opacity,"z-index":"".concat(this.index)}}},methods:{transformHandler:function(t){this.over=this.overlap(t)},cleartransformHandler:function(){this.editor=-1,this.over={},this.contextmenuShow=!1},selectCanvasHandler:function(){this.cleartransformHandler(),f["b"].setCurrent({id:-1,type:"canvas"})},editHandler:function(t){this.$emit("edit",t)},resizeHandler:function(){var t=document.body.clientHeight-150,e=document.body.clientWidth-120,n=f["a"].canvasW(),i=f["a"].canvasH();n>=i?(f["b"].setCanvasSize(e,e*i/n),f["b"].setZoom(e/(n/f["a"].zoom()))):(f["b"].setCanvasSize(n*t/i,t),f["b"].setZoom(t/(i/f["a"].zoom())))}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.timer=setTimeout((function(){t.resizeHandler()}),100)}))},watch:{"selectWidget.id":function(t){this.index=t,t>=0?this.transformHandler(t):this.cleartransformHandler()}}},Et=Ct,Mt=Object(z["a"])(Et,p,v,!1,null,null,null),Lt=Mt.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-container",class:[t.type]},[n("div",{staticClass:"design-canvas",style:t.canvasStyles},[n("div",{staticClass:"editor-shell",style:t.canvasStyles},[n("div",{staticClass:"editor-canvas",attrs:{id:"canvas"}},[n("div",{staticClass:"editor-layout"},[[n("vx-Editor-bg",{attrs:{w:t.bgW,h:t.bgH,zoom:t.zoom,bgColor:t.bgColor,bgImg:t.bgImg,bgImgInfo:t.bgImgInfo,bgSize:t.bgSize}})],n("vx-water-mark",{attrs:{type:t.type}}),t._l(t.layout.elements,(function(e,i){return["text"===e.type?n("vx-editor-text",{key:e.id,attrs:{index:i,zoom:t.zoom,data:e},on:{"update:data":function(t){e=t}}}):t._e(),["image","mask"].includes(e.type)?n("vx-editor-image",{key:e.id,attrs:{zoom:t.zoom,index:i,data:e},on:{"update:data":function(t){e=t}}}):t._e(),["svg"].includes(e.type)?n("vx-editor-svg",{directives:[{name:"show",rawName:"v-show",value:"print"!==t.type,expression:"type !== 'print'"}],key:e.id,ref:"svg",refInFor:!0,attrs:{zoom:t.zoom,index:i,data:e},on:{"update:data":function(t){e=t}}}):t._e()]}))],2)])])])])},Ot=[],Nt=(n("498a"),n("466d"),function(){var t=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:!!e,imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa}}(),e="image/octet-stream";function n(t,e,n){var i=t.width,o=t.height;void 0==e&&(e=i),void 0==n&&(n=o);var a=document.createElement("canvas"),r=a.getContext("2d");return a.width=e,a.height=n,r.drawImage(t,0,0,i,o,0,0,e,n),a}function i(t,e,i,o){return t=n(t,i,o),t.toDataURL(e)}function o(t){document.location.href=t}function a(t){var e=document.createElement("img");return e.src=t,e}function r(t){t=t.toLowerCase().replace(/jpg/i,"jpeg");var e=t.match(/png|jpeg|bmp|gif/)[0];return"image/"+e}function s(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function c(t){var e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function d(t,e){return"data:"+e+";base64,"+t}var l=function(t){var e=t.width,n=t.height,i=e*n*3,o=i+54,a=[66,77,255&o,o>>8&255,o>>16&255,o>>24&255,0,0,0,0,54,0,0,0],r=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&i,i>>8&255,i>>16&255,i>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=(4-3*e%4)%4,d=t.data,l="",u=e<<2,h=n,m=String.fromCharCode;do{for(var f=u*(h-1),g="",p=0;p<e;p++){var v=p<<2;g+=m(d[f+v+2])+m(d[f+v+1])+m(d[f+v])}for(var w=0;w<c;w++)g+=String.fromCharCode(0);l+=g}while(--h);var b=s(a.concat(r))+s(l);return b},u=function(a,s,u,h){if(t.canvas&&t.dataURL)if("string"==typeof a&&(a=document.getElementById(a)),void 0==h&&(h="png"),h=r(h),/bmp/.test(h)){var m=c(n(a,s,u)),f=l(m);o(d(f,e))}else{var g=i(a,h,s,u);o(g.replace(h,e))}},h=function(e,o,s,u){if(t.canvas&&t.dataURL){if("string"==typeof e&&(e=document.getElementById(e)),void 0==u&&(u="png"),u=r(u),/bmp/.test(u)){var h=c(n(e,o,s)),m=l(h);return a(d(m,"image/bmp"))}var f=i(e,u,o,s);return a(f)}};return{saveAsImage:u,saveAsPNG:function(t,e,n){return u(t,e,n,"png")},saveAsJPEG:function(t,e,n){return u(t,e,n,"jpeg")},saveAsGIF:function(t,e,n){return u(t,e,n,"gif")},saveAsBMP:function(t,e,n){return u(t,e,n,"bmp")},convertToImage:h,convertToPNG:function(t,e,n){return h(t,e,n,"png")},convertToJPEG:function(t,e,n){return h(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return h(t,e,n,"gif")},convertToBMP:function(t,e,n){return h(t,e,n,"bmp")}}}()),Tt=Nt,Pt=n("0d73"),jt={name:"vx-canvas-preview",props:{height:Number,width:Number,w:Number,h:Number,print:{type:Boolean,default:!1},type:{validator:function(t){return["preview","print"].includes(t)},default:"preview"}},components:{VxEditorBg:H,VxEditorText:Y,VxEditorImage:ct,VxEditorSvg:ft,VxWaterMark:M},data:function(){return{hoverStyle:{},output:null,timer:null,size:0,zoom:"print"===this.type?1:0}},computed:{layoutZoom:function(){return f["a"].zoom()},global:function(){return f["a"].global()},layout:function(){return f["a"].layout()},canvasStyles:function(){return"print"===this.type?{width:"".concat(this.layout.width/this.layoutZoom,"px"),height:"".concat(this.layout.height/this.layoutZoom,"px")}:{}},canvasW:function(){return this.w*this.size},canvasH:function(){return this.h*this.size},bgW:function(){return this.layout.width*this.zoom},bgH:function(){return this.layout.height*this.zoom},bgColor:function(){return this.layout.backgroundColor||"#fff"},bgImg:function(){return this.layout.backgroundImage},bgImgInfo:function(){return this.layout.backgroundImageInfo},bgSize:function(){return this.layout.backgroundSize}},mounted:function(){"preview"===this.type&&this.updateSizeHandler()},methods:{updateSizeHandler:function(){var t=this.width/this.w,e=this.height/this.h;this.size=t>e?e:t,this.updateZoomHandler()},updateZoomHandler:function(){var t=this.canvasW/this.layout.width,e=this.canvasH/this.layout.height;this.zoom=t>e?e:t},getSvgHandler:function(t){var e=this;return new Promise((function(n,i){e.$axios.get(t,{}).then((function(t){n(t)})).catch((function(t){i(t)}))}))},svgHandler:function(t,e,n,i,o){var a=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s="",c=document.createElement("canvas"),!e.html){r.next=13;break}s=e.html.trim(),c.style.position="absolute",c.style.left=e.data.left+"px",c.style.top=e.data.top+"px",c.style.width=e.data.width+"px",c.style.height=e.data.height+"px",f["c"].layout.elements[e.index],c.style.zIndex=e.index,r.next=33;break;case 13:if(!e.content){r.next=24;break}s=e.content.trim(),c.style.position="absolute",c.style.left=o+"px",c.style.top=i+"px",c.style.width=e.width+"px",c.style.height=e.height+"px",f["c"].layout.elements[e.index],c.style.zIndex=n,r.next=33;break;case 24:return r.next=26,a.getSvgHandler(e.url).then((function(t){s=t.trim()}));case 26:c.style.position="absolute",c.style.left=o+"px",c.style.top=i+"px",c.style.width=e.width+"px",c.style.height=e.height+"px",f["c"].layout.elements[e.index],c.style.zIndex=n;case 33:Object(Pt["a"])(c,s),t.appendChild(c),c=null;case 36:case"end":return r.stop()}}),r)})))()},downLoad:function(t,e){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function i(){var o,a,r,s,c,d,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=1,"PNG"==t?o=1:"JPG"==t&&(o=e),a=document.querySelector("#canvas"),n.$refs.svg&&n.$refs.svg.length>0&&n.$refs.svg.forEach((function(t){n.svgHandler(a,t)})),r=a.offsetWidth,s=a.offsetHeight,c=document.createElement("canvas"),d=o,c.width=r*d,c.height=s*d,c.getContext("2d").scale(d,d),l={scale:d,canvas:c,logging:!1,width:r,height:s,useCORS:!0},i.next=14,n.$html2canvas(a,l).then((function(e){var n=e.getContext("2d");if(n.mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,"PNG"==t){var i=Tt.convertToPNG(e,e.width,e.height);return i.src}var o=Tt.convertToJPEG(e,e.width,e.height);return o.src}));case 14:return i.abrupt("return",i.sent);case 15:case"end":return i.stop()}}),i)})))()}},watch:{w:function(){"preview"===this.type&&this.updateSizeHandler()},h:function(){"preview"===this.type&&this.updateSizeHandler()}}},$t=jt,Rt=Object(z["a"])($t,Wt,Ot,!1,null,null,null),At=Rt.exports,Vt=n("4e02"),Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-config"},[-1===t.selectWidget.id?n("VxNoSelect",{on:{add:t.addHandler}}):t._e(),"text"===t.widget.type||"threeText"===t.widget.type?n("VxConfgText",{attrs:{edit:t.editAble,index:t.widget.index},on:{panelShow:t.panelShowHandler}}):t._e(),"image"===t.widget.type||"mask"===t.widget.type||"svg"===t.widget.type?n("VxConfgImage",{attrs:{index:t.selectWidget.index}}):t._e()],1)},Bt=[],Xt=function(){return n.e("chunk-2d0c8443").then(n.bind(null,"53c2"))},Ft=function(){return n.e("chunk-2d0b2965").then(n.bind(null,"256b"))},Zt=function(){return n.e("chunk-2d0a32e6").then(n.bind(null,"00a1"))},Ut={name:"vx-config",props:{selectWidget:{type:Object},editAble:{type:Boolean}},components:{VxNoSelect:Xt,VxConfgText:Ft,VxConfgImage:Zt},computed:{layout:function(){return getter.layout()},widget:function(){var t=this.selectWidget.id;if(t<0)return{index:-1};var e=this.layout.elements[t];if(e){var n={w:e.width,h:e.height,l:e.left,t:e.top},i=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};return{transform:i,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1}}return null}},methods:{addHandler:function(t){this.$emit("add",{id:t.id,type:t.type})},panelShowHandler:function(t){this.$emit("panelShow",t)}}},Jt=Ut,Gt=Object(z["a"])(Jt,Dt,Bt,!1,null,null,null),Yt=Gt.exports,qt=Yt,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-menu"},[n("ul",[n("li",{staticClass:"design-menu-undo",class:{disable:t.undoStatus},on:{touchend:t.undoHandler}},[n("vx-icon",{attrs:{name:"undo"}}),n("span",[t._v("撤销")])],1),n("li",{staticClass:"design-menu-redo",class:{disable:t.redoState},on:{touchend:t.redoHandler}},[n("vx-icon",{attrs:{name:"redo"}}),n("span",[t._v("重做")])],1),n("li",{directives:[{name:"show",rawName:"v-show",value:-1!==t.current.id,expression:"current.id !== -1"}],staticClass:"design-menu-delete",on:{touchend:t.deleteHandler}},[n("vx-icon",{attrs:{name:"delete"}}),n("span",[t._v("删除")])],1),n("li",{staticClass:"design-menu-save"},[n("span",{staticClass:"design-menu-save-text",on:{touchend:t.saveHandler}},[t._v("保存")])])]),n("VxCanvasPreview",{ref:"print",attrs:{type:"print"}})],1)},Qt=[],te=(n("c19f"),n("ace4"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),{name:"vx-menu",components:{VxCanvasPreview:At},data:function(){return{loading:!1}},computed:{current:function(){return f["a"].current()},undoStatus:function(){return!f["a"].undoStatus()},redoState:function(){return!f["a"].redoStatus()}},methods:{deleteHandler:function(){f["b"].deleteElement(this.current.id),this.$emit("delete")},undoHandler:function(){this.$emit("undo")},redoHandler:function(){this.$emit("redo")},saveHandler:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,i,o,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(g["a"].getItem("token")){e.next=3;break}return h()({message:"请登录",type:"warning",duration:1e3,onClose:function(t){wx.miniProgram.navigateTo({url:"/pages/login/index"})}}),e.abrupt("return");case 3:return t.loading=!0,t.$emit("loading",t.loading),e.next=7,t.$refs.print.downLoad("JPG",1);case 7:return n=e.sent,i=t.toImage(n),e.next=11,t.$blobUpload(i,new Date+"."+i.type.replace("image/","")).catch((function(e){t.loading=!1,t.$emit("loading",t.loading),501===e.errno&&h()({message:"登录已超时，请重新登录",type:"warning",duration:1e3,onClose:function(t){wx.miniProgram.navigateTo({url:"/pages/login/index"})}})}));case 11:if(o=e.sent,a=null===o||void 0===o?void 0:o.url,!a){e.next=22;break}return r=Object(vt["a"])(Object(vt["a"])({goodsId:f["a"].goodsId()||""},f["a"].template()),{},{picUrl:a}),s=f["a"].id(),s&&(r["id"]=s),e.next=19,Object(Vt["e"])(r).then((function(t){f["b"].setId(t.data.id)})).catch((function(e){t.$emit("loading",t.loading),t.loading=!1,g["c"].warning(e)}));case 19:t.loading=!1,t.$emit("loading",t.loading),h()({message:"保存成功",type:"success",duration:1e3,onClose:function(t){wx.miniProgram.navigateTo({url:"/pages/saveImage/index?url="+encodeURIComponent(a)})}});case 22:case"end":return e.stop()}}),e)})))()},toImage:function(t,e){for(var n=t.split(","),i=n[0].match(/:(.*?);/)[1]||e,o=window.atob(n[1]),a=new ArrayBuffer(o.length),r=new Uint8Array(a),s=0;s<o.length;s++)r[s]=o.charCodeAt(s);return new Blob([a],{type:i})}}}),ee=te,ne=Object(z["a"])(ee,Kt,Qt,!1,null,null,null),ie=ne.exports,oe=function(){return n.e("chunk-2d0afe3b").then(n.bind(null,"0ff5"))},ae=function(){return n.e("chunk-2d0c4237").then(n.bind(null,"3a0c"))},re={name:"vx-design-layout",mixins:[g["d"]],components:{VxCanvas:Lt,VxMenu:ie,VxConfig:qt,VxError:oe,Vxloading:ae},data:function(){return{panelShow:-1,loading:!0,id:null,error:!1,edit:!1,saveLoading:!1}},computed:{selectWidget:function(){return f["a"].current()},elements:function(){return f["a"].layout().elements}},created:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getParams();case 2:n=document.body.clientHeight-150,i=document.body.clientWidth-120,o={id:t.id,type:"template"},Object(Vt["b"])(o).then(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(o){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.data.info.detail=JSON.parse(o.data.info.detail),e.next=3,f["b"].setTemplate(o.data.info.detail,t.id);case 3:t.loadfontFamilyHandler(o.data.info.detail.layouts[0]),a=f["a"].canvasW(),r=f["a"].canvasH(),a>=r?(f["b"].setCanvasSize(i,i*r/a),f["b"].setRealSize(i,i*r/a),f["b"].setZoom(i/a),f["b"].setRealZoom(i/a)):(f["b"].setCanvasSize(a*n/r,n),f["b"].setRealSize(a*n/r,n),f["b"].setZoom(n/r),f["b"].setRealZoom(n/r)),t.loading=!1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.error=!0,t.loading=!1,g["c"].danger(e)}));case 6:case"end":return e.stop()}}),e)})))()},methods:{loadingHandler:function(t){this.saveLoading=t},editHandler:function(t){this.edit=t},getParams:function(){var t=window.location.href,e=Object(g["b"])("token",t);this.id=Object(g["b"])("id",t),e?g["a"].setItem("token",e):h()({message:"请登录",type:"warning",duration:1e3,onClose:function(t){wx.miniProgram.navigateTo({url:"/pages/login/index"})}})},panelShowHandler:function(t){this.panelShow=t},loadfontFamilyHandler:function(t){var e=this;this.getFontFamilyList(t).then((function(t){t.forEach((function(t){Object(Vt["a"])(t).then((function(t){var n;(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.info)&&e.setFontStyle(t.data.info)}))}))}))},getFontFamilyList:function(t){return Object(m["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],!(t.elements&&t.elements.length>0)){e.next=5;break}return e.next=4,t.elements.forEach((function(t){"text"===t.type&&n.push(t.fontFamily)}));case 4:return e.abrupt("return",Array.from(new Set(n)));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))()},setFontStyle:function(t){var e=document.createElement("style");e.type="text/css",e.innerText="@font-face {font-family:".concat(t.name,";src:url(").concat(t.detail,")}"),document.getElementsByTagName("head")[0].appendChild(e)},hidePanelHandler:function(){this.togglePanelHandler(-1)},togglePanelHandler:function(t){t===this.panelShow?this.panelShow=-1:this.panelShow=t},undoHandler:function(){f["b"].setUndo()},redoHandler:function(){f["b"].setRedo()},deleteHandler:function(){var t={type:"canvas",id:-1};f["b"].setCurrent(t)},addHandler:function(t){f["b"].setCurrent({id:t.id,type:t.type})}}},se=re,ce=Object(z["a"])(se,d,l,!1,null,null,null),de=ce.exports,le={name:"app",components:{VxDesignLayout:de},mounted:function(){}},ue=le,he=Object(z["a"])(ue,s,c,!1,null,null,null),me=he.exports,fe=(n("a41b"),n("1927"),n("a6e4"),n("b775")),ge=n("6b43"),pe=n("8fa9");function ve(t){return we.apply(this,arguments)}function we(){return we=Object(m["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!ge["a"].getItem("token")){t.next=6;break}return t.next=3,fe["b"].post(pe["a"].UPLOAD_API,e,{headers:{"Content-Type":"multipart/form-data","X-Litemall-Token":"".concat(ge["a"].getItem("token")||"")}});case 3:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",new Promise((function(t){t({data:{errmsg:"请登录",errno:501}})})));case 7:case"end":return t.stop()}}),t)}))),we.apply(this,arguments)}var be=fe["a"],ye=n("63d6"),xe=n.n(ye),ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:{"btn-tip":t.title},attrs:{"aria-label":t.title}},[n("svg",{staticClass:"vx",style:t.styles,attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":t.href}})])])},Se=[],He={name:"vx-icon",props:{name:String,title:String,size:Number},computed:{href:function(){return"#vx-".concat(this.name)},styles:function(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}}}},_e=He,ke=Object(z["a"])(_e,ze,Se,!1,null,null,null),Ie=ke.exports,Ce=function(){return new Promise((function(t,e){var n=document.querySelectorAll('[data-id="upload"]');n.forEach((function(t){t.remove()}));var i=document.createElement("input");i.style="display: none;",i.setAttribute("data-id","upload"),i.setAttribute("type","file"),i.setAttribute("accept","image/*"),document.body.appendChild(i),i.focus(),i.click(),i.addEventListener("change",Object(m["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:0===i.files.length&&e("请选择文件"),o=i.files[0],/^image\//.test(o.type)||e("请选择图片文件"),o.size>12582912&&e("图片大小必须是12MB以内"),a=new FormData,a.append("file",o,o.name),ve(a).then((function(n){if(501===n.errno&&e(n),null===n||void 0===n?void 0:n.data){var i=n.data;t(i)}})).catch((function(t){e(t)})).finally((function(){i.remove()}));case 7:case"end":return n.stop()}}),n)}))))}))},Ee=function(t,e){return new Promise((function(n,i){var o=new FormData;o.append("file",t,e),ve(o).then((function(t){if(501==t.errno&&i(t),null===t||void 0===t?void 0:t.data){var e=t.data;n(e)}})).catch((function(t){i(t)}))}))};r.a.use(o.a),r.a.component("VxLoading",(function(){return n.e("chunk-2d0c4237").then(n.bind(null,"3a0c"))})),r.a.use(xe.a),r.a.component(Ie.name,Ie),r.a.prototype.$axios=be,r.a.prototype.$upload=Ce,r.a.prototype.$blobUpload=Ee,r.a.config.productionTip=!1,r.a.config.devtools=!1,new r.a({el:"#app",template:"<App/>",components:{App:me},mounted:function(){document.dispatchEvent(new Event("render-event"))}})},"6b43":function(t,e,n){"use strict";var i=function(){var t="mystorage",e=window.localStorage,n=function(){return!!window.localStorage},i=function(n,i){var o=e.getItem(t);return o||(this.init(),o=e.getItem(t)),o=JSON.parse(o),o.data[n]=i,e.setItem(t,JSON.stringify(o)),o.data},o=function(n){var i=e.getItem(t);return!!i&&(i=JSON.parse(i),i.data[n])},a=function(n){var i=e.getItem(t);return!!i&&(i=JSON.parse(i),delete i.data[n],e.setItem(t,JSON.stringify(i)),i.data)},r=function(){e.removeItem(t)},s=function(){e.setItem(t,'{"data":{}}')};return{test:n,setItem:i,getItem:o,removeItem:a,init:s,clear:r}}();e["a"]=i},"8fa9":function(t,e,n){"use strict";var i="/storage/",o="/goods/",a="/production/",r="/auth/",s="/resource/",c="".concat(i,"upload"),d="".concat(o,"detail"),l="".concat(a,"save"),u="".concat(o,"list"),h="".concat(s,"list"),m="".concat(s,"detail"),f="".concat(r,"login");e["a"]={UPLOAD_API:c,TEMPLATE_API:d,SAVE_API:l,SEARCH_API:u,EFFECTS_API:h,PHONR_LOGIN_API:f,EFFECT_DETAIL_API:m}},a41b:function(t,e,n){},a6e4:function(t,e,n){n("c975"),function(t){var e,n='<svg><symbol id="vx-fontFamily" viewBox="0 0 1024 1024"><path d="M653.568 724.352l-366.72 0.32L216.32 893.888l158.656 0 0 57.088L64 950.976l0-57.088 55.424 0L495.232 73.088 528 73.088l386.304 820.8L960 893.888l0 57.088-280.96 0 0-57.088 60.544 0L653.568 724.352zM339.264 614.656l256.64-0.768L480 376.768 456.96 376.768 339.264 614.656z"  ></path></symbol><symbol id="vx-filter" viewBox="0 0 1024 1024"><path d="M233.29108827 564.80335264c-1.87794395 27.69966647-13.14560507 95.02946544-75.83577757 143.16557653C107.41363929 746.3839213 50.7439319 743.15275378 14.8973037 735.0886438c137.03464329 52.8585867 144.76735146 166.66748777 136.89655876 230.71088385 50.64924095-166.805571 233.19639862-130.62754229 266.50227929-122.53581464-173.01935469-46.58956895-185.03266986-228.61200623-185.00505348-278.46036037z m643.96892667-401.76944544c-20.79546279 4.97102697-72.74269456 4.14252247-122.06632962-31.56602122C715.86733955 102.99494779 706.6157056 43.48070875 704.54444436 14.8973037c-8.39551178 114.27838608-91.24596116 162.74589898-140.04487584 171.55566429 137.25557825-0.55233676 148.4680053 151.3953874 149.35174256 172.3565511-5.3852792-141.03908124 126.62310304-184.28701581 163.43632025-195.77561189z m114.85833923 287.68437664c-6.26901777 9.83158709-23.97139626 32.36690932-56.78017421 37.17223539-26.23597606 3.83873706-46.5067185-9.14116581-58.07816502-19.55270606 40.01676705 47.9427938 19.82887378 91.60498063 4.00443796 113.58796612 53.63185713-52.52718491 115.43829237 2.62359798 123.69572093 10.466773-55.39933425-53.05190399-22.92195809-123.22623461-12.84181966-141.67426845z m-604.4768787 115.71446141l81.41437537-82.18764578-98.78535336-93.40007286a28.85957277 28.85957277 0 0 0-40.84527154 1.18752269l-39.65774756 42.06041188a28.9700409 28.9700409 0 0 0 1.15990627 40.87288794l96.71409082 91.46689613z m111.57193894-53.63185713l-81.38675898 82.16002809 429.60719773 406.24337101c11.59906291 10.9638757 29.88139585 10.43915662 40.84527154-1.1599063l39.65774759-42.06041189a28.94242322 28.94242322 0 0 0-1.18752269-40.87288793l-427.50831881-404.31019298z"  ></path></symbol><symbol id="vx-confim" viewBox="0 0 1024 1024"><path d="M653.24698381 372.37841314L458.19936461 567.42603127 372.37841314 481.60507981c-15.60380907-7.80190507-39.00952427-7.80190507-54.61333333 0-15.60380907 15.60380907-15.60380907 46.81142827 0 62.41523733l109.22666666 109.22666667c15.60380907 15.60380907 39.00952427 15.60380907 54.61333334 0L707.86031714 426.99174647c15.60380907-15.60380907 15.60380907-39.00952427 0-54.61333333-15.60380907-15.60380907-39.00952427-15.60380907-54.61333333 0M512.81269794 941.91746061C278.75555554 941.91746061 83.70793634 746.86984141 83.70793634 512.81269794S278.75555554 83.70793634 512.81269794 83.70793634 941.91746061 278.75555554 941.91746061 512.81269794 746.86984141 941.91746061 512.81269794 941.91746061m0-936.22857174C231.94412727 5.68888887 5.68888887 231.94412727 5.68888887 512.81269794S231.94412727 1019.93650807 512.81269794 1019.93650807 1019.93650807 793.68126967 1019.93650807 512.81269794 793.68126967 5.68888887 512.81269794 5.68888887"  ></path></symbol><symbol id="vx-reduceFontSize" viewBox="0 0 1024 1024"><path d="M591.07555555 801.33688889h-93.29777777L430.99022222 622.36444445H158.60622222l-62.91911111 179.08622222h-93.29777778l249.17333334-654.10844445h90.33955555l249.17333333 653.99466667zM404.82133333 548.40888889L306.06222222 276.48c-3.072-8.76088889-6.48533333-23.89333333-10.12622222-45.62488889h-2.16177778c-3.072 19.68355555-6.59911111 34.92977778-10.58133333 45.62488889l-97.96266667 271.92888889h219.59111111zM659.91111111 473.20177778h359.08266667v72.47644444H659.91111111z"  ></path></symbol><symbol id="vx-addFontSize" viewBox="0 0 1024 1024"><path d="M1018.99377778 545.67822222H875.74755555v143.70133333h-71.90755555V545.67822222H659.91111111v-72.47644444h143.92888889V328.81777778h71.90755555v144.384h143.24622223v72.47644444zM591.07555555 801.33688889h-93.29777777L430.99022222 622.36444445H158.60622222l-62.91911111 179.08622222h-93.29777778l249.17333334-654.10844445h90.33955555l249.17333333 653.99466667zM404.82133333 548.40888889L306.06222222 276.48c-3.072-8.76088889-6.48533333-23.89333333-10.12622222-45.62488889h-2.16177778c-3.072 19.68355555-6.59911111 34.92977778-10.58133333 45.62488889l-97.96266667 271.92888889h219.59111111z"  ></path></symbol><symbol id="vx-fontStyle" viewBox="0 0 1024 1024"><path d="M622.68302222 193.78631111H103.49226667V389.66613333h114.32391111V308.11022222h144.90737777v475.50008889H278.25493333v114.32391111h283.98933334v-114.32391111H477.04746667V308.11022222h145.63555555v81.55591111h114.32391111V193.78631111H622.68302222z"  ></path><path d="M854.24355555 489.42648889H552.77795555v113.59573333h66.26417778V555.69066667h84.46862222v275.97937778h-48.7879111v66.26417777H819.29102222v-66.26417777h-49.51608889V555.69066667h84.46862222v47.33155555h66.26417778V489.42648889h-66.26417778z"  ></path></symbol><symbol id="vx-left" viewBox="0 0 1024 1024"><path d="M960.007451 0H64.00158C28.652059 0 0 28.653866 0 64.003387s28.652059 64.00158 64.00158 64.00158h896.005871c35.338684 0 63.992549-28.652059 63.992549-64.00158C1024 28.653866 995.346134 0 960.007451 0zM704.001129 896.007676H64.00158C28.652059 896.007676 0 924.659736 0 960.009257c0 35.338684 28.652059 63.990743 64.00158 63.990743h639.999549c35.347715 0 64.00158-28.652059 64.00158-63.990743 0-35.349521-28.653866-64.00158-64.00158-64.001581zM704.001129 296.962348H64.00158C28.652059 296.962348 0 325.614407 0 360.963929c0 35.349521 28.652059 64.00158 64.00158 64.00158h639.999549c35.347715 0 64.00158-28.652059 64.00158-64.00158 0-35.349521-28.653866-64.00158-64.00158-64.001581zM960.007451 599.045328H64.00158C28.652059 599.045328 0 627.699194 0 663.046909c0 35.338684 28.652059 63.990743 64.00158 63.990743h896.005871c35.338684 0 63.992549-28.652059 63.992549-63.990743 0-35.347715-28.653866-64.00158-63.992549-64.001581z"  ></path></symbol><symbol id="vx-right" viewBox="0 0 1024 1024"><path d="M960.007451 0H64.00158C28.652059 0 0 28.653866 0 64.003387s28.652059 64.00158 64.00158 64.00158h896.005871c35.338684 0 63.992549-28.652059 63.992549-64.00158C1024 28.653866 995.346134 0 960.007451 0zM960.007451 896.007676H319.998871c-35.338684 0-63.990743 28.652059-63.990743 64.001581 0 35.338684 28.652059 63.990743 63.990743 63.990743h640.00858c35.338684 0 63.992549-28.652059 63.992549-63.990743 0-35.349521-28.653866-64.00158-63.992549-64.001581zM960.007451 296.962348H319.998871c-35.338684 0-63.990743 28.653866-63.990743 64.001581 0 35.349521 28.652059 64.00158 63.990743 64.00158h640.00858c35.338684 0 63.992549-28.652059 63.992549-64.00158 0-35.349521-28.653866-64.00158-63.992549-64.001581zM960.007451 599.045328H64.00158C28.652059 599.045328 0 627.699194 0 663.046909c0 35.338684 28.652059 63.990743 64.00158 63.990743h896.005871c35.338684 0 63.992549-28.652059 63.992549-63.990743 0-35.347715-28.653866-64.00158-63.992549-64.001581z"  ></path></symbol><symbol id="vx-color" viewBox="0 0 1024 1024"><path d="M512 0a512 512 0 0 0 0 1024c180.224 0-110.592-204.8 204.8-204.8a302.08 302.08 0 0 0 307.2-307.2A512 512 0 0 0 512 0zM179.2 486.4A76.8 76.8 0 1 1 256 409.6a76.8 76.8 0 0 1-76.8 76.8zM358.4 307.2a76.8 76.8 0 1 1 76.8-76.8A76.8 76.8 0 0 1 358.4 307.2z m307.2 0a76.8 76.8 0 1 1 76.8-76.8A76.8 76.8 0 0 1 665.6 307.2z m179.2 179.2A76.8 76.8 0 1 1 921.6 409.6a76.8 76.8 0 0 1-76.8 76.8z"  ></path></symbol><symbol id="vx-mid" viewBox="0 0 1097 1024"><path d="M36.059429 147.382857v-109.714286H1060.571429v109.714286H36.059429z m219.794285 282.916572v-109.714286h582.144v109.714286H255.853714zM38.985143 718.262857v-109.714286h1022.464v109.714286H38.985143z m220.306286 278.674286v-109.714286h579.657142v109.714286H259.291429z"  ></path></symbol><symbol id="vx-image" viewBox="0 0 1024 1024"><path d="M871.538 118.329H143.36c-38.684 0-68.267 29.582-68.267 68.267v634.88c0 36.408 29.583 68.266 68.267 68.266h728.178c36.409 0 68.266-31.858 68.266-68.266v-634.88c0-36.41-29.582-68.267-68.266-68.267z m-573.44 116.053c38.684 0 72.818 31.858 72.818 72.818s-31.858 72.818-72.818 72.818c-38.685 0-72.818-31.858-72.818-72.818s34.133-72.818 72.818-72.818z m-52.338 552.96c-6.827 0-13.653-2.275-20.48-6.826-13.653-11.378-13.653-27.307-2.276-40.96L364.09 541.582c11.378-11.378 27.307-13.653 40.96-4.55l122.88 86.47 220.729-236.658c11.378-11.377 65.99-70.542 97.849-4.55v402.773c0 2.275-600.747 2.275-600.747 2.275z"  ></path></symbol><symbol id="vx-undo" viewBox="0 0 1024 1024"><path d="M116.492 424.11l351.563-307.618v179.956c439.453 105.689 439.453 611.06 439.453 611.06S753.699 552.21 468.055 552.21v179.517z"  ></path></symbol><symbol id="vx-redo" viewBox="0 0 1024 1024"><path d="M907.508 424.11L555.945 116.491v179.956c-439.453 105.689-439.453 611.06-439.453 611.06S270.301 552.21 555.945 552.21v179.517z"  ></path></symbol><symbol id="vx-cut" viewBox="0 0 1024 1024"><path d="M416 416h192v192H416z"  ></path><path d="M32 176h93.6v96H32z m287.04 0v96h432v720h96V176h-528z"  ></path><path d="M992 848h-96v-96h96z m-288 0H176V32h96v720h432z"  ></path></symbol><symbol id="vx-cancel" viewBox="0 0 1024 1024"><path d="M780.247 817.52c-9.777 0-18.943-3.666-26.275-10.999L217.478 270.028c-14.665-14.665-14.665-37.885 0-52.55s37.885-14.665 52.55 0L806.52 753.972a36.892 36.892 0 0 1 0 52.55 36.529 36.529 0 0 1-26.274 10.998z m-536.494 0c-9.777 0-18.942-3.666-26.275-10.999a36.892 36.892 0 0 1 0-52.55l536.494-536.493c14.665-14.665 37.884-14.665 52.55 0s14.664 37.885 0 52.55L270.027 806.52a36.529 36.529 0 0 1-26.275 10.999z"  ></path></symbol><symbol id="vx-ok" viewBox="0 0 1024 1024"><path d="M366.625 663.608L181.333 478.316l-62.835 62.795L366.625 789.2l532.974-532.932-62.795-62.835-470.18 470.176z"  ></path></symbol><symbol id="vx-edit" viewBox="0 0 1024 1024"><path d="M906.615 190.077l-72.692-72.692c-27.692-27.693-70.961-27.693-96.923 0L679.885 174.5c-6.923 6.923-6.923 17.308 0 24.23L827 345.847c6.923 6.923 17.308 6.923 24.23 0l57.116-57.115c25.962-27.693 25.962-70.962-1.73-98.654z m-275.192 57.115c-6.923-6.923-17.308-6.923-24.23 0L155.461 698.923 98.346 894.5c-5.192 19.038 12.116 38.077 31.154 32.885L326.808 872h-1.731l451.73-451.73c6.924-6.924 6.924-17.308 0-24.232L631.424 247.192z"  ></path></symbol><symbol id="vx-delete" viewBox="0 0 1024 1024"><path d="M516.85 186.112c-66.148 0-119.987 52.49-122.26 118.274H240.223a31.134 31.134 0 0 0-31.133 31.104 31.134 31.134 0 0 0 31.133 31.103h34.378v348.67c0 65.466 44.442 118.927 99.237 118.927h279.55c54.796 0 99.238-53.142 99.238-118.927V366.941h31.133a31.134 31.134 0 0 0 31.134-31.118 31.134 31.134 0 0 0-31.134-31.103H638.793A121.928 121.928 0 0 0 516.85 186.112z m-68.254 112.711c2.259-31.678 29.678-56.356 63.555-56.356 33.878 0 61.313 24.662 63.238 56.356H448.596zM377.31 777.501c-19.72 0-41.425-24.919-41.425-60.494V369.262h366.298v348.064c0 35.59-21.69 60.493-41.41 60.493H377.309v-0.318z"  ></path><path d="M427.66 693.285c15.506 0 28.178-13.793 28.178-31.073V484.868c0-17.28-12.672-31.073-28.178-31.073-15.491 0-28.178 13.793-28.178 31.073v177.344c0 17.28 12.322 31.073 28.193 31.073z m98.615 0c15.506 0 28.193-13.793 28.193-31.073V484.868c0-17.28-12.687-31.073-28.193-31.073-15.49 0-28.178 13.793-28.178 31.073v177.344c0 17.28 12.687 31.073 28.193 31.073z m84.534 0c15.491 0 28.178-13.793 28.178-31.073V484.868c0-17.28-12.687-31.073-28.178-31.073s-28.178 13.793-28.178 31.073v177.344c0 17.28 12.323 31.073 28.178 31.073z"  ></path></symbol><symbol id="vx-rotate" viewBox="0 0 1024 1024"><path d="M759.192 512c0-134.01-113.183-247.192-247.192-247.192v61.798c100.484 0 185.394 84.91 185.394 185.394S612.484 697.394 512 697.394v30.9l-0.062-30.9h-0.34a177.36 177.36 0 0 1-38.067-4.14L460.244 753.6a239.842 239.842 0 0 0 51.354 5.592h0.464c133.978-0.03 247.13-113.214 247.13-247.192z"  ></path><path d="M511.228 203.01l-122.824 92.697 122.824 92.697zM264.808 512c0 29.725 5.407 58.894 16.036 86.765l57.75-22.031a180.296 180.296 0 0 1-11.525-77.742l-61.613-4.42a233.35 233.35 0 0 0-0.648 17.428z m116.736-130.61l-43.691-43.753a252.074 252.074 0 0 0-57.163 88.062l57.75 21.97a190.338 190.338 0 0 1 43.104-66.28z m12.854 347.429l29.756-54.136a192.007 192.007 0 0 1-59.851-51.786l-49.254 37.357a254.145 254.145 0 0 0 79.35 68.565z"  ></path></symbol><symbol id="vx-font" viewBox="0 0 1024 1024"><path d="M458.877 855.158V209.856h-283.08a46.682 46.682 0 0 1-46.681-46.682 46.682 46.682 0 0 1 46.682-46.682h672.404a46.682 46.682 0 0 1 46.682 46.682 46.682 46.682 0 0 1-46.682 46.682h-284.42v645.302a52.35 52.35 0 0 1-52.349 52.35 52.35 52.35 0 0 1-52.556-52.35z"  ></path></symbol></svg>',i=(e=document.getElementsByTagName("script"))[e.length-1].getAttribute("data-injectcss");if(i&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}!function(e){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(e,0);else{var n=function t(){document.removeEventListener("DOMContentLoaded",t,!1),e()};document.addEventListener("DOMContentLoaded",n,!1)}else document.attachEvent&&(o=e,a=t.document,r=!1,(s=function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(s,50)}i()})(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,i())});function i(){r||(r=!0,o())}var o,a,r,s}((function(){var t,e,i,o,a,r;(t=document.createElement("div")).innerHTML=n,n=null,(e=t.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",i=e,(o=document.body).firstChild?(a=i,(r=o.firstChild).parentNode.insertBefore(a,r)):o.appendChild(i))}))}(window)},ac50:function(t,e,n){t.exports=n.p+"img/waterMark.91de0c77.png"},b775:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h}));n("d3b7"),n("0fb7"),n("450d");var i=n("f529"),o=n.n(i),a=n("6b43"),r=n("bc3a"),s=n.n(r);n("ed08");function c(t){var e=new Error(t);throw d(e),e}function d(t){o()({message:t.message,type:"error",duration:5e3})}var l="https://iyouquan.capelabs.cn/wx/";var u=s.a.create({baseURL:l,timeout:1e4}),h=s.a.create({baseURL:l,timeout:3e4}),m=function(t){return t.headers["X-Litemall-Token"]||(t.headers["X-Litemall-Token"]="".concat(a["a"].getItem("token")||"")),t.headers["Cache-control"]="max-age=20,immutable",t},f=function(t){d(t),Promise.reject(t)},g=function(t){var e=t.data,n=e.errno;if(void 0===n)return e;switch(n){case 400:c("".concat(e.errmsg));break;case 403:c("".concat(e.errmsg));break;case 404:c("".concat(e.errmsg));break;case 408:c("".concat(e.errmsg));break;case 500:c("".concat(e.errmsg));break;case 502:c("".concat(e.errmsg));break;case 503:c("".concat(e.errmsg));break;case 504:c("".concat(e.errmsg));break;case 505:c("".concat(e.errmsg));break;default:return e}},p=function(t){if(null===t||void 0===t?void 0:t.response)switch(t.response.status){case 400:t.message="请求错误";break;case 401:t.message="未授权，请登录";break;case 403:t.message="拒绝访问";break;case 404:t.message="请求地址出错";break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;case 501:t.message="服务未实现";break;case 502:t.message="网关错误";break;case 503:t.message="服务不可用";break;case 504:t.message="网关超时";break;case 505:t.message="HTTP版本不受支持";break;default:break}return d(t),Promise.reject(t)};u.interceptors.request.use(m,f),u.interceptors.response.use(g,p),h.interceptors.response.use(g,p),e["c"]=u},ed08:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return i["a"]})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return d["a"]}));var i=n("371c"),o=(n("4160"),n("159b"),n("4360")),a=10,r={methods:{updateZoom:function(t,e){var n=o["a"].canvasH(),i=o["a"].canvasW(),a=(e-140)/i,r=(t-140)/n;a>r?o["b"].setZoom(r):o["b"].setZoom(a)},adaptScreen:function(){var t=document.querySelector("#js-container"),e=t.clientHeight,n=t.clientWidth;this.updateZoom(e,n)},acutalSize:function(){o["b"].setZoom(1)},overlap:function(t){var e=o["a"].layout().elements[t],n=e.top,i=e.left,a=e.top+e.height,r=e.left+e.width,s=[],c=[];return o["a"].layout().elements.forEach((function(e,o){if(t!==o){var d=e.top,l=e.left+e.width,u=e.top+e.height,h=e.left;l<i||h>r||u<n||d>a||(o<t?c.push(o):s.push(o))}})),{up:s,down:c}},guider:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!(e<0)){var n=o["a"].layout().width,i=o["a"].layout().height,r=o["a"].layout().elements[e],s=r.top,c=r.left,d=r.top+r.height,l=r.left+r.width,u=n/2,h=i/2,m=c+r.width/2,f=s+r.height/2,g={};Math.abs(s)<a&&(g["T"]={t:0,l:c,r:0}),Math.abs(c)<a&&(g["L"]={t:s,l:0,b:0}),Math.abs(d-i)<a&&(g["B"]={b:0,l:c,r:0}),Math.abs(l-n)<a&&(g["R"]={r:0,t:s,b:0}),Math.abs(f-h)<a&&(g["cx"]={t:h,type:"canvas"}),Math.abs(m-u)<a&&(g["cy"]={l:u,type:"canvas"}),o["a"].layout().elements.forEach((function(o,a){if(e!==a){var r=o.top,u=o.left+o.width,h=o.top+o.height,p=o.left,v=p+o.width/2,w=r+o.height/2;u<c||p>l||h<s||r>d||(g=Object.assign({},g,t.elementGuider({t:s,l:c,b:d,r:l,cx:m,cy:f},{t:r,l:p,b:h,r:u,cx:v,cy:w},n,i)))}})),o["b"].setGuider(g)}},elementGuider:function(t,e,n,i){var o=t.t-e.t,r=t.l-e.l,s=t.b-e.b,c=t.r-e.r,d=t.cx-e.cx,l=t.cy-e.cy,u={};return Math.abs(o)<a&&(u["T"]={t:e.t,l:0,r:0}),Math.abs(r)<a&&(u["L"]={t:0,l:e.l,b:0}),Math.abs(s)<a&&(u["B"]={b:i-Math.abs(e.b),l:0,r:0}),Math.abs(c)<a&&(u["R"]={t:0,r:n-Math.abs(e.r),b:0}),Math.abs(l)<a&&(u["cx"]={t:e.cy}),Math.abs(d)<a&&(u["cy"]={l:e.cx}),u},selected:function(t){var e=o["a"].current();if(void 0!==e.parent&&-1!==e.parent){var n=t.offsetX,i=t.offsetY,a=o["a"].zoom(),r=o["a"].layout().elements[e.id].elements,s=!0;r.forEach((function(t,r){var c=t.left*a,d=t.top*a,l=c+t.width*a,u=d+t.height*a;if(n>c&&n<l&&i>d&&i<u)return e.index=r,o["b"].setCurrent(e),void(s=!1)})),s&&(e.index=-1,o["b"].setCurrent(e))}}}},s=n("8fa9");n("baa5"),n("ac1f"),n("1276");function c(t,e){for(var n=e.lastIndexOf("?"),i=e.substring(n+1,e.length),o=i.split("&"),a=0;a<o.length;a++){var r=o[a].split("=");if(r[0]==t)return r[1]}return!1}var d=n("6b43");i["a"],s["a"],d["a"]},f5d7:function(t,e,n){"use strict";var i=n("14bd"),o=n.n(i);o.a}});