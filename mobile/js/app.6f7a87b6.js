(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],u=0,h=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function r(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c4237":"d0f3d6ca"}[t]+".js"}function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=o[t]=[e,i]}));e.push(n[2]=i);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=r(t);var c=new Error;a=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=o[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}o[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/mobile/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"06ad":function(t,e,n){"use strict";var i=n("a448"),o=n.n(i);o.a},1927:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("513d"),n("375c");var i=n("785d"),o=n.n(i),a=(n("cc57"),n("e44b"),n("6648"),n("5f54"),n("f0e6"),n("ca6e")),r=n.n(a),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("VxDesignLayout")],1)},l=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"design-app"}},[n("VxMenu"),n("div",{staticClass:"design-main"},[n("vx-canvas",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]}),n("VxLoading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{msg:"正在加载模板，请稍后"}})],1),n("div",{staticClass:"design-config"})],1)},u=[],d=(n("6d57"),n("c904"),n("ed63"),n("8cf2"),n("fd4b")),h=(n("63ff"),n("e5af")),g=(n("e10e"),{});function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e="";switch(t){case"default":e="#35495E";break;case"primary":e="#3488ff";break;case"success":e="#43B883";break;case"warning":e="#e6a23c";break;case"danger":e="#f56c6c";break;default:break}return e}g.capsule=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary";console.log("%c ".concat(t," %c ").concat(e," %c"),"background:#35495E; padding: 1px; border-radius: 3px 0 0 3px; color: #fff;","background:".concat(f(n),"; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff;"),"background:transparent")},g.colorful=function(t){var e;(e=console).log.apply(e,["%c".concat(t.map((function(t){return t.text||""})).join("%c"))].concat(Object(d["a"])(t.map((function(t){return"color: ".concat(f(t.type),";")})))))},g.default=function(t){g.colorful([{text:t}])},g.primary=function(t){g.colorful([{text:t,type:"primary"}])},g.success=function(t){g.colorful([{text:t,type:"success"}])},g.warning=function(t){g.colorful([{text:t,type:"warning"}])},g.danger=function(t){g.colorful([{text:t,type:"danger"}])},g.init=function(){var t="海报设计";g.colorful([{text:t,type:"success"}])},g.init();var m=g;function p(t){sessionStorage.setItem("poster",JSON.stringify(t))}function v(){try{return JSON.parse(sessionStorage.getItem("poster"))}catch(t){return null}}var w=n("8041"),y=n.n(w),b=window.Undo=function(t){return new y.a({maxLength:50,provider:function(e){e(JSON.stringify(t))}})},x=v(),z=0,k=window.state=r.a.observable({global:{dpi:72,unit:"px",zoom:.25,showWatermark:!1},goodsId:null,id:null,layout:{width:1242,height:2208,title:"新的设计",elements:[],backgroundColor:"#ffffff",backgroundImage:null,backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},backgroundRepeat:"no-repeat",backgroundSize:null},undoable:!1,redoable:!1,guider:{},current:{id:-1,type:"canvas",edit:!1},context:{clipBoard:null},backgroundInfo:{changed:!1,backgroundColor:"#ffffff",backgroundImage:null,backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},backgroundRepeat:"no-repeat",backgroundSize:null},cutInfo:{cutable:!1,zoom:100,toolbarPos:{top:0,left:0},widget:{id:-1,top:0,left:0,width:0,height:0}},mulSelected:!1,selectedItem:[],userInfo:{isLogin:!1}});x&&Object.keys(k).forEach((function(t){void 0!==x[t]&&(k[t]=x[t])}));var S=window.historys=b(k);function I(t){var e=k.layout.elements[t],n=e.top,i=e.left,o=e.top+e.height,a=e.left+e.width,r=[],s=[];return k.layout.elements.forEach((function(e,l){if(t!==l){var c=e.top,u=e.left+e.width,d=e.top+e.height,h=e.left;u<i||h>a||d<n||c>o||(l<t?s.push(l):r.push(l))}})),{up:r,down:s}}S.initialize(JSON.stringify(k));var _=window.getter={zoom:function(){return k.global.zoom},save:function(){return{global:k.global,layout:k.layout}},global:function(){return k.global},layout:function(){return k.layout},id:function(){return k.id},goodsId:function(){return k.goodsId},template:function(){return{detail:JSON.stringify({global:k.global,layout:k.layout}),name:k.layout.title}},title:function(){return k.layout.title||""},canvasW:function(){return k.layout.width},canvasH:function(){return k.layout.height},undoStatus:function(){return k.undoable},redoStatus:function(){return k.redoable},guider:function(){return k.guider},current:function(){return k.current},bgIsInit:function(){return k.backgroundInfo.changed},cutImage:function(){return k.cutInfo.widget},cutable:function(){return k.cutInfo.cutable},cutZoom:function(){return k.cutInfo.zoom},toolbarPos:function(){return{top:k.cutInfo.toolbarPos.top*k.global.zoom,left:k.cutInfo.toolbarPos.left*k.global.zoom}},mulSelected:function(){return k.mulSelected},selectedItem:function(){return k.selectedItem},isGroupable:function(){return k.selectedItem.length>0},isSplitable:function(){return k.current.id>-1&&"group"===k.layout.elements[k.current.id].type},isLogin:function(){return k.userInfo.isLogin}},C=window.mitation={resetCutZoom:function(){k.cutInfo.zoom=100},updateCurrentEdit:function(t){k.current.edit=t},updateContent:function(t,e){k.layout.elements[t].content=e},changeSize:function(t,e,n){-1!=t&&(k.layout.elements[t].width=e,k.layout.elements[t].height=n)},resetCurrent:function(){k.current.id=-1,k.current.type="canvas"},setLoginState:function(t){k.userInfo.isLogin=t},setZoom:function(t){k.global.zoom=t},setId:function(t){k.id=t},setTemplate:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return k.goodsId=n,k.global=e.global,k.global.dpi=e.global.dpi||72,k.layout=e.hasOwnProperty("layouts")?e.layouts[0]:e.layout,this.initBgInfo(),t.next=7,p({global:k.global,layout:k.layout,current:k.current,backgroundInfo:k.backgroundInfo,goodsId:k.goodsId,id:k.id});case 7:S.initialize(JSON.stringify(k));case 8:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),setCanvasW:function(t){k.layout.width=t},setCanvasH:function(t){k.layout.height=t},setCanvasSize:function(t,e){k.layout.width=t,k.layout.height=e},setTitle:function(t){k.layout.title=t||""},updateTransformPosition:function(t,e){k.layout.elements[t].top=e.top/k.global.zoom,k.layout.elements[t].left=e.left/k.global.zoom},_updateTransformSize:function(t,e){k.layout.elements[t].width=e.width/k.global.zoom,k.layout.elements[t].height=e.height/k.global.zoom,e.left&&(k.layout.elements[t].left=e.left/k.global.zoom),e.top&&(k.layout.elements[t].top=e.top/k.global.zoom)},updateTransformRotate:function(t,e){k.layout.elements[t].transform=e},updateWidgetSize:function(t,e,n){"transform"===e&&this._updateTransformSize(t,n)},setHistoryState:function(){k.redoable=S.canRedo(),k.undoable=S.canUndo(),p({global:k.global,layout:k.layout,current:k.current,backgroundInfo:k.backgroundInfo,goodsId:k.goodsId,id:k.id})},setLogger:function(){m.primary(">>>>>>>logger>>>>>>>>>"),S.save(),this.setHistoryState()},setUndo:function(){var t=this;S.undo((function(e){var n=JSON.parse(e);k.layout=n.layout,k.global=n.global,k.current=n.current,t.setHistoryState()}))},setRedo:function(){var t=this;S.redo((function(e){var n=JSON.parse(e);k.layout=n.layout,k.global=n.global,k.current=n.current,t.setHistoryState()}))},setGuider:function(t){k.guider=t},moveTop:function(t){var e,n=k.layout.elements.splice(t,1),i=k.layout.elements.length;(e=k.layout.elements).push.apply(e,Object(d["a"])(n)),k.current.id=i,k.current.over=I(i),this.setLogger()},moveBottom:function(t){var e=k.layout.elements.splice(t,1);k.layout.elements=[].concat(Object(d["a"])(e),Object(d["a"])(k.layout.elements)),k.current.id=0,k.current.over=I(0),this.setLogger()},moveUp:function(t,e){var n=e,i=k.layout.elements[t],o=k.layout.elements.length-1;k.layout.elements.splice(t,1),e===o?k.layout.elements.push(i):k.layout.elements.splice(e,0,i),k.current.id=n,k.current.over=I(n),this.setLogger()},moveDown:function(t,e){var n=e,i=k.layout.elements[t];k.layout.elements.splice(t,1),e<1?k.layout.elements.unshift(i):k.layout.elements.splice(e,0,i),k.current.id=n,k.current.over=I(n),this.setLogger()},lockWidget:function(t){k.layout.elements[t].lock=!k.layout.elements[t].lock},addText:function(t){k.layout.elements.push(t),this.setLogger()},addImage:function(t){k.layout.elements.push(t),this.setLogger()},updateImg:function(t,e,n){-1===t?k.layout.elements[e].url=n:k.layout.elements[t].elements.url=n},setCurrent:function(t){k.current=t},copyEvent:function(){var t=k.current.id;t<0||(k.context.clipBoard=JSON.stringify(k.layout.elements[t]),z=0)},cutEvent:function(){var t=k.current.id;t<0||(k.context.clipBoard=JSON.stringify(k.layout.elements[t]),z=0,k.layout.elements.splice(t,1))},pasteEvent:function(){if(k.context.clipBoard){var t=JSON.parse(k.context.clipBoard);z++,t.top+=20*z,t.left+=20*z,k.layout.elements.push(t);var e=k.layout.elements.length-1;k.current={id:e,type:"widget",over:I(e)}}},initBgInfo:function(){k.layout.backgroundColor&&(k.backgroundInfo.backgroundColor=k.layout.backgroundColor),k.layout.backgroundImage&&(k.backgroundInfo.backgroundImage=k.layout.backgroundImage),k.layout.backgroundImageInfo&&(k.backgroundInfo.backgroundImageInfo=Object.assign({},k.layout.backgroundImageInfo)),k.layout.backgroundRepeat&&(k.backgroundInfo.backgroundRepeat=k.layout.backgroundRepeat),k.layout.backgroundSize&&(k.backgroundInfo.backgroundSize=k.layout.backgroundSize),k.backgroundInfo.changed=!1},resetBgInfo:function(){k.layout.backgroundColor=k.backgroundInfo.backgroundColor,k.layout.backgroundImage=k.backgroundInfo.backgroundImage,k.layout.backgroundImageInfo=Object.assign({},k.backgroundInfo.backgroundImageInfo),k.layout.backgroundRepeat=k.backgroundInfo.backgroundRepeat,k.layout.backgroundSize=k.backgroundInfo.backgroundSize,k.backgroundInfo.changed=!1},setBgColor:function(t){k.layout.backgroundColor=t,k.backgroundInfo.changed=!0},setBgImg:function(t){var e=JSON.parse(t);k.layout=Object.assign({},k.layout,e.layout||{}),k.backgroundInfo.changed=!0},setbackgroundImage:function(t){k.layout.backgroundImage=t},initImgCut:function(){if(k.current.id<0)k.cutInfo.widget={top:0,left:0,right:0,bottom:0};else{var t=k.layout.elements[k.current.id];if(t&&["image","mask"].includes(t.type)){var e=t.clip||{};k.cutInfo.widget={top:e.top||0,left:e.left||0,l:t.left,t:t.top,height:t.originHeight||t.height,width:t.originWidth||t.width,w:t.width,h:t.height,url:t.url,id:k.current.id}}else k.cutInfo.widget=null}},setWidgetCutImageInfo:function(){var t=k.cutInfo.widget;t.id>=0?k.layout.elements[t.id].clip=Object.assign({},k.layout.elements[t.id].clip||{},{top:t.top,left:t.left,width:t.height*k.cutInfo.zoom/100,height:t.width*k.cutInfo.zoom/100}):k.layout.backgroundImageInfo=Object.assign({},k.layout.backgroundImageInfo||{},{top:t.top,left:t.left,width:t.height*k.cutInfo.zoom/100,height:t.width*k.cutInfo.zoom/100})},setCutable:function(t){k.cutInfo.cutable=t,t&&this.initImgCut()},setCutBackgroundAble:function(t){k.cutInfo.cutable=t,t&&this.initBackgroundCut()},initBackgroundCut:function(){var t=k.layout;k.cutInfo.originHeight||(k.cutInfo.originHeight=t.backgroundImageInfo.height,k.cutInfo.originWidth=t.backgroundImageInfo.width),k.cutInfo.widget={top:t.backgroundImageInfo.top||0,left:t.backgroundImageInfo.left||0,l:0,t:0,height:k.cutInfo.originWidth||t.backgroundImageInfo.height,width:k.cutInfo.originWidth||t.backgroundImageInfo.width,w:t.width,h:t.height,url:t.backgroundImage}},setCutOk:function(){this.setCutable(!1),this.setWidgetCutImageInfo()},setCutCancel:function(){this.setCutable(!1)},setCutZoom:function(t){k.cutInfo.zoom=t},setCutToolbar:function(t){k.cutInfo.toolbarPos=t},setCutImageInfo:function(t){k.cutInfo.widget=Object.assign({},k.cutInfo.widget,t)},restoreBgTransform:function(){if(!k.layout.backgroundImageInfo.transform){var t={transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}};k.layout.backgroundImageInfo=Object.assign({},k.layout.backgroundImageInfo,t)}},rotateBgY:function(){this.restoreBgTransform(),k.layout.backgroundImageInfo.transform.a=-k.layout.backgroundImageInfo.transform.a,k.layout.backgroundImageInfo.transform.b=-k.layout.backgroundImageInfo.transform.b},rotateBgX:function(){this.restoreBgTransform(),k.layout.backgroundImageInfo.transform.c=-k.layout.backgroundImageInfo.transform.c,k.layout.backgroundImageInfo.transform.d=-k.layout.backgroundImageInfo.transform.d},setMulSelected:function(t){k.mulSelected=t},setSelectedItem:function(t){k.selectedItem=t},setGroup:function(){this.setLogger();var t=[],e=[],n=[],i=[],o=[];k.selectedItem.forEach((function(a){var r=Object.assign({},k.layout.elements[a]);"group"===r.type?(r.elements.forEach((function(t){t.left+=r.left,t.top+=r.top})),t.push.apply(t,Object(d["a"])(r))):t.push(Object.assign({},r));var s=r.top,l=r.left,c=r.width,u=r.height;e.push(s),n.push(l),i.push(l+c),o.push(s+u)}));var a=e.sort((function(t,e){return t-e}))[0],r=n.sort((function(t,e){return t-e}))[0],s=i.sort((function(t,e){return e-t}))[0]-r,l=o.sort((function(t,e){return e-t}))[0]-a,c={type:"group",category:"",opacity:1,padding:[0,0,0,0],width:s,height:l,left:r,top:a,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},boxShadow:null,resize:1,dragable:!0,rotatable:!0,editable:!0,frozen:!1,hidden:!1,lock:!1,borderRadius:0,filter:{hueRotate:0,saturate:0,brightness:0,gaussianBlur:0},elements:t,autoGrow:!1,canCollapse:!0,letterSpacing:-50,lineHeight:1};c.elements.forEach((function(t){t.top-=c.top,t.left-=c.left}));var u=[];k.layout.elements.forEach((function(t,e){k.selectedItem.includes(e)||u.push(Object.assign({},t))})),k.layout.elements=u,k.layout.elements.push(c),k.selectedItem=[],k.current={id:k.layout.elements.length-1,type:"group"},this.setLogger()},setSplit:function(){var t;this.setLogger();var e=Object.assign({},k.layout.elements[k.current.id]);e.elements.forEach((function(t){t.left+=e.left,t.top+=e.top})),(t=k.layout.elements).splice.apply(t,[k.current.id,1].concat(Object(d["a"])(e.elements))),k.current={id:-1,type:"canvas"},this.setLogger()},setWaterMask:function(t){k.global.showWatermark=t},resetLayout:function(){k.layout.elements=[].concat(),k.layout.height=2208,k.layout.width=1242,k.layout.backgroundColor="#ffffffff",k.layout.backgroundImage=null,k.layout.backgroundImageInfo=Object.assign({}),this.restoreBgTransform()},changeImgUrl:function(t,e){k.layout.elements[e].url=t}},H=(function(){function t(t){return Math.floor(t)===t}function e(e){var n={times:1,num:0},i=e<0;if(t(e))return n.num=e,n;var o=e+"",a=o.indexOf("."),r=o.substr(a+1).length,s=Math.pow(10,r),l=parseInt(Math.abs(e)*s+.5,10);return n.times=s,i&&(l=-l),n.num=l,n}function n(t,n,i){var o=e(t),a=e(n),r=o.num,s=a.num,l=o.times,c=a.times,u=l>c?l:c,d=null;switch(i){case"add":return d=l===c?r+s:l>c?r+s*(l/c):r*(c/l)+s,d/u;case"subtract":return d=l===c?r-s:l>c?r-s*(l/c):r*(c/l)-s,d/u;case"multiply":return d=r*s/(l*c),d;case"divide":return d=r/s*(c/l),d}}function i(t,e){var n=Math.pow(10,e),i=t*n+.5;return i=parseInt(i,10)/n,i+""}function o(t,e,o){return o?i(n(t,e,"add"),o):n(t,e,"add")}function a(t,e,o){return o?i(n(t,e,"subtract"),o):n(t,e,"subtract")}function r(t,e,o){return o?i(n(t,e,"multiply"),o):n(t,e,"multiply")}function s(t,e,o){return o?i(n(t,e,"divide"),o):n(t,e,"divide")}}(),10),E={methods:{updateZoom:function(t,e){var n=_.canvasH(),i=_.canvasW(),o=(e-140)/i,a=(t-140)/n;o>a?C.setZoom(a):C.setZoom(o)},adaptScreen:function(){var t=document.querySelector("#js-container"),e=t.clientHeight,n=t.clientWidth;this.updateZoom(e,n)},acutalSize:function(){C.setZoom(1)},overlap:function(t){var e=_.layout().elements[t],n=e.top,i=e.left,o=e.top+e.height,a=e.left+e.width,r=[],s=[];return _.layout().elements.forEach((function(e,l){if(t!==l){var c=e.top,u=e.left+e.width,d=e.top+e.height,h=e.left;u<i||h>a||d<n||c>o||(l<t?s.push(l):r.push(l))}})),{up:r,down:s}},guider:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!(e<0)){var n=_.layout().width,i=_.layout().height,o=_.layout().elements[e],a=o.top,r=o.left,s=o.top+o.height,l=o.left+o.width,c=n/2,u=i/2,d=r+o.width/2,h=a+o.height/2,g={};Math.abs(a)<H&&(g["T"]={t:0,l:r,r:0}),Math.abs(r)<H&&(g["L"]={t:a,l:0,b:0}),Math.abs(s-i)<H&&(g["B"]={b:0,l:r,r:0}),Math.abs(l-n)<H&&(g["R"]={r:0,t:a,b:0}),Math.abs(h-u)<H&&(g["cx"]={t:u,type:"canvas"}),Math.abs(d-c)<H&&(g["cy"]={l:c,type:"canvas"}),_.layout().elements.forEach((function(o,c){if(e!==c){var u=o.top,f=o.left+o.width,m=o.top+o.height,p=o.left,v=p+o.width/2,w=u+o.height/2;f<r||p>l||m<a||u>s||(g=Object.assign({},g,t.elementGuider({t:a,l:r,b:s,r:l,cx:d,cy:h},{t:u,l:p,b:m,r:f,cx:v,cy:w},n,i)))}})),C.setGuider(g)}},elementGuider:function(t,e,n,i){var o=t.t-e.t,a=t.l-e.l,r=t.b-e.b,s=t.r-e.r,l=t.cx-e.cx,c=t.cy-e.cy,u={};return Math.abs(o)<H&&(u["T"]={t:e.t,l:0,r:0}),Math.abs(a)<H&&(u["L"]={t:0,l:e.l,b:0}),Math.abs(r)<H&&(u["B"]={b:i-Math.abs(e.b),l:0,r:0}),Math.abs(s)<H&&(u["R"]={t:0,r:n-Math.abs(e.r),b:0}),Math.abs(c)<H&&(u["cx"]={t:e.cy}),Math.abs(l)<H&&(u["cy"]={l:e.cx}),u},selected:function(t){var e=_.current();if(void 0!==e.parent&&-1!==e.parent){var n=t.offsetX,i=t.offsetY,o=_.zoom(),a=_.layout().elements[e.id].elements,r=!0;a.forEach((function(t,a){var s=t.left*o,l=t.top*o,c=s+t.width*o,u=l+t.height*o;if(n>s&&n<c&&i>l&&i<u)return e.index=a,C.setCurrent(e),void(r=!1)})),r&&(e.index=-1,C.setCurrent(e))}}}},L="/storage/",O="/goods/",W="/production/",N="/auth/",T="/resource/",P="".concat(L,"upload"),M="".concat(O,"detail"),j="".concat(W,"save"),$="".concat(O,"list"),R="".concat(T,"list"),A="".concat(T,"detail"),B="".concat(N,"login"),D={UPLOAD_API:P,TEMPLATE_API:M,SAVE_API:j,SEARCH_API:$,EFFECTS_API:R,PHONR_LOGIN_API:B,EFFECT_DETAIL_API:A},X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("div",{ref:"container",staticClass:"design-container",attrs:{id:"js-container"},on:{contextmenu:function(e){return e.stopPropagation(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.pointerRightDown(e)},click:function(e){return e.target!==e.currentTarget?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.selectCanvasHandler(e)}}},[n("div",{staticClass:"design-canvas",style:t.canvasStyles},[n("div",{staticClass:"editor-shell",style:t.canvasStyles},[n("div",{ref:"canvas",staticClass:"editor-canvas"},[n("div",{staticClass:"editor-layout",on:{mouseout:t.clearHoverHandler}},[n("vx-Editor-bg",{attrs:{zoom:t.global.zoom},on:{select:t.selectBgHandler}}),n("vx-water-mark"),t._l(t.layout.elements,(function(e,i){return["text"===e.type?n("vx-editor-text",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(i)},attrs:{index:i,zoom:t.global.zoom,editor:-1===t.editorParent&&t.editor===i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}):t._e(),"threeText"===e.type?n("vx-editor-three-text",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(i)},attrs:{index:i,zoom:t.global.zoom,editor:-1===t.editorParent&&t.editor===i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}):t._e(),["image","mask"].includes(e.type)?n("vx-editor-image",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(i)},attrs:{zoom:t.global.zoom,index:i,cutable:t.cutable&&t.selectWidget.id===i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e(),["svg"].includes(e.type)?n("vx-editor-svg",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(i)},attrs:{zoom:t.global.zoom,index:i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e(),"group"===e.type?n("vx-editor-group",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(i)},attrs:{zoom:t.global.zoom,index:i,editor:t.editorParent+"-"+t.editor,selected:t.transformStyle,cutable:t.cutable,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e()]}))],2)]),n("div",{staticClass:"editor-hover",class:["hover-"+t.type,{"hover-lock":t.lock}],style:t.hoverStyle}),n("vx-transform",{attrs:{selectedItem:t.selectedItem},on:{"group-select":t.groupSelectHandler,editor:t.editorHandler}}),n("vx-editor-guider"),n("vx-image-cut"),n("vx-toolbar")],1)]),n("vx-selector")],1)])},Z=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-background",style:t.backStyle,on:{click:function(e){return e.stopPropagation(),t.selectHandler(e)}}},[n("div",{staticClass:"editor-background__main",style:t.mainStyle},[t.bgImg?n("img",{style:t.imgStyle,attrs:{src:t.bgImg}}):t._e()])])},G=[],F=(n("163d"),{name:"vx-editor-bg",props:{zoom:{type:Number}},computed:{w:function(){return _.layout().width*_.global().zoom},h:function(){return _.layout().height*_.global().zoom},widget:function(){return _.cutImage()},cutZoom:function(){return _.cutZoom()/100},layoutZoom:function(){return _.zoom()},bgColor:function(){return _.layout().backgroundColor},bgImg:function(){return _.layout().backgroundImage},bgImgInfo:function(){return _.layout().backgroundImageInfo},bgSize:function(){return _.layout().backgroundSize},bgPosition:function(){return _.layout().backgroundPosition},mainStyle:function(){var t={};return this.bgImgInfo&&(t.left="".concat(this.bgImgInfo.left,"px"),t.top="".concat(this.bgImgInfo.top,"px"),t.width="".concat(this.bgImgInfo.width*this.cutZoom*this.zoom,"px"),t.height="".concat(this.bgImgInfo.height*this.cutZoom*this.zoom,"px")),t},backStyle:function(){var t={};t.backgroundColor=this.bgColor;var e=this.bgImgInfo&&this.bgImgInfo.transform||{a:0,b:0,c:0,tx:0,ty:0};return t.transform="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.tx,",").concat(e.ty,")"),t},imgStyle:function(){var t={opacity:this.bgImgInfo.opacity};return t.width="".concat(this.bgImgInfo.width*this.zoom,"px"),t.height="".concat(this.bgImgInfo.height*this.zoom,"px"),t}},methods:{selectHandler:function(){this.$emit("select")}}}),J=F,Y=n("5511"),U=Object(Y["a"])(J,V,G,!1,null,null,null),q=U.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-text",class:{"editor-element-editing":t.editor},style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.transfromHandler(e)},mouseover:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.hoverHandler(e)}}},[n("div",{staticClass:"element-inner",style:t.innerStyle},[n("div",{staticClass:"element-inner-content",style:t.contentStyle},[n("div",{ref:"edit",staticClass:"element-main",style:t.mainStyles,attrs:{contenteditable:t.editor},on:{mousemove:function(t){t.stopPropagation()},input:t.changeHandler}},[n("pre",{directives:[{name:"show",rawName:"v-show",value:!t.editor,expression:"!editor"}],style:t.textStyles,attrs:{id:"content"},domProps:{innerHTML:t._s(t.data.content)}})])])])])},Q=[],tt=(n("51f1"),{name:"vx-editor-text",props:{data:{},value:String,zoom:{type:Number,default:0},index:Number,editor:Boolean,parent:{type:Number,default:-1}},computed:{layoutZoom:function(){return getter.zoom()},elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:this.data.hidden?"hidden":"visible",transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px",opacity:this.data.opacity,"z-index":"".concat(this.index)}},innerStyle:function(){return{textAlign:this.data.textAlign,lineHeight:this.data.lineHeight,width:this.data.width+"px",height:this.data.height+"px",transform:"scale(".concat(this.zoom,")")}},contentStyle:function(){return{writingMode:this.data.writingMode,height:this.data.height+"px"}},mainStyles:function(){var t={color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",letterSpacing:this.data.letterSpacing+"px",verticalAlign:this.data.verticalAlign,width:"100%",height:"auto",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration};if(this.data.textEffects&&this.data.textEffects.length>0){var e=this.data.textEffects,n=null,i=null,o=null,a=null,r=null,s=null,l=null;e.forEach((function(t){if(t=e[0],t.filling.enable){if(0===t.filling.type&&(o="".concat(t.filling.color)),1===t.filling.type){var c=t.filling.imageContent;o="transparent",a="url(".concat(c.image,")"),r="".concat(c.width*c.scaleX,"px ").concat(c.height*c.scaleY,"px"),s=1===c.repeat?"repeat":null,l="text"}if(2===t.filling.type){var u=t.filling.gradient;o="transparent";var d=["".concat(u.angle+90,"deg")];u.stops.forEach((function(t){d.push("".concat(t.color," ").concat(100*t.offset,"%"))})),a="linear-gradient(".concat(d.join(","),")")}}else o=null,a=null,r=null,s=null,l=null;n=t.shadow.enable?"".concat(t.shadow.color," ").concat(t.shadow.offsetX,"px ").concat(t.shadow.offsetY,"px ").concat(t.shadow.blur,"px"):null,i=t.stroke.enable?"".concat(t.stroke.width,"px ").concat(t.stroke.color):null})),n&&(t["textShadow"]=n),i&&(t["-webkit-text-stroke"]=i),o&&(t["-webkit-text-fill-color"]=o),r&&(t["backgroundSize"]=r),a&&(t["backgroundImage"]=a),s&&(t["backgroundRepeat"]=s),l&&(t["backgroundClip"]=l)}return t},textStyles:function(){return{color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",minHeight:this.data.height+"px",height:this.data.height+"px",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration}}},methods:{changeHandler:function(){var t=this.$refs.edit;C.updateCurrentEdit(!0),C.changeSize(this.index,t.offsetWidth,t.offsetHeight)},hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",parent:this.parent,edit:this.editor}),C.updateCurrentEdit(this.editor)}},watch:{editor:function(t){if(t){C.updateCurrentEdit(!0);var e=this.$refs.edit;this.$nextTick((function(){if(e.focus(),document.selection){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var n=document.createRange();n.selectNodeContents(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(n)}})),e.innerText=this.data.content}else{var n=this.$refs.edit;this.data.content=n.innerText,this.$emit("input",n.innerText)}}}}),et=tt,nt=(n("06ad"),Object(Y["a"])(et,K,Q,!1,null,"05d46bd9",null)),it=nt.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-three-text",class:{"editor-element-editing":t.editor},style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.transfromHandler(e)},mouseover:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.hoverHandler(e)}}},[n("div",{staticClass:"element-main"},[n("div",{staticClass:"three-text",style:t.mainStyles,on:{mousemove:function(t){t.stopPropagation()}}},[t.editor?n("div",{ref:"edit",style:t.textStyles,attrs:{contenteditable:t.editor}}):n("canvas",{style:t.textStyles})])]),n("i",{staticClass:"border-before"})])},at=[],rt={name:"vx-editor-three-text",props:{data:{},value:String,zoom:{type:Number,default:0},index:Number,editor:Boolean,parent:{type:Number,default:-1}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:this.data.hidden?"hidden":"visible",transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px",opacity:this.data.opacity}},mainStyles:function(){var t={color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",letterSpacing:this.data.letterSpacing+"px",verticalAlign:this.data.verticalAlign,width:"100%",height:"auto",minHeight:this.data.height*this.zoom+"px"};if(this.data.textEffects&&this.data.textEffects.length>0){var e=this.data.textEffects,n=null,i=null,o=null,a=null,r=null,s=null,l=null;e.forEach((function(t){if(t.filling.enable){if(0===t.filling.type&&(o="".concat(t.filling.color)),1===t.filling.type){var e=t.filling.imageContent;o="transparent",a="url(".concat(e.image,")"),r="".concat(e.width*e.scaleX,"px ").concat(e.height*e.scaleY,"px"),s=1===e.repeat?"repeat":null,l="text"}if(2===t.filling.type){var c=t.filling.gradient;o="transparent";var u=["".concat(c.angle+90,"deg")];c.forEach((function(t){u.push("".concat(t.color," ").concat(100*t.offset,"%"))})),a="linear-gradient(".concat(u.join(","),")")}}else o=null,a=null,r=null,s=null,l=null;n=t.shadow.enable?"".concat(t.shadow.color," ").concat(t.shadow.offsetX,"px ").concat(t.shadow.offsetY,"px ").concat(t.shadow.blur,"px"):null,i=t.stroke.enable?"".concat(t.stroke.width,"px ").concat(t.stroke.color):null})),n&&(t["textShadow"]=n),i&&(t["-webkit-text-stroke"]=i),o&&(t["-webkit-text-fill-color"]=o),r&&(t["backgroundSize"]=r),a&&(t["backgroundImage"]=a),s&&(t["backgroundRepeat"]=s),l&&(t["backgroundClip"]=l)}return t},textStyles:function(){return{color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration}}},methods:{hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",parent:this.parent})}},watch:{editor:function(t){if(!t){var e=this.$refs.edit;this.$emit("input",e.innerText)}}}},st=rt,lt=Object(Y["a"])(st,ot,at,!1,null,null,null),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-image",style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.transfromHandler(e)},mouseover:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.hoverHandler(e)}}},[n("div",{staticClass:"element-main",style:t.mainStyles},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.cutable,expression:"!cutable"}],style:t.imageStyles,attrs:{draggable:"false",src:t.data.url}})]),n("i",{staticClass:"border-before"})])},dt=[],ht={name:"vx-editor-image",props:{data:{},zoom:{type:Number,default:0},index:Number,parent:{type:Number,default:-1},cutable:{type:Boolean,default:!1}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px","z-index":"".concat(this.index)}},mainStyles:function(){return{borderRadius:this.data.borderRadius,overflow:this.data.hidden?"hidden":"visible",opacity:this.data.opacity,padding:this.data.padding.join("px ")}},imageStyles:function(){var t=this.data.clip||{},e={position:"absolute",top:(t.top||0)+"px",left:(t.left||0)+"px",width:(t.width||this.data.width)*this.zoom+"px",height:(t.height||this.data.height)*this.zoom+"px"};return e}},methods:{hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",editable:!1,parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",editable:!1,parent:this.parent})}}},gt=ht,ft=Object(Y["a"])(gt,ut,dt,!1,null,null,null),mt=ft.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-group",style:t.elementStyles},[t._l(t.data.elements,(function(e,i){return["text"===e.type?n("vx-group-text",{key:e.id,class:{"editor-element-selected":t.itemSelected===t.index+"-"+i},attrs:{index:i,parent:t.index,zoom:t.zoom,editor:t.editor===t.index+"-"+i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}):t._e(),"threeText"===e.type?n("vx-group-three-text",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{index:i,zoom:t.zoom,editor:t.editor===t.index+"-"+i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}):t._e(),["image","mask"].includes(e.type)?n("vx-group-image",{key:e.id,class:{"editor-element-selected":t.itemSelected===t.index+"-"+i},attrs:{zoom:t.zoom,index:i,parent:t.index,cutable:t.cutable&&t.selected.index===i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e(),["svg"].includes(e.type)?n("vx-group-svg",{directives:[{name:"show",rawName:"v-show",value:"print"!==t.type,expression:"type !== 'print'"}],key:e.id,ref:"groupsvg",refInFor:!0,class:{"editor-element-selected":t.itemSelected===t.index+"-"+i},attrs:{zoom:t.zoom,index:i,parent:t.index,cutable:t.cutable&&t.selected.index===i,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e()]})),n("i",{staticClass:"border-before"})],2)},vt=[],wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-svg",style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.transfromHandler(e)},mouseover:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.hoverHandler(e)}}},[n("div",{staticClass:"element-main",domProps:{innerHTML:t._s(t.html)}}),n("i",{staticClass:"border-before"})])},yt=[],bt=(n("f548"),{name:"vx-editor-svg",props:{data:{},zoom:{type:Number,default:0},index:Number,parent:{type:Number,default:-1},cutable:{type:Boolean,default:!1}},data:function(){return{svg:""}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px","z-index":"".concat(this.index)}},mainStyles:function(){return{borderRadius:this.data.borderRadius,overflow:this.data.hidden?"hidden":"visible",opacity:this.data.opacity,padding:this.data.padding.join("px ")}},imageStyles:function(){var t=this.data.clip||{};return{position:"absolute",top:(t.top||0)+"px",left:(t.left||0)+"px",width:(t.width||this.data.width)*this.zoom+"px",height:(t.height||this.data.height)*this.zoom+"px"}},html:function(){var t=this.svg;return this.data.colors.length>=0&&this.data.colors.forEach((function(e,n){t=t.replace("{{colors[".concat(n,"]}}"),e)})),t}},mounted:function(){this.getSvgHandler(this.data.url)},methods:{hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",editable:!1,parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",editable:!1,parent:this.parent})},getSvgHandler:function(t){var e=this;this.$axios.get(t,{}).then((function(t){e.svg=t})).catch((function(t){m.danger(t)}))}}}),xt=bt,zt=Object(Y["a"])(xt,wt,yt,!1,null,null,null),kt=zt.exports,St={name:"vx-editor-group",props:{data:{},zoom:{type:Number,default:0},index:Number,editor:String,selected:{},cutable:{type:Boolean,default:!1},type:{type:String,default:""}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:(this.data.width*this.zoom||0)+"px",height:(this.data.height*this.zoom||0)+"px",top:(this.data.top*this.zoom||0)+"px",left:(this.data.left*this.zoom||0)+"px"}},itemSelected:function(){var t=_.current();if(-1!==t.id)return"".concat(t.id,"-").concat(t.index)}},components:{VxGroupText:it,VxGroupThreeText:ct,VxGroupImage:mt,VxGroupSvg:kt},methods:{selectWidgetHandler:function(t){this.$emit("event",t)}}},It=St,_t=Object(Y["a"])(It,pt,vt,!1,null,null,null),Ct=_t.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showWatermark?t._e():n("div",{staticClass:"editor-watermark",style:t.styles},[n("img",{ref:"image",attrs:{src:t.url}})])},Et=[],Lt={name:"vx-water-mark",data:function(){return{url:n("ac50")}},computed:{showWatermark:function(){return _.global().showWatermark},zoom:function(){return _.global().zoom},w:function(){return _.layout().width},h:function(){return _.layout().height},styles:function(){var t=0;return t=this.w>=this.h?this.h/this.w/3:this.w/this.h/3,{width:"".concat(642*t,"px"),right:"".concat(10,"px"),height:"auto",bottom:"".concat(0,"px"),"z-index":"3000"}}}},Ot=Lt,Wt=Object(Y["a"])(Ot,Ht,Et,!1,null,null,null),Nt=Wt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-transform-wrap"},[n("div",{ref:"transform",staticClass:"editor-transform",class:{"editor-custorm":t.editor,"editor-min-w":t.widget.width*t.zoom<42,"editor-min-h":t.widget.height*t.zoom<42,"editor-lock":t.lock,"editor-transform-editing":t.cutable,"editor-transform-multiple":t.multiple},style:t.styles,on:{dblclick:function(e){return e.target!==e.currentTarget?null:t.editorHandler(e)},mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.mousedownHandler(e))}}},[t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeN,expression:"(!isMouseDown || resizeN)"}],staticClass:"editor-grip editor-grip-n",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeN_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeE,expression:"!isMouseDown || resizeE"}],staticClass:"editor-grip editor-grip-e",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeE_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeS,expression:"(!isMouseDown || resizeS)"}],staticClass:"editor-grip editor-grip-s",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeS_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeW,expression:"!isMouseDown || resizeW"}],staticClass:"editor-grip editor-grip-w",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeW_down_Handler(e))}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeNW,expression:"!isMouseDown || resizeNW"}],staticClass:"editor-grip editor-grip-nw",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeNW_down_Handler(e))}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeNE,expression:"!isMouseDown || resizeNE"}],staticClass:"editor-grip editor-grip-ne",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeNE_down_Handler(e))}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeSE,expression:"!isMouseDown || resizeSE"}],staticClass:"editor-grip editor-grip-se",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeSE_down_Handler(e))}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeSW,expression:"!isMouseDown || resizeSW"}],staticClass:"editor-grip editor-grip-sw",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeSW_down_Handler(e))}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.rotating,expression:"!isMouseDown || rotating"}],staticClass:"editor-rotator",style:{transform:"matrix("+t.transform.join(", ")+")"},on:{mousedown:function(e){return e.stopPropagation(),t.rotate_down_Handler(e)}}},[n("b",{ref:"rotate"},[n("svg",{staticClass:"vx",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#vx-rotate"}})]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.degShow,expression:"degShow"}],staticClass:"deg"},[t._v(t._s(t.rotate)+"°")])])]),t.lock?n("i",{staticClass:"editor-grip-lock"},[n("b",[n("svg",{staticClass:"vx",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#vx-lock"}})])])]):t._e()])])},Pt=[],Mt=29,jt=36,$t={name:"vx-transform",mixins:[E],props:{selectedItem:{type:Array}},data:function(){return{logger:!1,dragging:!1,rotating:!1,degShow:!0,resizeN:!1,resizeS:!1,resizeE:!1,resizeW:!1,resizeSE:!1,resizeSW:!1,resizeNE:!1,resizeNW:!1,t:0,l:0,st:0,el:0,wl:0,width:0,left:0,top:0,height:0,sel:0,nel:0,nwl:0,swl:0,cx:0,cy:0,rotate:0,transform:[],editor:!1,isMouseDown:!1,isSelected:!1}},mounted:function(){var t=this;window.addEventListener("mouseup",(function(e){t.dragging=!1,t.rotating=!1,t.degShow=!1,t.resizeS=!1,t.resizeE=!1,t.resizeW=!1,t.resizeN=!1,t.resizeNE=!1,t.resizeSE=!1,t.resizeSW=!1,t.resizeNW=!1,t.logger&&(C.setLogger(),t.logger=!1),t.isMouseDown=!1,t.isSelected&&(t.selected(e),t.$emit("group-select"),t.isSelected=!1),window.removeEventListener("mousemove",t.mouseMoveHandler),window.removeEventListener("mousemove",t.resizeS_move_Handler),window.removeEventListener("mousemove",t.resizeE_move_Handler),window.removeEventListener("mousemove",t.resizeW_move_Handler),window.removeEventListener("mousemove",t.resizeN_move_Handler),window.removeEventListener("mousemove",t.resizeSE_move_Handler),window.removeEventListener("mousemove",t.resizeNE_move_Handler),window.removeEventListener("mousemove",t.resizeNW_move_Handler),window.removeEventListener("mousemove",t.resizeSW_move_Handler),window.removeEventListener("mousemove",t.rotate_move_Handler)}))},computed:{zoom:function(){return _.zoom()},layout:function(){return _.layout()},selectWidget:function(){return _.current()},type:function(){var t=this.selectWidget.id;return null==t||-1==t||"text"==this.layout.elements[t].type},widget:function(){var t=this.selectWidget.id;if(t<0)return{index:-1};var e=this.layout.elements[t];if(e){var n={w:e.width,h:e.height,l:e.left,t:e.top},i=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};return{transform:i,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1}}return null},styles:function(){return C.setCutToolbar({top:this.widget.top,left:this.widget.left}),this.widget.hasOwnProperty("transform")?{width:this.widget.width*this.zoom+"px",height:this.widget.height*this.zoom+"px",top:this.widget.top*this.zoom+"px",left:this.widget.left*this.zoom+"px",transform:"matrix(".concat(this.widget.transform.a,",").concat(this.widget.transform.b,",").concat(this.widget.transform.c,",").concat(this.widget.transform.d,",").concat(this.widget.transform.tx,",").concat(this.widget.transform.ty,")"),display:this.widget.display}:{width:this.widget.width*this.zoom+"px",height:this.widget.height*this.zoom+"px",top:this.widget.top*this.zoom+"px",left:this.widget.left*this.zoom+"px",display:this.widget.display}},lock:function(){return void 0!==this.widget.index&&-1!==this.widget.index&&_.layout().elements[this.widget.index].lock},cutable:function(){return!this.lock&&_.cutable()},multiple:function(){return"group"===this.widget.type||this.selectedItem.length>0}},methods:{_mousedownHandler:function(){this.logger=!0,this.isMouseDown=!0},mousedownHandler:function(t){this.lock||this.cutable||(this.dragging=!0,this.isSelected=!0,this.l=t.clientX-t.target.offsetLeft,this.t=t.clientY-t.target.offsetTop,window.addEventListener("mousemove",this.mouseMoveHandler))},mouseMoveHandler:function(t){this.dragging&&(this.isSelected=!1,this._mousedownHandler(),this.guider(this.widget.index),this.widget.left=(t.clientX-this.l)/this.zoom,this.widget.top=(t.clientY-this.t)/this.zoom,C.updateTransformPosition(this.widget.index,{left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}))},resizeS_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeS=!0,this.st=t.clientY-t.target.offsetTop,window.addEventListener("mousemove",this.resizeS_move_Handler))},resizeS_move_Handler:function(t){this.resizeS&&(this.widget.height=(t.clientY-this.st+jt)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}))},resizeE_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeE=!0,this.el=t.clientX-t.target.offsetLeft,window.addEventListener("mousemove",this.resizeE_move_Handler))},resizeE_move_Handler:function(t){this.resizeE&&(this.widget.width=(t.clientX-this.el+Mt)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}))},resizeW_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeW=!0,this.wl=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.left=this.widget.left,window.addEventListener("mousemove",this.resizeW_move_Handler))},resizeW_move_Handler:function(t){this.resizeW&&(this.widget.width=(this.width*this.zoom-(t.clientX-this.wl))/this.zoom,this.widget.left=(this.left*this.zoom+t.clientX-this.wl)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom}))},resizeN_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeN=!0,this.nt=t.clientY-t.target.offsetTop,this.height=this.widget.height,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeN_move_Handler))},resizeN_move_Handler:function(t){this.resizeN&&(this.widget.height=(this.height*this.zoom-(t.clientY-this.nt))/this.zoom,this.widget.top=(this.top*this.zoom+t.clientY-this.nt)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,top:this.widget.top*this.zoom}))},resizeSE_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeSE=!0,this.sel=t.clientX-t.target.offsetLeft,window.addEventListener("mousemove",this.resizeSE_move_Handler))},resizeSE_move_Handler:function(t){this.resizeSE&&(this.widget.height=(this.widget.height*this.zoom+t.clientX-this.sel+jt-this.widget.width*this.zoom)/this.zoom,this.widget.width=(t.clientX-this.sel+jt)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}))},resizeNE_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeNE=!0,this.nel=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeNE_move_Handler))},resizeNE_move_Handler:function(t){this.resizeNE&&(this.widget.width=(t.clientX-this.nel+Mt)/this.zoom,this.widget.height=(this.height*this.zoom+t.clientX-this.nel+Mt-this.width*this.zoom)/this.zoom,this.widget.top=(this.top*this.zoom-(t.clientX-this.nel+Mt-this.width*this.zoom))/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}))},resizeSW_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeSW=!0,this.swl=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeSW_move_Handler))},resizeSW_move_Handler:function(t){this.resizeSW&&(this.widget.width=(this.width*this.zoom-(t.clientX-this.swl))/this.zoom,this.widget.height=(this.height*this.zoom-(t.clientX-this.swl))/this.zoom,this.widget.left=(this.left*this.zoom+t.clientX-this.swl)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}))},resizeNW_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeNW=!0,this.nwl=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeNW_move_Handler))},resizeNW_move_Handler:function(t){this.resizeNW&&(this.widget.width=(this.width*this.zoom-(t.clientX-this.nwl))/this.zoom,this.widget.height=(this.height*this.zoom-(t.clientX-this.nwl))/this.zoom,this.widget.left=(this.left*this.zoom+t.clientX-this.nwl)/this.zoom,this.widget.top=(this.top*this.zoom+t.clientX-this.nwl)/this.zoom,C.updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}))},rotate_down_Handler:function(){if(!this.lock){this._mousedownHandler(),this.degShow=!0,this.rotating=!0;var t=this.$refs.transform.getBoundingClientRect(),e=t.top,n=t.left,i=t.width,o=t.height;this.cx=window.pageXOffset+n+i/2,this.cy=window.pageYOffset+e+o/2,window.addEventListener("mousemove",this.rotate_move_Handler)}},rotate_move_Handler:function(t){if(this.rotating){var e=this.getMouseCoordinate(t),n=e.x,i=e.y,o=i-this.cy,a=n-this.cx;this.rotate=this._adsorptionRotate((this.getAngle(a,o)+90)%360);var r=this.rotate*Math.PI/180,s=Math.cos(r),l=Math.sin(r);this.widget.transform={a:s,b:l,c:-l,d:s,tx:this.widget.transform.tx,ty:this.widget.transform.ty},this.transform=[s,-l,l,s,-14,0],C.updateTransformRotate(this.widget.index,this.widget.transform)}},editorHandler:function(){if(!this.lock)if(["text","threeText"].includes(this.widget.type))this.editor=!0,this.$emit("editor","edit",this.widget.index);else if(["image","mask"].includes(this.widget.type))this.$emit("editor","upload",this.widget.index);else if("group"===this.widget.type){var t=_.current();if(-1!==t.index){var e=_.layout().elements[this.widget.index];switch(e.elements[t.index].type){case"text":this.editor=!0,this.$emit("editor","edit",t.index,t.parent);break;case"threeText":this.editor=!0,this.$emit("editor","edit",t.index,t.parent)}}}},getMouseCoordinate:function(t){return{x:t.pageX||t.clientX+document.body.scrollLeft,y:t.pageY||t.clientY+document.body.scrollTop}},getAngle:function(t,e){var n=Math.atan2(e,t);return n=Math.round(180/Math.PI*n),n<0&&(n=360+n),n},_adsorptionRotate:function(t){return t>357?360:t<3?0:Math.abs(t-45)<3?45:Math.abs(t-90)<3?90:Math.abs(t-135)<3?135:Math.abs(t-180)<3?180:Math.abs(t-225)<3?225:Math.abs(t-270)<3?270:t}},watch:{"widget.index":function(){this.editor=!1}}},Rt=$t,At=Object(Y["a"])(Rt,Tt,Pt,!1,null,null,null),Bt=At.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-guider"},[n("div",{staticClass:"editor-guider-line editor-guider-t",style:t.tStyles}),n("div",{staticClass:"editor-guider-line editor-guider-l",style:t.lStyles}),n("div",{staticClass:"editor-guider-line editor-guider-b",style:t.bStyles}),n("div",{staticClass:"editor-guider-line editor-guider-r",style:t.rStyles}),n("div",{staticClass:"editor-guider-line editor-guider-cx",style:t.cxStyles}),n("div",{staticClass:"editor-guider-line editor-guider-cy",style:t.cyStyles})])},Xt=[],Zt={name:"vx-editor-guider",computed:{zoom:function(){return _.zoom()},guider:function(){return _.guider()},tStyles:function(){if(!this.guider.hasOwnProperty("T"))return{};var t=this.guider.T;return{top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",display:"block"}},lStyles:function(){if(!this.guider.hasOwnProperty("L"))return{};var t=this.guider.L;return{top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",display:"block"}},bStyles:function(){if(!this.guider.hasOwnProperty("B"))return{};var t=this.guider.B;return{bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",display:"block"}},rStyles:function(){if(!this.guider.hasOwnProperty("R"))return{};var t=this.guider.R;return{right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",display:"block"}},cxStyles:function(){if(!this.guider.hasOwnProperty("cx"))return{};var t=this.guider.cx;return{right:0,top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:0,display:"block"}},cyStyles:function(){if(!this.guider.hasOwnProperty("cy"))return{};var t=this.guider.cy;return{top:0,left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",bottom:0,display:"block"}}},mounted:function(){window.addEventListener("mouseup",(function(){C.setGuider({})}))}},Vt=Zt,Gt=Object(Y["a"])(Vt,Dt,Xt,!1,null,null,null),Ft=Gt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.cutable,expression:"cutable"}],ref:"cut",staticClass:"editor-image-cut",style:t.styles,on:{mousedown:function(e){return e.stopPropagation(),t.mousedownHandler(e)}}},[n("img",{staticClass:"editor-image-cut-mask",style:t.imageStyles,attrs:{src:t.widget.url}}),n("div",{ref:"inner",staticClass:"editor-image-cut-inner",style:t.innerStyles},[n("img",{staticStyle:{position:"relative"},style:t.innerImageStyles,attrs:{src:t.widget.url}}),n("div",{staticClass:"editor-image-cut-grid",class:{active:t.dragging}},[n("i",{staticClass:"editor-cut-grid-x1"}),n("i",{staticClass:"editor-cut-grid-x2"}),n("i",{staticClass:"editor-cut-grid-y1"}),n("i",{staticClass:"editor-cut-grid-y2"})])])])},Yt=[],Ut={name:"vx-image-cut",data:function(){return{dragging:!1,l:0,t:0}},computed:{zoom:function(){return _.zoom()},widget:function(){return _.cutImage()},cutZoom:function(){return _.cutZoom()/100},cutable:function(){return _.cutable()},styles:function(){var t={};return t.left="".concat(this.widget.l*this.zoom+this.widget.left,"px"),t.top="".concat(this.widget.t*this.zoom+this.widget.top,"px"),t.width="".concat(this.widget.width*this.cutZoom*this.zoom||0,"px"),t.height="".concat(this.widget.height*this.cutZoom*this.zoom||0,"px"),t},innerStyles:function(){var t={};return t.left="".concat(-this.widget.left,"px"),t.top="".concat(-this.widget.top,"px"),t.width="".concat(this.widget.w*this.zoom||0,"px"),t.height="".concat(this.widget.h*this.zoom||0,"px"),t},imageStyles:function(){var t={};return t.width="".concat(this.widget.width*this.cutZoom*this.zoom||0,"px"),t.height="".concat(this.widget.height*this.cutZoom*this.zoom||0,"px"),t},innerImageStyles:function(){var t={};return t.left="".concat(this.widget.left,"px"),t.top="".concat(this.widget.top,"px"),t.width="".concat(this.widget.width*this.cutZoom*this.zoom||0,"px"),t.height="".concat(this.widget.height*this.cutZoom*this.zoom||0,"px"),t},gridStyles:function(){var t={};return t.left="".concat(this.widget.left,"px"),t.top="".concat(this.widget.top,"px"),t}},mounted:function(){var t=this;window.addEventListener("mouseup",(function(){t.dragging=!1,window.removeEventListener("mousemove",t.mouseMoveHandler)}))},methods:{mousedownHandler:function(){this.dragging=!0,this.l=event.clientX-event.target.offsetLeft,this.t=event.clientY-event.target.offsetTop,window.addEventListener("mousemove",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.dragging){var e=this.widget.left,n=this.widget.top;e=t.clientX-this.l,n=t.clientY-this.t,C.setCutImageInfo({left:e,top:n})}}}},qt=Ut,Kt=Object(Y["a"])(qt,Jt,Yt,!1,null,null,null),Qt=Kt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"editor-toolbar",style:t.styles},[n("div",{staticClass:"editor-toolbar-content"},[n("span",{staticClass:"editor-toolbar__label"},[t._v("缩放")]),n("span",{staticClass:"editor-toolbar__zoom"}),n("span",{staticClass:"editor-toolbar__ok btn-tip",attrs:{"aria-label":"确定"},on:{click:t.okHandler}},[n("vx-icon",{attrs:{name:"ok"}})],1),n("span",{staticClass:"editor-toolbar__cancel btn-tip",attrs:{"aria-label":"取消"},on:{click:t.cancelHandler}},[n("vx-icon",{attrs:{name:"cancel"}})],1)])])},ee=[],ne={name:"vx-editor-toolbar",computed:{zoom:{get:function(){return _.cutZoom()},set:function(t){C.setCutZoom(t)}},isShow:function(){return _.cutable()},styles:function(){return this.isShow?{top:"".concat(_.toolbarPos().top-45,"px"),left:"".concat(_.toolbarPos().left,"px")}:{}}},methods:{formatZoom:function(t){return"".concat(t,"%")},okHandler:function(){C.setCutOk()},cancelHandler:function(){C.setCutCancel()}}},ie=ne,oe=Object(Y["a"])(ie,te,ee,!1,null,null,null),ae=oe.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-selector"},[t.selected?n("div",{ref:"selector",staticClass:"editor-selector-content",style:t.styles}):t._e()])},se=[],le={name:"vx-editor-selector",data:function(){return{top:0,left:0,width:0,height:0,selected:!1,l:0,t:0,canvasT:0,canvasL:0,canvasW:0,canvasH:0,selectItem:[]}},computed:{zoom:function(){return _.zoom()},styles:function(){var t=this.top,e=this.left,n=this.width,i=this.height;return this.width<0&&(e=this.left+this.width,n=Math.abs(this.width)),this.height<0&&(t=this.top+this.height,i=Math.abs(this.height)),{top:t+"px",left:e+"px",width:n+"px",height:i+"px"}},selectedArea:function(){var t=this.top,e=this.left,n=this.width,i=this.height;return this.width<0&&(e=this.left+this.width,n=Math.abs(this.width)),this.height<0&&(t=this.top+this.height,i=Math.abs(this.height)),{l:e-this.canvasL,t:t-this.canvasT,b:t+i-this.canvasT,r:e+n-this.canvasL}}},mounted:function(){document.querySelector("#js-container").addEventListener("mousedown",this.selected_mousedown_Handler,!1),window.addEventListener("mouseup",this.selected_mouseup_Handler,!1)},methods:{initStyle:function(){this.top=0,this.left=0,this.width=0,this.height=0},selected_mousedown_Handler:function(t){var e=document.querySelector("#js-container").getBoundingClientRect();e.x&&(this.l=e.x),e.y&&(this.t=e.y);var n=document.querySelector("#js-container .editor-canvas").getBoundingClientRect();n.left&&(this.canvasL=n.left-this.l),n.top&&(this.canvasT=n.top-this.t),this.initStyle(),this.left=t.pageX-this.l,this.top=t.pageY-this.t,this.selectItem=[],window.addEventListener("mousemove",this.selected_mousemove_Handler)},selected_mousemove_Handler:function(t){t.preventDefault(),C.setMulSelected(!0),this.selected=!0,this.height=t.pageY-this.t-this.top,this.width=t.pageX-this.l-this.left,this.selectElementHandler()},selected_mouseup_Handler:function(){window.removeEventListener("mousemove",this.selected_mousemove_Handler),this.selected=!1,C.setMulSelected(!1),C.setSelectedItem(this.selectItem),this.initStyle()},selectElementHandler:function(){var t=this;_.layout().elements.forEach((function(e,n){var i=e.top*t.zoom,o=(e.left+e.width)*t.zoom,a=(e.top+e.height)*t.zoom,r=e.left*t.zoom;if(o<t.selectedArea.r&&r>t.selectedArea.l&&a<t.selectedArea.b&&i>t.selectedArea.t)!t.selectItem.includes(n)&&t.selectItem.push(n);else{var s=t.selectItem.indexOf(n);-1!==s&&t.selectItem.splice(s,1)}})),C.setSelectedItem(this.selectItem)}}},ce=le,ue=Object(Y["a"])(ce,re,se,!1,null,null,null),de=ue.exports,he={name:"vx-canvas",mixins:[E],components:{VxEditorBg:q,VxEditorText:it,VxEditorThreeText:ct,VxEditorImage:mt,VxEditorGroup:Ct,VxEditorSvg:kt,VxWaterMark:Nt,VxTransform:Bt,VxEditorGuider:Ft,VxImageCut:Qt,VxToolbar:ae,vxSelector:de},data:function(){return{hoverStyle:{},transformStyle:{},timer:null,editor:-1,editorParent:-1,type:null,over:{},lock:!1,contextmenuTop:0,contextmenuleft:0,container:{y:99},contextmenuShow:!1,groupItemSelected:"",isMultipleSelect:!1}},computed:{global:function(){return _.global()},layout:function(){return _.layout()},selectWidget:function(){return _.current()},canvasStyles:function(){return{width:"".concat(this.layout.width,"px"),height:"".concat(this.layout.height,"px")}},cutable:function(){return _.cutable()},mulSelected:function(){return _.mulSelected()},selectedItem:function(){return _.selectedItem()}},methods:{selectWidgetHandler:function(t){if(!this.mulSelected){var e=-1!==t.parent?t.parent:t.index,n=t.type;this.editorParent=t.parent,"hover"===n?this.hoverHandler(e):"transfrom"===n&&(this.contextmenuShow=!1,this.over=this.overlap(e),C.setCutable(!1),C.setCurrent({id:e,index:t.index,type:"widget",parent:t.parent,over:this.over}),this.transformHandler(e))}},hoverHandler:function(t){var e=this.layout.elements[t];this.type=e.type;var n=e.transform||{a:0,b:0,c:0,tx:0,ty:0};this.$set(this,"hoverStyle",{transform:"matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.tx,",").concat(n.ty,")"),width:e.width*_.zoom()+"px",height:e.height*_.zoom()+"px",top:e.top*_.zoom()+"px",left:e.left*_.zoom()+"px",display:"block"}),this.lock=e.lock},transformHandler:function(t){this.over=this.overlap(t);var e=this.layout.elements[t],n={w:e.width,h:e.height,l:e.left,t:e.top},i=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};this.$set(this,"transformStyle",{transform:i,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1})},clearHoverHandler:function(){this.$set(this,"hoverStyle",{}),this.lock=!1},cleartransformHandler:function(){this.$set(this,"transformStyle",{}),this.editor=-1,this.editorParent=-1,this.over={},this.contextmenuShow=!1,this.groupItemSelected="",C.setCutable(!1)},selectCanvasHandler:function(){this.cleartransformHandler(),C.setCurrent({id:-1,type:"canvas"})},editorHandler:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;"edit"===t?(this.editor=e,this.editorParent=n):this.$upload().then((function(t){C.updateImg(n,e,t.data.url)})).catch((function(t){m.danger(t)}))},selectBgHandler:function(){this.cleartransformHandler(),C.setCurrent({id:-1,type:"background"})},pointerRightDown:function(t){t.preventDefault(),this.contextmenuShow=!0;var e=t.pageY-this.container.y,n=t.pageX-this.container.x,i=this.container.height-e,o=this.container.width-n;i<200&&(e=-i),o<200&&(n=-o),this.contextmenuTop=e,this.contextmenuleft=n},getContainerSize:function(){var t=document.querySelector("#js-container").getBoundingClientRect();this.container=t},groupSelectHandler:function(){this.groupItemSelected="".concat(this.selectWidget.id,"-").concat(this.selectWidget.index)}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.timer=setTimeout((function(){var e=t.$refs.container;if(e){var n=e.clientHeight,i=e.clientWidth;n>0&&i>0&&t.updateZoom(n,i),t.getContainerSize()}}),100)})),this.getContainerSize()},watch:{"selectWidget.id":function(t){this.index=t,t>=0?this.transformHandler(t):this.cleartransformHandler()}}},ge=he,fe=Object(Y["a"])(ge,X,Z,!1,null,null,null),me=fe.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-container",class:[t.type]},[n("div",{staticClass:"design-canvas",style:t.canvasStyles},[n("div",{staticClass:"editor-shell",style:t.canvasStyles},[n("div",{staticClass:"editor-canvas",attrs:{id:"canvas"}},[n("div",{staticClass:"editor-layout"},[[n("vx-Editor-bg",{attrs:{w:t.bgW,h:t.bgH,zoom:t.zoom,bgColor:t.bgColor,bgImg:t.bgImg,bgImgInfo:t.bgImgInfo,bgSize:t.bgSize}})],n("vx-water-mark"),t._l(t.layout.elements,(function(e,i){return["text"===e.type?n("vx-editor-text",{key:e.id,attrs:{index:i,zoom:t.zoom,data:e},on:{"update:data":function(t){e=t}}}):t._e(),["image","mask"].includes(e.type)?n("vx-editor-image",{key:e.id,attrs:{zoom:t.zoom,index:i,data:e},on:{"update:data":function(t){e=t}}}):t._e(),["svg"].includes(e.type)?n("vx-editor-svg",{directives:[{name:"show",rawName:"v-show",value:"print"!==t.type,expression:"type !== 'print'"}],key:e.id,ref:"svg",refInFor:!0,attrs:{zoom:t.zoom,index:i,data:e},on:{"update:data":function(t){e=t}}}):t._e(),"group"===e.type?n("vx-editor-group",{key:e.id,ref:"group",refInFor:!0,attrs:{zoom:t.zoom,index:i,data:e,type:t.type},on:{"update:data":function(t){e=t}}}):t._e()]}))],2)])])])])},ve=[],we=(n("9e76"),function(){var t=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:!!e,imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa}}(),e="image/octet-stream";function n(t,e,n){var i=t.width,o=t.height;void 0==e&&(e=i),void 0==n&&(n=o);var a=document.createElement("canvas"),r=a.getContext("2d");return a.width=e,a.height=n,r.drawImage(t,0,0,i,o,0,0,e,n),a}function i(t,e,i,o){return t=n(t,i,o),t.toDataURL(e)}function o(t){document.location.href=t}function a(t){var e=document.createElement("img");return e.src=t,e}function r(t){t=t.toLowerCase().replace(/jpg/i,"jpeg");var e=t.match(/png|jpeg|bmp|gif/)[0];return"image/"+e}function s(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function l(t){var e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function c(t,e){return"data:"+e+";base64,"+t}var u=function(t){var e=t.width,n=t.height,i=e*n*3,o=i+54,a=[66,77,255&o,o>>8&255,o>>16&255,o>>24&255,0,0,0,0,54,0,0,0],r=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&i,i>>8&255,i>>16&255,i>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=(4-3*e%4)%4,c=t.data,u="",d=e<<2,h=n,g=String.fromCharCode;do{for(var f=d*(h-1),m="",p=0;p<e;p++){var v=p<<2;m+=g(c[f+v+2])+g(c[f+v+1])+g(c[f+v])}for(var w=0;w<l;w++)m+=String.fromCharCode(0);u+=m}while(--h);var y=s(a.concat(r))+s(u);return y},d=function(a,s,d,h){if(t.canvas&&t.dataURL)if("string"==typeof a&&(a=document.getElementById(a)),void 0==h&&(h="png"),h=r(h),/bmp/.test(h)){var g=l(n(a,s,d)),f=u(g);o(c(f,e))}else{var m=i(a,h,s,d);o(m.replace(h,e))}},h=function(e,o,s,d){if(t.canvas&&t.dataURL){if("string"==typeof e&&(e=document.getElementById(e)),void 0==d&&(d="png"),d=r(d),/bmp/.test(d)){var h=l(n(e,o,s)),g=u(h);return a(c(g,"image/bmp"))}var f=i(e,d,o,s);return a(f)}};return{saveAsImage:d,saveAsPNG:function(t,e,n){return d(t,e,n,"png")},saveAsJPEG:function(t,e,n){return d(t,e,n,"jpeg")},saveAsGIF:function(t,e,n){return d(t,e,n,"gif")},saveAsBMP:function(t,e,n){return d(t,e,n,"bmp")},convertToImage:h,convertToPNG:function(t,e,n){return h(t,e,n,"png")},convertToJPEG:function(t,e,n){return h(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return h(t,e,n,"gif")},convertToBMP:function(t,e,n){return h(t,e,n,"bmp")}}}()),ye=we,be=n("2fe4"),xe=n.n(be),ze={name:"vx-canvas-preview",props:{height:Number,width:Number,w:Number,h:Number,print:{type:Boolean,default:!1},type:{validator:function(t){return["preview","print"].includes(t)},default:"preview"}},components:{VxEditorBg:q,VxEditorText:it,VxEditorImage:mt,VxEditorGroup:Ct,VxEditorSvg:kt,VxWaterMark:Nt},data:function(){return{hoverStyle:{},transformStyle:{},output:null,timer:null,size:0,zoom:"print"===this.type?1:0}},computed:{layoutZoom:function(){return _.zoom()},global:function(){return _.global()},layout:function(){return _.layout()},canvasStyles:function(){return"preview"===this.type?{width:"".concat(this.w*this.size,"px"),height:"".concat(this.h*this.size,"px")}:"print"===this.type?{width:"".concat(this.layout.width*this.zoom,"px"),height:"".concat(this.layout.height*this.zoom,"px")}:{}},canvasW:function(){return this.w*this.size},canvasH:function(){return this.h*this.size},bgW:function(){return this.layout.width*this.zoom},bgH:function(){return this.layout.height*this.zoom},bgColor:function(){return this.layout.backgroundColor||"#fff"},bgImg:function(){return this.layout.backgroundImage},bgImgInfo:function(){return this.layout.backgroundImageInfo},bgSize:function(){return this.layout.backgroundSize}},mounted:function(){"preview"===this.type&&this.updateSizeHandler()},methods:{updateSizeHandler:function(){var t=this.width/this.w,e=this.height/this.h;this.size=t>e?e:t,this.updateZoomHandler()},updateZoomHandler:function(){var t=this.canvasW/this.layout.width,e=this.canvasH/this.layout.height;this.zoom=t>e?e:t},printImageHandler:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=document.querySelector("#canvas"),this.$refs.svg&&this.$refs.svg.length>0&&this.$refs.svg.forEach((function(t){i.svgHandler(e,t)})),this.$refs.group&&this.$refs.group.length>0&&this.$refs.group.forEach((function(t){t.data.elements&&t.data.elements.length>0&&t.data.elements.forEach((function(n){"svg"===n.type&&i.svgHandler(e,n,t.index,t.data.top,t.data.left)}))})),"print"!==this.type){t.next=10;break}return n={type:"dataURL",logging:!1,scale:1,allowTaint:!1,scrollY:0,taintTest:!0,useCORS:!0,backgroundColor:null},t.next=7,this.$html2canvas(e,n).then((function(t){return t}));case 7:return t.abrupt("return",t.sent);case 10:throw new Error("当前不是生成图片模式");case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSvgHandler:function(t){var e=this;return new Promise((function(n,i){e.$axios.get(t,{}).then((function(t){n(t)})).catch((function(t){i(t)}))}))},svgHandler:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e,n,i,o,a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r="",s=document.createElement("canvas"),!n.html){t.next=13;break}r=n.html.trim(),s.style.position="absolute",s.style.left=n.data.left+"px",s.style.top=n.data.top+"px",s.style.width=n.data.width+"px",s.style.height=n.data.height+"px",k.layout.elements[n.index],s.style.zIndex=n.index,t.next=33;break;case 13:if(!n.content){t.next=24;break}r=n.content.trim(),s.style.position="absolute",s.style.left=a+"px",s.style.top=o+"px",s.style.width=n.width+"px",s.style.height=n.height+"px",k.layout.elements[n.index],s.style.zIndex=i,t.next=33;break;case 24:return t.next=26,this.getSvgHandler(n.url).then((function(t){r=t.trim()}));case 26:s.style.position="absolute",s.style.left=a+"px",s.style.top=o+"px",s.style.width=n.width+"px",s.style.height=n.height+"px",k.layout.elements[n.index],s.style.zIndex=i;case 33:xe()(s,r),e.appendChild(s),s=null;case 36:case"end":return t.stop()}}),t,this)})));function e(e,n,i,o,a){return t.apply(this,arguments)}return e}(),downLoad:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e,n){var i,o,a,r,s,l,c,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=1,"PNG"==e?i=1:"JPG"==e&&(i=n),o=document.querySelector("#canvas"),this.$refs.svg&&this.$refs.svg.length>0&&this.$refs.svg.forEach((function(t){u.svgHandler(o,t)})),this.$refs.group&&this.$refs.group.length>0&&this.$refs.group.forEach((function(t){t.data.elements&&t.data.elements.length>0&&t.data.elements.forEach((function(e){"svg"===e.type&&u.svgHandler(o,e,t.index,t.data.top,t.data.left)}))})),a=o.offsetWidth,r=o.offsetHeight,s=document.createElement("canvas"),l=i,s.width=a*l,s.height=r*l,s.getContext("2d").scale(l,l),c={scale:l,canvas:s,logging:!1,width:a,height:r,useCORS:!0},t.next=15,this.$html2canvas(o,c).then((function(t){var n=t.getContext("2d");if(n.mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,"PNG"==e){var i=ye.convertToPNG(t,t.width,t.height);return i.src}var o=ye.convertToJPEG(t,t.width,t.height);return o.src}));case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},watch:{w:function(){"preview"===this.type&&this.updateSizeHandler()},h:function(){"preview"===this.type&&this.updateSizeHandler()}}},ke=ze,Se=Object(Y["a"])(ke,pe,ve,!1,null,null,null),Ie=(Se.exports,function(){var t="mystorage",e=window.localStorage,n=function(){return!!window.localStorage},i=function(n,i){var o=e.getItem(t);return o||(this.init(),o=e.getItem(t)),o=JSON.parse(o),o.data[n]=i,e.setItem(t,JSON.stringify(o)),o.data},o=function(n){var i=e.getItem(t);return!!i&&(i=JSON.parse(i),i.data[n])},a=function(n){var i=e.getItem(t);return!!i&&(i=JSON.parse(i),delete i.data[n],e.setItem(t,JSON.stringify(i)),i.data)},r=function(){e.removeItem(t)},s=function(){e.setItem(t,'{"data":{}}')};return{test:n,setItem:i,getItem:o,removeItem:a,init:s,clear:r}}()),_e=Ie,Ce=n("c1f0"),He=n.n(Ce);function Ee(t){var e=new Error(t);throw Le(e),e}function Le(t){o()({message:t.message,type:"error",duration:5e3})}var Oe="http://iyouquan.capelabs.cn/wx/";var We=He.a.create({baseURL:Oe,timeout:1e4}),Ne=He.a.create({baseURL:Oe,timeout:3e4}),Te=function(t){return t.headers["X-Litemall-Token"]||(t.headers["X-Litemall-Token"]="".concat(_e.getItem("Token")||"")),t.headers["Cache-control"]="max-age=20,immutable",t},Pe=function(t){Le(t),Promise.reject(t)},Me=function(t){var e=t.data,n=e.errno;if(void 0===n)return e;switch(n){case 400:Ee("".concat(e.errmsg));break;case 403:Ee("".concat(e.errmsg));break;case 404:Ee("".concat(e.errmsg));break;case 408:Ee("".concat(e.errmsg));break;case 500:Ee("".concat(e.errmsg));break;case 501:Ee("".concat(e.errmsg));break;case 502:Ee("".concat(e.errmsg));break;case 503:Ee("".concat(e.errmsg));break;case 504:Ee("".concat(e.errmsg));break;case 505:Ee("".concat(e.errmsg));break;default:return e}},je=function(t){if(t&&t.response)switch(t.response.status){case 400:t.message="请求错误";break;case 401:t.message="未授权，请登录";break;case 403:t.message="拒绝访问";break;case 404:t.message="请求地址出错";break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;case 501:t.message="服务未实现";break;case 502:t.message="网关错误";break;case 503:t.message="服务不可用";break;case 504:t.message="网关超时";break;case 505:t.message="HTTP版本不受支持";break;default:break}return Le(t),Promise.reject(t)};We.interceptors.request.use(Te,Pe),We.interceptors.response.use(Me,je),Ne.interceptors.response.use(Me,je);var $e=We;function Re(t){return $e({url:"/resource/getfont?name="+t,method:"get"})}var Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-menu"},[n("ul",[n("li",{staticClass:"design-menu-undo"},[n("vx-icon",{attrs:{name:"undo"}}),n("span",[t._v("撤销")])],1),n("li",{staticClass:"design-menu-redo"},[n("vx-icon",{attrs:{name:"redo"}}),n("span",[t._v("重做")])],1),n("li",{staticClass:"design-menu-delete"},[n("vx-icon",{attrs:{name:"delete"}}),n("span",[t._v("删除")])],1),t._m(0)])])},Be=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"design-menu-save"},[n("span",{staticClass:"design-menu-save-text"},[t._v("保存")])])}],De={name:"vx-menu",components:{},data:function(){return{}},computed:{},created:function(){},methods:{}},Xe=De,Ze=Object(Y["a"])(Xe,Ae,Be,!1,null,null,null),Ve=Ze.exports,Ge={name:"vx-design-layout",mixins:[E],components:{VxCanvas:me,VxMenu:Ve},data:function(){return{panelShow:-1,loading:!1}},computed:{isShow:function(){return-1!==this.panelShow},selectWidget:function(){return _.current()},elements:function(){return _.layout().elements}},created:function(){var t=document.body.clientHeight-150,e=document.body.clientWidth-80;console.log(t,e),C.setCanvasSize(e,t)},methods:{loadFontHandler:function(t){var e=this;t.elements&&t.elements.length>0&&t.elements.forEach((function(t){"text"===t.type&&Re(t.fontFamily).then((function(t){t.data&&t.data.info&&e.setFontStyle(t.data.info)}))}))},setFontStyle:function(t){var e=document.createElement("style");e.type="text/css",e.innerText="@font-face {font-family:".concat(t.name,";src:url(").concat(t.detail,")}"),document.getElementsByTagName("head")[0].appendChild(e)},hidePanelHandler:function(){this.togglePanelHandler(-1)},togglePanelHandler:function(t){t===this.panelShow?this.panelShow=-1:this.panelShow=t},undoHandler:function(){C.setUndo()},redoHandler:function(){C.setRedo()},deleteHandler:function(){var t={type:"canvas",id:-1};C.setCurrent(t)},moveUpHandler:function(){var t=this.selectWidget.over.up;if(t.length>0){var e=t.shift();C.moveUp(this.selectWidget.id,e)}},addHandler:function(t){C.setCurrent({id:t.id,type:t.type})}}},Fe=Ge,Je=Object(Y["a"])(Fe,c,u,!1,null,null,null),Ye=Je.exports,Ue={name:"app",components:{VxDesignLayout:Ye}},qe=Ue,Ke=Object(Y["a"])(qe,s,l,!1,null,null,null),Qe=Ke.exports;n("a41b"),n("1927");function tn(t){return en.apply(this,arguments)}function en(){return en=Object(h["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ne.post(D.UPLOAD_API,e,{headers:{"Content-Type":"multipart/form-data","X-Litemall-Token":"".concat(_e.getItem("Token")||"")}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),en.apply(this,arguments)}var nn=We,on=n("967d"),an=n.n(on),rn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:{"btn-tip":t.title},attrs:{"aria-label":t.title}},[n("svg",{staticClass:"vx",style:t.styles,attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":t.href}})])])},sn=[],ln={name:"vx-icon",props:{name:String,title:String,size:Number},computed:{href:function(){return"#vx-".concat(this.name)},styles:function(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}}}},cn=ln,un=Object(Y["a"])(cn,rn,sn,!1,null,null,null),dn=un.exports,hn=function(){return new Promise((function(t,e){var n=document.querySelectorAll('[data-id="upload"]');n.forEach((function(t){t.remove()}));var i=document.createElement("input");i.style="display: none;",i.setAttribute("data-id","upload"),i.setAttribute("type","file"),i.setAttribute("accept","image/*"),document.body.appendChild(i),i.focus(),i.click(),i.addEventListener("change",Object(h["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:0===i.files.length&&e("请选择文件"),o=i.files[0],/^image\//.test(o.type)||e("请选择图片文件"),o.size>12582912&&e("图片大小必须是12MB以内"),a=new FormData,a.append("file",o,o.name),tn(a).then((function(e){e&&e.data&&t(e.data)})).catch((function(t){e(t)})).finally((function(){i.remove()}));case 7:case"end":return n.stop()}}),n)}))))}))};function gn(t,e){return new Promise((function(n,i){var o=new FormData;o.append("file",t,e),tn(o).then((function(t){t&&t.data&&n(t.data)})).catch((function(t){i(t)}))}))}r.a.component("VxLoading",(function(){return n.e("chunk-2d0c4237").then(n.bind(null,"3a0c"))})),r.a.use(an.a),r.a.component(dn.name,dn),r.a.prototype.$message=o.a,r.a.prototype.$axios=nn,r.a.prototype.$upload=hn,r.a.prototype.$blobUpload=gn,r.a.config.productionTip=!1,r.a.config.devtools=!1,new r.a({el:"#app",template:"<App/>",components:{App:Qe}})},a41b:function(t,e,n){},a448:function(t,e,n){},ac50:function(t,e,n){t.exports=n.p+"img/waterMark.91de0c77.png"}});