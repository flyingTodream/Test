(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{utOO:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),s=t.n(a),r=(t("Vv+T"),t("YMqx"),t("1zPd")),l=t.n(r);t("DKd5");n["default"]=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"markdown"},s.a.createElement("h2",{id:"\u5b9e\u73b0\u7b80\u6613\u7684\u4e8c\u7ef4\u7801\u767b\u5f55\u6548\u679c"},s.a.createElement("a",{"aria-hidden":"true",href:"#\u5b9e\u73b0\u7b80\u6613\u7684\u4e8c\u7ef4\u7801\u767b\u5f55\u6548\u679c"},s.a.createElement("span",{className:"icon icon-link"})),s.a.createElement("strong",null,"\u5b9e\u73b0\u7b80\u6613\u7684\u4e8c\u7ef4\u7801\u767b\u5f55\u6548\u679c")),s.a.createElement("h4",{id:"\u9996\u5148\u6211\u4eec\u8981\u660e\u767d\u4e8c\u7ef4\u7801\u767b\u9646\u539f\u7406\u662f\u4ec0\u4e48\uff1f"},s.a.createElement("a",{"aria-hidden":"true",href:"#\u9996\u5148\u6211\u4eec\u8981\u660e\u767d\u4e8c\u7ef4\u7801\u767b\u9646\u539f\u7406\u662f\u4ec0\u4e48\uff1f"},s.a.createElement("span",{className:"icon icon-link"})),s.a.createElement("strong",null,"\u9996\u5148\u6211\u4eec\u8981\u660e\u767d\u4e8c\u7ef4\u7801\u767b\u9646\u539f\u7406\u662f\u4ec0\u4e48\uff1f")),s.a.createElement("p",null,"\u7f51\u4e0a\u5173\u4e8e\u539f\u7406\u7684\u53d9\u8ff0\u5df2\u7ecf\u5f88\u591a\u4e86\uff0c\u5728\u8fd9\u91cc\u5c31\u4e0d\u8fc7\u591a\u53d9\u8ff0\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ee5\u5b9e\u6218\u4e3a\u4e3b"),s.a.createElement("h4",{id:"\u5b9e\u73b0\u601d\u8def"},s.a.createElement("a",{"aria-hidden":"true",href:"#\u5b9e\u73b0\u601d\u8def"},s.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u601d\u8def"),s.a.createElement("hr",null),s.a.createElement("p",null,"PC \u7aef\u53d1\u9001\u4e00\u4e2a\u4e8c\u7ef4\u7801\u7684\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u751f\u6210\u4e00\u4e2a UUID\uff0c\u52a0\u4e0a\u81ea\u5df1\u7684\u5bc6\u94a5\uff0c\u5728 md5 \u4e00\u4e0b\uff08\u8fd9\u91cc MD5 \u6ca1\u6709\u5fc5\u8981\uff0c\u53ef\u4ee5\u7528\u516c\u53f8\u81ea\u5df1\u7684\u5bc6\u94a5\u7b97\u6cd5\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684\u5bc6\u94a5\uff09\uff0c\u7136\u540e\u628a\u751f\u6210\u7684\u5bc6\u94a5\u5f53\u4f5c\u4e00\u4e2a key \u503c\u5b58\u5728 redis \u91cc\u9762\uff0cvalue \u503c\u5c31\u5b58 code \u7684\u4e00\u4e9b\u4fe1\u606f\uff0c\u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff08\u6211\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbf\u6ca1\u6709\u8bbe\u7f6e\uff09\uff0c\u670d\u52a1\u5668\u628a\u751f\u6210\u7684 code \u8fd4\u56de\u7ed9\u524d\u7aef\u3002"),s.a.createElement("p",null,"PC \u7aef\u6839\u636e\u670d\u52a1\u5668\u8fd4\u56de\u7684\u5bc6\u94a5\uff0c\u548c\u786e\u8ba4\u767b\u9646\u9875\u9762\u7684 url \u751f\u6210\u4e00\u4e2a\u4e8c\u7ef4\u7801\u8fdb\u884c\u5c55\u793a\u3002"),s.a.createElement("p",null,"\u624b\u673a\u7aef\u626b\u7801\u4e8c\u7ef4\u7801\uff0c\u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u9875\u9762\uff0c\u62ff\u5230 PC \u7aef\u4f20\u8fc7\u6765\u7684 code \u7801\uff0c\u5e76\u53d1\u9001\u66f4\u65b0\u4e8c\u7ef4\u7801\u626b\u63cf\u72b6\u6001\u7684\u8bf7\u6c42\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u786e\u8ba4\u767b\u5f55\u65f6\uff0c\u518d\u6b21\u53d1\u9001\u66f4\u65b0\u4e8c\u7ef4\u7801\u72b6\u6001\u7684\u8bf7\u6c42\uff0c\u5e76\u628a token(\u767b\u5f55\u65f6\u751f\u6210\u7684)\uff0c\u4e00\u8d77\u53d1\u9001\u81f3\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u62ff\u5230 token\uff0c\u83b7\u5f97\u7528\u6237\u4fe1\u606f\uff0c\u518d\u628a\u7528\u6237\u4fe1\u606f\u8fd4\u56de\u7ed9 PC \u7aef\uff0c\u81f3\u6b64\u5c31\u5b8c\u6210\u4e86\u4e8c\u7ef4\u7801\u767b\u5f55\u7684\u6548\u679c"),s.a.createElement("h4",{id:"\u5b9e\u73b0\u4ee3\u7801"},s.a.createElement("a",{"aria-hidden":"true",href:"#\u5b9e\u73b0\u4ee3\u7801"},s.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u4ee3\u7801"),s.a.createElement("p",null,s.a.createElement("em",null,"\u6211\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6ca1\u6709\u8bbe\u7f6e redis \u8fc7\u671f\u65f6\u95f4\uff0c\u76f8\u5e94\u524d\u7aef\u4e5f\u6ca1\u5224\u65ad\u4e8c\u7ef4\u7801\u662f\u5426\u8fc7\u671f\uff0c\u767b\u5f55\u65f6\u4e5f\u6ca1\u7528\u5230 token\uff0c\u626b\u63cf\u540e\u53ef\u4ee5\u81ea\u5df1\u8f93\u5165\u7528\u6237\u4fe1\u606f\uff0c\u786e\u8ba4\u767b\u9646\u540e\uff0c\u4f60\u8f93\u5165\u7684\u7528\u6237\u4fe1\u606f\u4f1a\u53cd\u663e\u5230 PC \u7aef\u7684\u767b\u5f55\u9875\u9762")),s.a.createElement("p",null,"\u4e0b\u9762\u8bf7\u770b\u4ee3\u7801\uff1a"),s.a.createElement("hr",null),s.a.createElement("p",null,"\u524d\u7aef\u4f7f\u7528\u4e86 vue \u6846\u67b6\uff0c\u9996\u5148\u53d1\u9001\u751f\u6210\u4e8c\u7ef4\u7801\u63a5\u53e3\uff0c\u7136\u540e\u518d\u8f6e\u8be2\u4e8c\u7ef4\u7801\u72b6\u6001\uff0c"),s.a.createElement("p",null,"\u9875\u9762\u4ee3\u7801\u5982\u4e0b\uff1a"),s.a.createElement(l.a,{code:"<template>\n  <div>\n    <div ref=\"qrcode\" id=\"qrcode\" class=\"code\">\n      <div class=\"text\">\n        <i v-if=\"isScan\" class=\"el-icon-check\"></i>\n        {{text}}\n      </div>\n    </div>\n    <div class=\"text\">\u767b\u9646\u7528\u6237\u662f\uff1a{{userName}}</div>\n  </div>\n</template>\n<script dangerouslySetInnerHTML={{ __html: `\n  import QRCode from 'easyqrcodejs';\n  import axios from 'axios';\n  export default {\n    data() {\n      return {\n        text: '\u8bf7\u626b\u63cf\u4e8c\u7ef4\u7801',\n        userName: '',\n        isScan: false,\n      };\n    },\n    async mounted() {\n      let code = '';\n      await axios.get('http://192.168.0.103:8888/qrcode/getQr').then(res => {\n        code = res.data.data.code;\n        const options = {\n          //\u6b64\u5904\u662f\u524d\u7aef\u786e\u8ba4\u767b\u9875\u9762\u7684url\n          text: 'http://192.168.0.103:8080/confim?code=' + code,\n          colorDark: '#000',\n          colorLight: '#FFF',\n          width: 150,\n          height: 150,\n          autoColor: true,\n        };\n        new QRCode(this.$refs.qrcode, options);\n      });\n      //\u751f\u6210\u4e8c\u7ef4\u7801\u540e\uff0c\u8f6e\u8be2\u4e8c\u7ef4\u7801\u72b6\u6001\uff08\u6b64\u5904\u7528\u4e86ES6\u7684async\u51fd\u6570\uff09\n      const interval = setInterval(() => {\n        //\u6b64\u5904\u6362\u6210\u4f60\u670d\u52a1\u5668\u81ea\u5df1\u7684\u5730\u5740\n        axios\n          .get('http://192.168.0.103:8888/qrcode/getStatus?code=' + code)\n          .then(res => {\n            if (res.data.data.status == 'yes') {\n              this.text = '\u626b\u63cf\u6210\u529f\uff0c\u8bf7\u786e\u8ba4\u767b\u9646';\n              this.isScan = true;\n            }\n            if (res.data.data.status == 'success') {\n              this.text = '\u767b\u9646\u6210\u529f';\n              this.userName = res.data.data.userName;\n              clearInterval(interval); //\u505c\u6b62\n            }\n          });\n      }, 1000);\n    },\n  };\n` }} />\n<style lang=\"scss\" scoped>\n  #qrcode {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    margin-top: 100px;\n  }\n  .text {\n    width: 100%;\n    text-align: center;\n    padding: 20px 0;\n  }\n  .el-icon-check {\n    color: #12e318;\n    font-size: 18px;\n    font-weight: bolder;\n  }\n</style>\n",lang:"html"}),s.a.createElement("p",null,"\u540e\u53f0\u4f7f\u7528\u7684 Spring Boot + Mybitis \u6846\u67b6"),s.a.createElement("p",null,"\u540e\u53f0\u4ee3\u7801\u5982\u4e0b\uff1a"),s.a.createElement(l.a,{code:'    /**\n     * \u751f\u6210\u4e8c\u7ef4\u7801\n     *\n     * @return\n     */\n    @RequestMapping(value = "/getQr", method = RequestMethod.GET)\n    public Result getQr() {\n        Jedis jedis = new Jedis("localhost");\n        System.out.println("\u8fde\u63a5\u6210\u529f");\n        // \u67e5\u770b\u670d\u52a1\u662f\u5426\u8fd0\u884c\n        System.out.println("\u670d\u52a1\u6b63\u5728\u8fd0\u884c: " + jedis.ping());\n\n        String code = Md5.string2MD5(StringUtils.UUID() + "csii");\n        JSONObject data = new JSONObject();\n        data.put("status", "no");\n        //\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        jedis.set(code, data.toString());\n        JSONObject json = new JSONObject();\n        json.put("code", code);\n        return ResultUtils.wrapSuccess(null, json);\n    }\n    /**\n     * \u66f4\u65b0\u4e8c\u7ef4\u7801\u72b6\u6001\n     *\n     * @param code  \u751f\u6210\u7684code\n     * @param status \u524d\u7aef\u4f20\u8fc7\u6765\u7684\u72b6\u6001\n     * @param userName \u7528\u6237\u4fe1\u606f\n     * @return\n     */\n    @RequestMapping(value = "/UpdateStatus", method = RequestMethod.GET)\n    public Result UpdateStatus(String code, String status, String userName) {\n        Jedis jedis = new Jedis("localhost");\n        System.out.println("\u8fde\u63a5\u6210\u529f");\n        JSONObject data = new JSONObject();\n        String res = jedis.get(code);\n\n        //\u5224\u65adcode\u662f\u5426\u5b58\u5728\n        if (jedis.exists(code)) {\n            data.put("status", status);\n            //\u5982\u679c\u70b9\u51fb\u4e86\u786e\u8ba4\u767b\u9646\n            if (status.equals("success")) {\n                data.put("userName", userName);\n            }\n            jedis.set(code, data.toString());\n        }else {\n            //\u8bbe\u7f6e\u8fc7\u671f\u6807\u8bb0\n            data.put("errorCode", 0);\n        }\n        return ResultUtils.wrapSuccess(null, null);\n    }\n\n    /**\n     * \u83b7\u53d6\u4e8c\u7ef4\u7801\u72b6\u6001\n     *\n     * @param code\n     * @return\n     */\n    @RequestMapping(value = "/getStatus", method = RequestMethod.GET)\n    public Result getStatus(String code) {\n        Jedis jedis = new Jedis("localhost");\n        System.out.println("\u8fde\u63a5\u6210\u529f");\n        String data = jedis.get(code);\n        JSONObject res = (JSONObject) JSON.parse(data);\n        return ResultUtils.wrapSuccess(null, res);\n    }\n',lang:"java"}),s.a.createElement("p",null,"\u524d\u7aef\u786e\u8ba4\u767b\u9646\u9875\u9762\u4ee3\u7801\u5982\u4e0b\uff1a"),s.a.createElement(l.a,{code:"<template>\n  <div>\n    <el-input v-model=\"userName\" placeholder=\"\u8bf7\u8f93\u5165\u7528\u6237\u540d\"></el-input>\n    <el-button @click=\"login\">\u786e\u8ba4\u767b\u9646</el-button>\n  </div>\n</template>\n<script dangerouslySetInnerHTML={{ __html: `\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      userName: '',\n    };\n  },\n  mounted() {\n    //\u8fdb\u5165\u9875\u9762\u5373\u66f4\u65b0\u4e8c\u7ef4\u7801\u72b6\u6001\u4e3a\u626b\u7801\u6210\u529f\n    const code = this.$route.query.code;\n    //\u6b64\u5904\u6362\u6210\u4f60\u81ea\u5df1\u670d\u52a1\u5668\u7684url\n    const url =\n      'http://192.168.0.103:8888/qrcode/UpdateStatus?code=' +\n      code +\n      '&status=yes';\n    axios.get(url).then(res => {\n      console.log(res);\n    });\n  },\n  methods: {\n    login() {\n      const code = this.$route.query.code;\n      //\u6b64\u5904\u6362\u6210\u4f60\u81ea\u5df1\u670d\u52a1\u5668\u7684url\n      const url =\n        'http://192.168.0.103:8888/qrcode/UpdateStatus?code=' +\n        code +\n        '&status=success' +\n        this.userName;\n      //\u66f4\u65b0\u72b6\u6001\u4e3a\u767b\u5f55\u6210\u529f\n      axios.get(url).then(res => {\n        console.log(res);\n      });\n    },\n  },\n};\n` }} />\n",lang:"vue"}),s.a.createElement("p",null,"\u6b64\u7bc7\u5b9e\u73b0\u4e86\u7b80\u6613\u7684\u4e8c\u7ef4\u7801\u767b\u5f55\u8fc7\u7a0b\uff0c\u4ee3\u7801\u6709\u5f88\u591a\u5199\u7684\u4e0d\u8db3\u7684\u5730\u65b9\uff0c\u671b\u5305\u5bb9\uff0c\u4ee3\u7801\u4ec5\u4f9b\u53c2\u8003\uff0c\u5982\u679c\u6709\u4ec0\u4e48\u9700\u8981\u6539\u8fdb\u7684\u5730\u65b9\u8bf7\u7ed9\u6211\u7559\u8a00\uff0c"),s.a.createElement("p",null,"\u559c\u6b22\u5c31\u8bf7\u7ed9\u6211\u4e00\u4e2a start \u5427")))}}}]);