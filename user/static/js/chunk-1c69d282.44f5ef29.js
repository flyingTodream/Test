(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c69d282"],{5758:function(t,e,a){var n=a("eb1f"),i=a("9ead")("iterator"),r=a("5b25");t.exports=a("ae18").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||r.hasOwnProperty(n(e))}},"646f":function(t,e,a){a("addd"),t.exports=a("ae18").Array.isArray},"6b23":function(t,e,a){a("e5b4"),a("e479"),t.exports=a("5758")},7093:function(t,e,a){},"75fc":function(t,e,a){"use strict";var n=a("a745"),i=a.n(n);function r(t){if(i()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var o=a("774e"),s=a.n(o),d=a("c8bb"),c=a.n(d);function l(t){if(c()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){return r(t)||l(t)||u()}a.d(e,"a",(function(){return m}))},"774e":function(t,e,a){t.exports=a("87b8")},"7f4c":function(t,e,a){"use strict";var n=a("2f6d"),i=a("a2f9"),r=a("a245"),o=a("6b37"),s=a("db4e"),d=a("61d1"),c=a("7bc3"),l=a("c5f8");i(i.S+i.F*!a("2c6c")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,i,u,m=r(t),f="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,p=0,_=l(m);if(v&&(g=n(g,h>2?arguments[2]:void 0,2)),void 0==_||f==Array&&s(_))for(e=d(m.length),a=new f(e);e>p;p++)c(a,p,v?g(m[p],p):m[p]);else for(u=_.call(m),a=new f;!(i=u.next()).done;p++)c(a,p,v?o(u,g,[i.value,p],!0):i.value);return a.length=p,a}})},"87b8":function(t,e,a){a("e479"),a("7f4c"),t.exports=a("ae18").Array.from},a745:function(t,e,a){t.exports=a("646f")},addd:function(t,e,a){var n=a("a2f9");n(n.S,"Array",{isArray:a("44c1")})},ba61:function(t,e,a){"use strict";var n=a("7093"),i=a.n(n);i.a},c8bb:function(t,e,a){t.exports=a("6b23")},ee27:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ghouse_manage"},[a("div",{staticClass:"header"},[a("h4",{staticClass:"title"},[t._v("企业名称:  "+t._s(t.companyName))]),t._v(" "),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的大棚名称"},model:{value:t.search_txt,callback:function(e){t.search_txt=e},expression:"search_txt"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),t._l(t.ghouseData,(function(e){return a("div",{staticClass:"ghouse-list"},[a("div",{staticClass:"ghouse-top"},[a("div",[t._v("大棚名称："+t._s(e.displayName)),a("div",{on:{click:function(a){return t.menuEdit(e)}}},[t._v("重命名")])]),t._v(" "),a("div",{on:{click:function(a){return t.areaMonitor(e)}}},[a("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),a("div",{staticClass:"ghouse-pro"},[a("div",{staticClass:"ghouse-field"},[a("ul",[a("li",[a("div",[t._v("编号")]),a("div",{staticClass:"field-value"},[t._v(t._s(e.id))])]),t._v(" "),a("li",[a("div",[t._v("公司编号")]),a("div",{staticClass:"field-value"},[t._v(t._s(e.companyId))])]),t._v(" "),a("li",[a("div",[t._v("下属主控ID")]),a("div",{staticClass:"field-value"},[t._v(t._s(e.number))])])])]),t._v(" "),a("div")])])})),t._v(" "),a("div",{staticClass:"content"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>3,expression:"total > 3"}],staticClass:"page"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增大棚",visible:t.dialogAddVis,width:"30%"},on:{"update:visible":function(e){t.dialogAddVis=e}}},[a("el-form",{ref:"AddForm",attrs:{rules:t.rulesAddForm,model:t.addForm,"label-width":"80px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"大棚名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入大棚名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAddVis=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addSaveBusi}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改大棚",visible:t.dialogEditVis,width:"30%"},on:{"update:visible":function(e){t.dialogEditVis=e}}},[a("el-form",{ref:"form",attrs:{model:t.EditForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"大棚名称"}},[a("el-input",{attrs:{placeholder:"请输入大棚名称"},model:{value:t.EditForm.name,callback:function(e){t.$set(t.EditForm,"name",e)},expression:"EditForm.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogEditVis=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t._updateArea}},[t._v("确 定")])],1)],1)],2)},i=[],r=a("75fc"),o=a("6b43"),s=a("b775"),d=a("4328"),c=a.n(d);function l(t){return Object(s["a"])({url:"/myArea/getMyAreaCount",method:"post",data:c.a.stringify(t)})}function u(t){return Object(s["a"])({url:"/myArea/getMyAreaList",method:"post",data:c.a.stringify(t)})}function m(t){return Object(s["a"])({url:"/myArea/updateDisplayName",method:"post",data:c.a.stringify(t)})}var f={data:function(){return{loading:!1,search_txt:"",currentPage:1,pageSize:3,total:1,ghouseData:[],dialogAddVis:!1,addForm:{name:""},rulesAddForm:{name:[{required:!0,message:"请输入大棚名称",trigger:"blur"}]},dialogCopyVis:!1,CopyForm:{name:""},dialogEditVis:!1,EditForm:{name:""}}},methods:{search:function(){this.currentPage=1,this._getAreaCount(),this._getAreaList()},showAdd:function(){this.addForm.name="",this.dialogAddVis=!0},menuEdit:function(t){this.EditForm.name=t.displayName,this.EditForm.areaId=t.id,this.dialogEditVis=!0},linkTo:function(t){this.$router.push({path:t})},linkControlAdmin:function(t,e){var a=this,n={index:e,id:t.id,name:t.displayName};this.$store.dispatch("info/saveControlInfo",n).then((function(){a.linkTo("/business_management/ghouse_manage_index/control_admin")}))},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this._getAreaList(),this._getAreaCount()},handleCurrentChange:function(t){this.currentPage=t,this._getAreaList(),this._getAreaCount()},menuDel:function(t){var e=this;this.$confirm("确定删除该大棚吗?","删除该大棚",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e._deleteArea(t.id)}))},tableheaderClassName:function(t){t.row,t.rowIndex;return"table-head-th"},addSaveBusi:function(){var t=this;this.$refs.AddForm.validate((function(e){e&&t._addArea()}))},_getAreaList:function(){var t=this,e=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a={companyId:this.companyId,name:this.search_txt,page:this.currentPage,pageSize:this.pageSize};u(a).then((function(a){1===a.statusCode?(t.ghouseData.length=0,t.ghouseData=Object(r["a"])(a.result),e.close()):t.$message({message:a.message,type:"warning"})}))},_getAreaCount:function(){var t=this,e={companyId:this.companyId,name:this.search_txt};l(e).then((function(e){1===e.statusCode?t.total=e.result:t.$message({message:e.message,type:"warning"})}))},_updateArea:function(){var t=this;m(this.EditForm).then((function(e){1===e.statusCode?(t.dialogEditVis=!1,t.$message({message:"大棚修改成功",type:"success"}),t._getAreaCount(),t._getAreaList()):t.$message({message:e.message,type:"warning"})}))},areaMonitor:function(t){t.index=1,this.$router.push({name:"ementManage",query:t})}},mounted:function(){this._getAreaList(),this._getAreaCount()},computed:{companyId:function(){return o["a"].getItem("companyId")},companyName:function(){return o["a"].getItem("companyName")}}},h=f,g=(a("ba61"),a("2877")),v=Object(g["a"])(h,n,i,!1,null,null,null);e["default"]=v.exports}}]);