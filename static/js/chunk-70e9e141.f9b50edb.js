(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70e9e141"],{"0a30":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return d}));var a=n("b775"),i=n("fed1"),r=n.n(i);function o(e){return Object(a["a"])({url:"/permission/getAllFunc",method:"post",data:r.a.stringify(e)})}function s(e){return Object(a["a"])({url:"/permission/saveFunc",method:"post",data:r.a.stringify(e)})}function l(e){return Object(a["a"])({url:"/permission/deleteFunc",method:"post",data:r.a.stringify(e)})}function u(e){return Object(a["a"])({url:"/permission/getFuncByRole",method:"post",data:r.a.stringify(e)})}function d(e){return Object(a["a"])({url:"/permission/updateFuncRole",method:"post",data:r.a.stringify(e)})}},3507:function(e,t,n){"use strict";var a=n("655a"),i=n.n(a);i.a},"35fb":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){return a(e)||i(e)||r()}n.d(t,"a",(function(){return o}))},"4c4e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-manage"},[n("div",{staticClass:"header"},[n("div",{staticClass:"left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.showAdd}},[e._v("新增角色")])],1)]),e._v(" "),n("div",{staticClass:"content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roleData,"header-cell-class-name":e.tableheaderClassName}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"level",label:"级别"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.roleMenuEdit(t.row)}}},[e._v("修改角色菜单")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.roleFuncEdit(t.row)}}},[e._v("修改角色方法")])]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"修改角色方法",visible:e.dialogFuncEdit,width:"60%"},on:{"update:visible":function(t){e.dialogFuncEdit=t}}},[n("el-select",{staticStyle:{width:"80%"},attrs:{"collapse-tags":"",multiple:"",placeholder:"请选择"},model:{value:e.funcSeled,callback:function(t){e.funcSeled=t},expression:"funcSeled"}},e._l(e.funcData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFuncEdit=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleFunc}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"修改角色菜单",visible:e.dialogMenuEdit,width:"40%"},on:{"update:visible":function(t){e.dialogMenuEdit=t}}},[n("el-tree",{ref:"menuTree",attrs:{data:e.AllParent,props:e.menuRoleProps,"default-checked-keys":e.selectedMenu,"node-key":"id","highlight-current":"","default-expand-all":"",getCheckedNodes:"getSelectedMenu","show-checkbox":""}}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogMenuEdit=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveMenu}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:e.isAddTitle,visible:e.dialogAddVis,width:"40%"},on:{"update:visible":function(t){e.dialogAddVis=t}}},[n("el-form",{ref:"AddForm",attrs:{rules:e.rulesAddForm,model:e.addForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"角色级别",prop:"level"}},[n("el-input",{attrs:{placeholder:"请输入角色级别"},model:{value:e.addForm.level,callback:function(t){e.$set(e.addForm,"level",e._n(t))},expression:"addForm.level"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogAddVis=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addSave}},[e._v("确 定")])],1)],1)],1)},i=[],r=(n("f763"),n("35fb")),o=n("c5a1"),s=n("9870"),l=n("0a30"),u={data:function(){return{dCommand:"全部",dialogMenuEdit:!1,loading:!1,funcSeled:[],menuData:[],selectedMenu:[],funcData:[],roleId:null,dialogFuncEdit:!1,isAddTitle:"新增菜单",AllParent:[],roleData:[],dialogAddVis:!1,isfirst:!0,addForm:{name:"",level:""},rulesAddForm:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],level:[{required:!0,message:"请输入角色级别",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}]},menuRoleProps:{children:"children",label:"menuName",value:"id"}}},methods:{showAdd:function(){this.isAddTitle="新增角色",this.addForm.id=null,this.addForm.level=null,this.dialogAddVis=!0},tableheaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},addSave:function(){var e=this;this.$refs.AddForm.validate((function(t){t&&e._saveRole()}))},_getAllRole:function(e){var t=this;this.loading=!0;var n={};Object(s["a"])(n).then((function(e){t.loading=!1,1===e.statusCode?(t.roleData.length=0,t.roleData=Object(r["a"])(e.result)):t.$message({message:e.message,type:"warning"})}))},_saveRole:function(){var e=this;Object(s["b"])(this.addForm).then((function(t){e.dialogAddVis=!1,1===t.statusCode?(e._getAllRole(),e.$message({message:t.message,type:"success"})):e.$message({message:t.message,type:"warning"})}))},roleMenuEdit:function(e){var t=this;this.selectedMenu=[].concat(),this.roleId=e.id;var n={roleId:e.id};Object(o["d"])(n).then((function(e){t.dialogMenuEdit=!0,setTimeout((function(){t.$refs.menuTree.setCheckedKeys([]),e.result.forEach((function(e){e.children?(t.selectedMenu.push(e.id),e.children.forEach((function(e){t.selectedMenu.push(e.id)}))):t.selectedMenu.push(e.id)}))}),100)}))},getAllFunc:function(){var e=this;Object(l["b"])().then((function(t){e.funcData.length=0,e.funcData=Object(r["a"])(t.result)}))},roleFuncEdit:function(e){var t=this;this.funcSeled=[].concat(),this.roleId=e.id;var n={roleId:e.id};Object(l["c"])(n).then((function(e){e.result.forEach((function(e){1===e.checked&&t.funcSeled.push(e.id)}))})),this.dialogFuncEdit=!0},saveRoleFunc:function(){var e=this,t={roleId:this.roleId,funcIds:this.funcSeled.join(",")};Object(l["e"])(t).then((function(t){1===t.statusCode?e.$message({message:t.message,type:"success"}):e.$message({message:t.message,type:"warning"}),e.dialogFuncEdit=!1}))},getAllParent:function(){var e=this;Object(o["c"])().then((function(t){e.AllParent=t.result,e.AllParent.forEach((function(t,n){var a={parent:t.id};Object(o["b"])(a).then((function(t){e.AllParent[n].children=Object(r["a"])(t.result)}))}))}))},saveMenu:function(){var e=this,t=new Array;this.$refs.menuTree.getCheckedNodes().forEach((function(e){t.push(e.id)}));var n={roleId:this.roleId,menuIds:t.join(",")};console.log(n),Object(o["g"])(n).then((function(t){1===t.statusCode?(e.dialogMenuEdit=!1,e.$message({message:t.message,type:"success"})):e.$message({message:t.message,type:"warning"})}))}},mounted:function(){this._getAllRole(),this.getAllFunc(),this.getAllParent()}},d=u,c=(n("3507"),n("6691")),f=Object(c["a"])(d,a,i,!1,null,null,null);t["default"]=f.exports},"655a":function(e,t,n){},9870:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n("b775"),i=n("fed1"),r=n.n(i);function o(e){return Object(a["a"])({url:"/permission/getAllRole",method:"post",data:r.a.stringify(e)})}function s(e){return Object(a["a"])({url:"/permission/saveRole",method:"post",data:r.a.stringify(e)})}},c5a1:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return m}));var a=n("b775"),i=n("fed1"),r=n.n(i);function o(e){return Object(a["a"])({url:"/permission/getAllMenu",method:"post",data:r.a.stringify(e)})}function s(e){return Object(a["a"])({url:"/permission/saveMenu",method:"post",data:r.a.stringify(e)})}function l(e){return Object(a["a"])({url:"/permission/getAllParent",method:"post",data:r.a.stringify(e)})}function u(e){return Object(a["a"])({url:"/permission/updateMenu",method:"post",data:r.a.stringify(e)})}function d(e){return Object(a["a"])({url:"/permission/deleteMenu",method:"post",data:r.a.stringify(e)})}function c(e){return Object(a["a"])({url:"/permission/updateVisible",method:"post",data:r.a.stringify(e)})}function f(e){return Object(a["a"])({url:"/permission/getMenuByRole",method:"post",data:r.a.stringify(e)})}function m(e){return Object(a["a"])({url:"/permission/updateMenuRole",method:"post",data:r.a.stringify(e)})}}}]);