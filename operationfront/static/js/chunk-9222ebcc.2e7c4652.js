(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9222ebcc"],{"1e33":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all"},[n("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的关键字"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("el-date-picker",{attrs:{type:"daterange",align:"right","value-format":"yyyy-MM-dd hh:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),n("el-badge",{staticClass:"item",attrs:{value:t.msgNum}},[n("el-button",{attrs:{size:"small"}},[t._v("消息")])],1),t._v(" "),n("span",{staticClass:"text"},[t._v("用户是否接收通知")]),t._v(" "),n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.changeHandler},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{prop:"name",label:"类型",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"age",label:"时间",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"sex",label:"来源",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"department",label:"详情",width:"150"}})],1),t._v(" "),n("div",{staticStyle:{"margin-top":"10px","margin-left":"10px"}},[n("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},i=[],r=n("dea4"),o=n("6b43"),s=n("b775"),c=n("fed1"),l=n.n(c);function u(t){return Object(s["a"])({url:"/warning/getWarningCount",method:"post",data:l.a.stringify(t)})}function g(t){return Object(s["a"])({url:"/warning/getWarningList",method:"post",data:l.a.stringify(t)})}function d(t){return Object(s["a"])({url:"/warning/getWarningNoReadCount",method:"post",data:l.a.stringify(t)})}function p(t){return Object(s["a"])({url:"/warning/updatePushState",method:"post",data:l.a.stringify(t)})}var m={data:function(){return{loading:!0,tableData:[],content:"",total:0,pageSize:10,msgNum:0,page:1,time:[],value1:""}},computed:{companyId:function(){return o["a"].getItem("companyId")}},created:function(){this.getWarningCount(),this.getWarningList(),this.getWarningNoReadCount()},methods:{handleCurrentChange:function(t){this.page=t},getWarningCount:function(){var t=this,e={companyId:this.companyId,content:this.content,startTime:this.time[0],endTime:this.time[1]};u(e).then((function(e){t.total=e.result}))},getWarningList:function(){var t=this;this.loading=!0;var e={companyId:this.companyId,content:this.content,startTime:this.time[0],endTime:this.time[1],page:this.page,pageSize:this.pageSize};g(e).then((function(e){t.loading=!1,t.tableData.length=0,t.tableData=Object(r["a"])(e.result)}))},search:function(){this.getWarningCount(),this.getWarningList()},changeHandler:function(t){var e=this,n=0;t&&(n=1);var a={id:this.companyId,pushState:n};p(a).then((function(t){1===t.statusCode?e.$message({message:t.message,type:"success"}):e.$message({message:t.message,type:"warning"})}))},getWarningNoReadCount:function(){var t=this,e={companyId:this.companyId};d(e).then((function(e){t.msgNum=e.result}))}}},h=m,f=(n("ce27"),n("6691")),v=Object(f["a"])(h,a,i,!1,null,null,null);e["default"]=v.exports},ce27:function(t,e,n){"use strict";var a=n("ee9d"),i=n.n(a);i.a},dea4:function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return a(t)||i(t)||r()}n.d(e,"a",(function(){return o}))},ee9d:function(t,e,n){}}]);