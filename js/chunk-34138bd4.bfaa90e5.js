(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34138bd4"],{"63e6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-resource"},[t.$slots.label?n("div",{staticClass:"design-resource__label"},[t._t("label")],2):t._e(),n("div",{staticClass:"design-resource__content"},[t._t("default")],2)])},i=[],s={name:"vx-resource"},o=s,l=n("5511"),r=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=r.exports},fd38:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vx-template",{staticClass:"design-resource-text",scopedSlots:t._u([{key:"label",fn:function(){return[n("h2",[t._v("文字")])]},proxy:!0}])},[[n("div",{staticClass:"design-resource-text__button"},[n("button",{on:{click:t.addTextHandler}},[n("span",[t._v("添加文字")])])]),n("div",{staticClass:"design-resource__scroll__content"},[n("ul",{staticClass:"design-resource-text__list"},t._l(t.templateList,(function(e,a){return n("li",{key:a},[n("div",{staticClass:"design-resource-text__list__item",on:{click:function(n){return t.selectHandler(e.id)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.typefacePath,expression:"item.typefacePath"}],staticClass:"img"})])])})),0),t.loading?n("VxLoading"):t._e(),t.noMore?n("p",{staticClass:"nomore-text"},[t._v("已全部加载完")]):t._e(),n("div",{staticClass:"load-bottom",attrs:{id:"text-bottom"}})],1)]],2)},i=[],s=(n("63ff"),n("e5af")),o=n("81ac"),l=n("63e6"),r=n("a10b"),c={name:"vx-design-text",components:{VxTemplate:l["a"]},data:function(){return{templateList:[],loading:!1,pageNum:1,totalPages:2,l:0,t:0}},computed:{len:function(){var t=o["a"].layout().elements||[];return t.length},noMore:function(){return this.pageNum>this.totalPages},left:function(){return this.l},top:function(){return this.t}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.scrollData();case 2:this.getDataHandler();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{scrollData:function(){var t=this,e=new IntersectionObserver((function(e){var n=e[0];n.isIntersecting&&(t.noMore||t.getDataHandler())}));e.observe(document.getElementById("text-bottom"))},getDataHandler:function(){var t=this;this.loading=!0;var e={page:this.pageNum,limit:10,type:"font_element"};this.$axios.get(r["a"].EFFECTS_API,{params:e}).then((function(e){t.totalPages=e.data.pages,t.loading=!1,t.templateList=t.templateList.concat(e.data.list),t.pageNum++})).catch((function(t){r["c"].danger(t)}))},addHandler:function(){var t=this;this.$emit("select"),this.$nextTick((function(){t.$emit("add",{id:t.len-1,type:"widget"})}))},addTextHandler:function(){this.setTextPositionHandler(),o["b"].addText({type:"text",category:"",opacity:1,padding:[0,0,0,0],width:600,height:118,left:this.left,top:this.top,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},boxShadow:null,resize:5,dragable:!0,rotatable:!0,editable:!0,frozen:!1,hidden:!1,lock:!1,borderRadius:0,filter:{hueRotate:0,saturate:0,brightness:0,gaussianBlur:0},color:"#000000ff",backgroundColor:null,fontFamily:"",fontStyle:"normal",fontWeight:400,fontSize:112,lineHeight:1.2,letterSpacing:31,textDecoration:"none",writingMode:"horizontal-tb",textAlign:"center",verticalAlign:"top",contents:null,effectScale:1,textShadow:null,autoScale:!0,textEffects:[],aggregatedColors:["rgb(0, 0, 0)"],mainColor:null,content:"添加文字",version:"5.7.0"}),this.addHandler()},selectHandler:function(t){var e=this,n={id:t};this.setTextPositionHandler(),this.$axios.get(r["a"].EFFECT_DETAIL_API,{params:n}).then((function(t){var n=JSON.parse(t.data.info.detail);n.model.left=e.left,n.model.top=e.top,o["b"].addText(n.model),e.addHandler()})).catch((function(t){r["c"].danger(t)}))},setTextPositionHandler:function(){o["a"].canvasH()-80<this.t&&(this.l+=40,this.t=0),this.t+=40,o["a"].canvasW()-80<this.l&&(this.t=0,this.l=0)}}},d=c,u=n("5511"),f=Object(u["a"])(d,a,i,!1,null,null,null);e["default"]=f.exports}}]);