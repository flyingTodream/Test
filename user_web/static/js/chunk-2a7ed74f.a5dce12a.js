(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a7ed74f"],{"0e44":function(e,t,a){var i=a("88dd"),s=a("a013"),r=function(e,t){if(s(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=a("01f5")(Function.call,a("acb9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(s){t=!0}return function(e,a){return r(e,a),t?e.__proto__=a:i(e,a),e}}({},!1):void 0),check:r}},"1e4d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ement_manage"},[1==e.detailInfo.index?a("h4",{staticClass:"ement-title"},[e._v("企业名称:  "+e._s(e.companyName)+" 大棚名称: "+e._s(e.detailInfo.displayName))]):2==e.detailInfo.index?a("h4",{staticClass:"ement-title"},[e._v("企业名称:  "+e._s(e.companyName)+" 仓库名称: "+e._s(e.detailInfo.display_name))]):e._e(),e._v(" "),a("deviceCommon",{attrs:{manageTypes:e.manageTypes,companyId:e.companyId,detailInfo:e.detailInfo}})],1)},s=[],r=a("6b43"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device_common"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"device-state"},[a("ul",[a("li",{class:{active:4==e.state},on:{click:function(t){return e.changeState(4)}}},[e._v("全部")]),e._v(" "),a("li",{class:{active:0==e.state},on:{click:function(t){return e.changeState(0)}}},[a("div",{staticClass:"state-0"}),e._v("连接正常")]),e._v(" "),a("li",{class:{active:1==e.state},on:{click:function(t){return e.changeState(1)}}},[a("div",{staticClass:"state-1"}),e._v("传感报警")]),e._v(" "),a("li",{class:{active:2==e.state},on:{click:function(t){return e.changeState(2)}}},[a("div",{staticClass:"state-2"}),e._v("正在运行")]),e._v(" "),a("li",{class:{active:3==e.state},on:{click:function(t){return e.changeState(3)}}},[a("div",{staticClass:"state-3"}),e._v("设备断开")])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"传感器",name:"sensor"}},[a("div",{staticClass:"sensor"},[a("div",{staticClass:"sensor-head"},[a("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的传感器名称"},model:{value:e.sensor_txt,callback:function(t){e.sensor_txt=t},expression:"sensor_txt"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sensorSearch}},[e._v("搜索")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.sensorData,"header-cell-class-name":e.tableheaderClassName}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{class:"state-"+e.row.state})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"使用中",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{},[a("el-checkbox",{on:{change:function(a){return e.selec(t)}},model:{value:t.row.use,callback:function(a){e.$set(t.row,"use",a)},expression:"scope.row.use"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.icon}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"传感器名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.sensorEdit(t.row)}}},[e._v("设置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.sensorDel(t.row)}}},[e._v("查看报表")])]}}])})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"控制器",name:"controller"}},[a("div",{staticClass:"controller"},[a("div",{staticClass:"controller-head"},[a("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的控制器名称"},model:{value:e.controller_txt,callback:function(t){e.controller_txt=t},expression:"controller_txt"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.controllerSearch}},[e._v("搜索")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.controllerData,"header-cell-class-name":e.tableheaderClassName}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{class:"state-"+e.row.state})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"使用中",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{},[a("el-checkbox",{on:{change:function(a){return e.selec(t)}},model:{value:t.row.use,callback:function(a){e.$set(t.row,"use",a)},expression:"scope.row.use"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.icon}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"控制器名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.controllerEdit(t.row)}}},[e._v("设置")])]}}])})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"摄像头",name:"camera"}},[a("div",{staticClass:"camera"},[a("div",{staticClass:"camera-head"},[a("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的摄像头名称"},model:{value:e.camera_txt,callback:function(t){e.camera_txt=t},expression:"camera_txt"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.cameraSearch}},[e._v("搜索")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.cameraData,"header-cell-class-name":e.tableheaderClassName}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{class:"state-"+e.row.state})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"使用中",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{},[a("el-checkbox",{on:{change:function(a){return e.selec(t)}},model:{value:t.row.use,callback:function(a){e.$set(t.row,"use",a)},expression:"scope.row.use"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.icon}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"摄像头名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cameraUrl",label:"摄像头URL"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"通道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userPwd",label:"密码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.cameraEdit(t.row)}}},[e._v("设置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.viewVideo(t.row)}}},[e._v("视频查看")])]}}])})],1)],1)])],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改传感器",visible:e.dialogEditVisSensor,width:"50%"},on:{"update:visible":function(t){e.dialogEditVisSensor=t}}},[a("el-form",{ref:"form",attrs:{model:e.sensorEditForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"传感器名称"}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入传感器名称"},model:{value:e.sensorEditForm.deviceName,callback:function(t){e.$set(e.sensorEditForm,"deviceName",t)},expression:"sensorEditForm.deviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.sensorEditForm.state,callback:function(t){e.$set(e.sensorEditForm,"state",t)},expression:"sensorEditForm.state"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.sensorEditForm.state,callback:function(t){e.$set(e.sensorEditForm,"state",t)},expression:"sensorEditForm.state"}},[e._v("禁用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd hh:mm:ss",placeholder:"选择开始时间",align:"right"},model:{value:e.sensorEditForm.startTime,callback:function(t){e.$set(e.sensorEditForm,"startTime",t)},expression:"sensorEditForm.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd hh:mm:ss",placeholder:"选择结束时间",align:"right"},model:{value:e.sensorEditForm.endTime,callback:function(t){e.$set(e.sensorEditForm,"endTime",t)},expression:"sensorEditForm.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数值小于"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.sensorEditForm.smallVal,callback:function(t){e.$set(e.sensorEditForm,"smallVal",t)},expression:"sensorEditForm.smallVal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数值大于"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.sensorEditForm.bigVal,callback:function(t){e.$set(e.sensorEditForm,"bigVal",t)},expression:"sensorEditForm.bigVal"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVisSensor=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.EditVisSensorHandler}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"controller-edit-wra",attrs:{title:"修改控制器",visible:e.dialogEditVisController,width:"30%"},on:{"update:visible":function(t){e.dialogEditVisController=t}}},[a("el-form",{ref:"form",attrs:{model:e.controllerEditForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"控制器名称"}},[a("el-input",{attrs:{placeholder:"请输入控制器名称"},model:{value:e.controllerEditForm.deviceName,callback:function(t){e.$set(e.controllerEditForm,"deviceName",t)},expression:"controllerEditForm.deviceName"}})],1),e._v(" "),a("el-form-item",{staticClass:"item-con-spe",attrs:{label:"智联关联设备（非必填）"}},[a("ul",{staticClass:"item-controller-ass"},e._l(e.controllerEditForm.assList,(function(t,i){return a("li",{staticClass:"ass-item"},[a("span",{staticClass:"ass-txt"},[e._v("传感器名称："+e._s(t))]),e._v(" "),a("i",{staticClass:"ass-del el-icon-delete"})])})),0),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.controllerEditForm.assListVal,callback:function(t){e.$set(e.controllerEditForm,"assListVal",t)},expression:"controllerEditForm.assListVal"}},e._l(e.controllerEditForm.assListSet,(function(e,t){return a("el-option",{key:t,attrs:{value:e}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"第一层级级数"}},[a("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.controllerEditForm.firstNum,callback:function(t){e.$set(e.controllerEditForm,"firstNum",t)},expression:"controllerEditForm.firstNum"}}),e._v(" "),a("ul",{staticClass:"item-controller-hier"},[a("li",{staticClass:"hier-item"},[a("div",{staticClass:"hier-item-conetent"},[a("div",{staticClass:"hier-item-left"},[a("span",{staticClass:"hier-txt"},[e._v("第1层级关系")]),e._v(" "),a("i",{staticClass:"hier-del el-icon-delete"})]),e._v(" "),a("div",{staticClass:"hier-item-right"},[e._v("\n                  该层级有\n                  "),a("el-input",{staticClass:"hier-item-right-val",model:{value:e.controllerEditForm.numnum,callback:function(t){e.$set(e.controllerEditForm,"numnum",e._n(t))},expression:"controllerEditForm.numnum"}}),e._v("\n                  开关\n                ")],1)]),e._v(" "),a("a",{staticClass:"hier-item-set",on:{click:e.hubHier}},[e._v("设置下属层级")])])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVisController=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogEditVisController=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"controller-edit-wra-spe",attrs:{title:"设置第1层级1的下属层级",visible:e.dialogEditVisControllerHub,width:"30%"},on:{"update:visible":function(t){e.dialogEditVisControllerHub=t}}},[a("el-form",{ref:"form",attrs:{model:e.controllerHubEditForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"第一层级级数"}},[a("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.controllerHubEditForm.firstNum,callback:function(t){e.$set(e.controllerHubEditForm,"firstNum",t)},expression:"controllerHubEditForm.firstNum"}}),e._v(" "),a("ul",{staticClass:"item-controller-hier item-controller-hier-spe"},[a("li",{staticClass:"hier-item"},[a("div",{staticClass:"hier-item-conetent"},[a("div",{staticClass:"hier-item-left"},[a("span",{staticClass:"hier-txt"},[e._v("第N层级关系")]),e._v(" "),a("i",{staticClass:"hier-del el-icon-delete"})]),e._v(" "),a("div",{staticClass:"hier-item-right"},[e._v("\n                  该层级有\n                  "),a("el-input",{staticClass:"hier-item-right-val",model:{value:e.controllerHubEditForm.numnum,callback:function(t){e.$set(e.controllerHubEditForm,"numnum",e._n(t))},expression:"controllerHubEditForm.numnum"}}),e._v("\n                  开关\n                ")],1)]),e._v(" "),a("a",{staticClass:"hier-item-set",on:{click:e.hubHier}},[e._v("设置下属层级")])])])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改摄像头",visible:e.dialogEditVisCamera,width:"30%"},on:{"update:visible":function(t){e.dialogEditVisCamera=t}}},[a("el-form",{ref:"form",attrs:{model:e.cameraEditForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"摄像头名称"}},[a("el-input",{attrs:{placeholder:"请输入摄像头名称"},model:{value:e.cameraEditForm.key1,callback:function(t){e.$set(e.cameraEditForm,"key1",t)},expression:"cameraEditForm.key1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摄像头IP"}},[a("el-input",{attrs:{placeholder:"请输入摄像头IP"},model:{value:e.cameraEditForm.key2,callback:function(t){e.$set(e.cameraEditForm,"key2",t)},expression:"cameraEditForm.key2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摄像头端口号"}},[a("el-input",{attrs:{placeholder:"请输入摄像头端口号"},model:{value:e.cameraEditForm.key3,callback:function(t){e.$set(e.cameraEditForm,"key3",t)},expression:"cameraEditForm.key3"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机访问端口号"}},[a("el-input",{attrs:{placeholder:"手机访问端口号"},model:{value:e.cameraEditForm.key4,callback:function(t){e.$set(e.cameraEditForm,"key4",t)},expression:"cameraEditForm.key4"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVisCamera=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogEditVisCamera=!1}}},[e._v("确 定")])],1)],1)],1)},n=[],l=(a("d4d5"),a("75fc")),c=a("b775"),d=a("4328"),u=a.n(d);function m(e){return Object(c["a"])({url:"/deviceUseManage/deleteDeviceRelation",method:"post",data:u.a.stringify(e)})}function f(e){return Object(c["a"])({url:"/deviceUseManage/saveDeviceRelation",method:"post",data:u.a.stringify(e)})}function v(e){return Object(c["a"])({url:"/deviceInfo/getDeviceInfoList",method:"post",data:u.a.stringify(e)})}function p(e){return Object(c["a"])({url:"/deviceInfo/getDeviceInfoCount",method:"post",data:u.a.stringify(e)})}function h(e){return Object(c["a"])({url:"/deviceInfo/updateDeviceSensorSet",method:"post",data:u.a.stringify(e)})}var b={name:"deviceCommon",props:{companyId:{type:String,default:null},detailInfo:{type:Object,default:null}},data:function(){return{loading:!1,currentPage:1,pageSize:10,state:4,total:1,activeName:"sensor",deviceType:0,deviceSearchTxt:"",sensor_txt:"",sensorData:[],dialogEditVisSensor:!1,sensorEditForm:{name:"",icon:""},controller_txt:"",controllerData:[],dialogEditVisController:!1,controllerEditForm:{name:"",assoc:"",icon:"",firstNum:1,assList:["这个是个内容1","这个是萨达萨达萨达"],assListSet:["设备1","设备2"],assListVal:"",numnum:1},dialogEditVisControllerHub:!1,controllerHubEditForm:{firstNum:1,numnum:2},camera_txt:"",cameraData:[],dialogEditVisCamera:!1,cameraEditForm:{key1:"",key2:"",key3:"",key4:"",key5:"",key6:""}}},methods:{selec:function(e){"sensor"===this.activeName?(this.$set(this.sensorData[e.$index],"use",e.row.use),this.sensorData.push({}),this.sensorData.pop()):"controller"===this.activeName?(this.$set(this.controllerData[e.$index],"use",e.row.use),this.controllerData.push({}),this.controllerData.pop(),this.deviceSearchTxt=this.controller_txt):"camera"===this.activeName&&(this.$set(this.cameraData[e.$index],"use",e.row.use),this.cameraData.push({}),this.cameraData.pop()),e.row.use?this._saveDeviceRelation(e.row.deviceId):this._deleteDeviceRelation(e.row.relationId)},handleClick:function(){this.currentPage=1,this.pageSize=10,this.total=0,"sensor"===this.activeName?(this.deviceType=0,this.deviceSearchTxt=this.sensor_txt):"controller"===this.activeName?(this.deviceType=1,this.deviceSearchTxt=this.controller_txt):"camera"===this.activeName&&(this.deviceType=2,this.deviceSearchTxt=this.camera_txt),this._getDeviceUseList(),this._getDeviceUseCount()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1},handleCurrentChange:function(e){this.currentPage=e},sensorSearch:function(){this.deviceSearchTxt=this.sensor_txt,this.currentPage=1,this._getDeviceUseList(),this._getDeviceUseCount()},controllerSearch:function(){this.deviceSearchTxt=this.controller_txt,this.currentPage=1,this._getDeviceUseList(),this._getDeviceUseCount()},cameraSearch:function(){this.deviceSearchTxt=this.camera_txt,this.currentPage=1,this._getDeviceUseList(),this._getDeviceUseCount()},sensorEdit:function(e){this.sensorEditForm=e,this.sensorEditForm.deviceId=e.id,this.sensorEditForm.id=e.id,this.dialogEditVisSensor=!0},controllerEdit:function(e){this.controllerEditForm=e,this.dialogEditVisController=!0},hubHier:function(){this.dialogEditVisController=!1,this.dialogEditVisControllerHub=!0},cameraEdit:function(e){this.dialogEditVisCamera=!0},sensorDel:function(e){var t=e;t.areaId=this.detailInfo.id,1==this.detailInfo.index?(t.displayName=this.detailInfo.displayName,t.type=0,this.$router.push({name:"greenhouseReport",query:t})):(t.displayName=this.detailInfo.display_name,t.type=3,this.$router.push({name:"warehouseReport",query:t}))},tableheaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},_getDeviceUseList:function(){var e=this;this.loading=!0;var t={companyId:this.companyId,areaId:this.detailInfo.id,deviceType:this.deviceType,name:this.deviceSearchTxt,page:this.currentPage,state:this.state,pageSize:this.pageSize};4===this.state&&(t.state=""),v(t).then((function(t){e.loading=!1,1===t.statusCode?0===e.deviceType?(e.sensorData.length=0,e.sensorData=Object(l["a"])(t.result),e.sensorData.map((function(e){return"0"===e.useState&&(e.use=!1),"1"===e.useState&&(e.use=!0),e}))):1===e.deviceType?(e.controllerData.length=0,e.controllerData=Object(l["a"])(t.result),e.controllerData.map((function(e){return"0"===e.useState&&(e.use=!1),"1"===e.useState&&(e.use=!0),e}))):2===e.deviceType&&(e.cameraData.length=0,e.cameraData=Object(l["a"])(t.result),e.cameraData.map((function(e){return"0"===e.useState&&(e.use=!1),"1"===e.useState&&(e.use=!0),e}))):e.$message({message:t.message,type:"warning"})}))},_getDeviceUseCount:function(){var e=this,t={companyId:this.companyId,areaId:this.detailInfo.id,deviceType:this.deviceType,name:this.deviceSearchTxt,state:this.state};p(t).then((function(t){1===t.statusCode?e.total=t.result:e.$message({message:t.message,type:"warning"})}))},_saveDeviceRelation:function(e){var t=this,a={companyId:this.companyId,areaId:this.detailInfo.id,mainControlId:this.detailInfo.controlId,deviceId:e,deviceType:this.deviceType};f(a).then((function(e){1===e.statusCode?t.$message({message:e.message,type:"success"}):t.$message({message:e.message,type:"warning"})}))},_deleteDeviceRelation:function(e){var t=this,a={relationId:e};m(a).then((function(e){1===e.statusCode?t.$message({message:e.message,type:"success"}):t.$message({message:e.message,type:"warning"})}))},changeState:function(e){this.state=e,this._getDeviceUseList(),this._getDeviceUseCount()},EditVisSensorHandler:function(){var e=this;this.sensorEditForm.companyId=this.companyId,this.sensorEditForm.areaId=this.detailInfo.id,h(this.sensorEditForm).then((function(t){1===t.statusCode?(e.dialogEditVisSensor=!1,e.$message({message:t.message,type:"success"})):e.$message({message:t.message,type:"warning"})}))},viewVideo:function(e){var t={areaId:this.detailInfo.id};1==this.detailInfo.index?(t.type=1,this.$router.push({name:"greenhouseVideo",query:t})):(t.type=0,this.$router.push({name:"warehouseVideo",query:t}))}},mounted:function(){1===Number(this.$route.query.id)?(this.deviceType=Number(this.$route.query.id),this.activeName="controller"):2===Number(this.$route.query.id)&&(this.deviceType=Number(this.$route.query.id),this.activeName="camera"),this._getDeviceUseList(),this._getDeviceUseCount()}},g=b,_=(a("3b32"),a("2877")),y=Object(_["a"])(g,o,n,!1,null,null,null),E=y.exports,x={data:function(){return{manageTypes:1}},methods:{},mounted:function(){},computed:{detailInfo:function(){return this.$route.query},companyId:function(){return r["a"].getItem("companyId")},companyName:function(){return r["a"].getItem("companyName")}},components:{deviceCommon:E}},C=x,k=(a("2d2a"),Object(_["a"])(C,i,s,!1,null,null,null));t["default"]=k.exports},"29d6":function(e,t,a){},"2d2a":function(e,t,a){"use strict";var i=a("29d6"),s=a.n(i);s.a},"37d8":function(e,t,a){},"3b32":function(e,t,a){"use strict";var i=a("37d8"),s=a.n(i);s.a},"44de":function(e,t,a){var i=a("88dd"),s=a("0e44").set;e.exports=function(e,t,a){var r,o=t.constructor;return o!==a&&"function"==typeof o&&(r=o.prototype)!==a.prototype&&i(r)&&s&&s(e,r),e}},"539d":function(e,t,a){var i=a("b2f5"),s=a("f01a"),r=a("b6f1"),o=a("c9ea"),n="["+o+"]",l="​",c=RegExp("^"+n+n+"*"),d=RegExp(n+n+"*$"),u=function(e,t,a){var s={},n=r((function(){return!!o[e]()||l[e]()!=l})),c=s[e]=n?t(m):o[e];a&&(s[a]=c),i(i.P+i.F*n,"String",s)},m=u.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},5758:function(e,t,a){var i=a("eb1f"),s=a("9ead")("iterator"),r=a("5b25");e.exports=a("ae18").isIterable=function(e){var t=Object(e);return void 0!==t[s]||"@@iterator"in t||r.hasOwnProperty(i(t))}},"646f":function(e,t,a){a("addd"),e.exports=a("ae18").Array.isArray},"6b23":function(e,t,a){a("e5b4"),a("e479"),e.exports=a("5758")},"75fc":function(e,t,a){"use strict";var i=a("a745"),s=a.n(i);function r(e){if(s()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var o=a("774e"),n=a.n(o),l=a("c8bb"),c=a.n(l);function d(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return n()(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){return r(e)||d(e)||u()}a.d(t,"a",(function(){return m}))},"774e":function(e,t,a){e.exports=a("87b8")},"7f4c":function(e,t,a){"use strict";var i=a("2f6d"),s=a("a2f9"),r=a("a245"),o=a("6b37"),n=a("db4e"),l=a("61d1"),c=a("7bc3"),d=a("c5f8");s(s.S+s.F*!a("2c6c")((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,s,u,m=r(e),f="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,h=void 0!==p,b=0,g=d(m);if(h&&(p=i(p,v>2?arguments[2]:void 0,2)),void 0==g||f==Array&&n(g))for(t=l(m.length),a=new f(t);t>b;b++)c(a,b,h?p(m[b],b):m[b]);else for(u=g.call(m),a=new f;!(s=u.next()).done;b++)c(a,b,h?o(u,p,[s.value,b],!0):s.value);return a.length=b,a}})},"87b8":function(e,t,a){a("e479"),a("7f4c"),e.exports=a("ae18").Array.from},a745:function(e,t,a){e.exports=a("646f")},a891:function(e,t,a){var i=a("fb6d"),s=a("b4e0").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},acb9:function(e,t,a){var i=a("d217"),s=a("7dea"),r=a("3a68"),o=a("5325"),n=a("03b3"),l=a("568a"),c=Object.getOwnPropertyDescriptor;t.f=a("dad2")?c:function(e,t){if(e=r(e),t=o(t,!0),l)try{return c(e,t)}catch(a){}if(n(e,t))return s(!i.f.call(e,t),e[t])}},addd:function(e,t,a){var i=a("a2f9");i(i.S,"Array",{isArray:a("44c1")})},c8bb:function(e,t,a){e.exports=a("6b23")},c9ea:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},d4d5:function(e,t,a){"use strict";var i=a("3754"),s=a("03b3"),r=a("94ac"),o=a("44de"),n=a("5325"),l=a("b6f1"),c=a("a891").f,d=a("acb9").f,u=a("ddf7").f,m=a("539d").trim,f="Number",v=i[f],p=v,h=v.prototype,b=r(a("a7b8")(h))==f,g="trim"in String.prototype,_=function(e){var t=n(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():m(t,3);var a,i,s,r=t.charCodeAt(0);if(43===r||45===r){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+t}for(var o,l=t.slice(2),c=0,d=l.length;c<d;c++)if(o=l.charCodeAt(c),o<48||o>s)return NaN;return parseInt(l,i)}}return+t};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof v&&(b?l((function(){h.valueOf.call(a)})):r(a)!=f)?o(new p(_(t)),a,v):_(t)};for(var y,E=a("dad2")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;E.length>x;x++)s(p,y=E[x])&&!s(v,y)&&u(v,y,d(p,y));v.prototype=h,h.constructor=v,a("e5ef")(i,f,v)}}}]);