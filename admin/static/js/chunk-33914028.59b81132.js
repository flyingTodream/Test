(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33914028"],{"35fb":function(e,t,a){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){return o(e)||r(e)||s()}a.d(t,"a",(function(){return i}))},"44a7":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ghouse_manage"},[a("div",{staticClass:"header"},[a("h4",{staticClass:"title"},[e._v("企业名称:  "+e._s(e.businame))]),e._v(" "),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的仓库名称"},model:{value:e.search_txt,callback:function(t){e.search_txt=t},expression:"search_txt"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.showAdd}},[e._v("新增仓库")])],1),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ghouseData,"header-cell-class-name":e.tableheaderClassName}},[a("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"warehouseName",label:"仓库名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"下属主控ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{},[e._v("\n            下属主控ID\n            "),a("a",{staticClass:"link",on:{click:function(a){return e.linkControlAdmin(t.row,2)}}},[e._v(e._s(t.row.number))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"220",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.menuEdit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.menuDel(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增仓库",visible:e.dialogAddVis,width:"30%"},on:{"update:visible":function(t){e.dialogAddVis=t}}},[a("el-form",{ref:"AddForm",attrs:{rules:e.rulesAddForm,model:e.addForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"warehouseName"}},[a("el-input",{attrs:{placeholder:"请输入仓库名称"},model:{value:e.addForm.warehouseName,callback:function(t){e.$set(e.addForm,"warehouseName",t)},expression:"addForm.warehouseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓库数量",prop:"warehouseNum"}},[a("el-input",{attrs:{placeholder:"请输入仓库ID"},model:{value:e.addForm.warehouseNum,callback:function(t){e.$set(e.addForm,"warehouseNum",t)},expression:"addForm.warehouseNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓库位置",prop:"warehouseLocation"}},[a("el-input",{attrs:{placeholder:"请输入仓库ID"},model:{value:e.addForm.warehouseLocation,callback:function(t){e.$set(e.addForm,"warehouseLocation",t)},expression:"addForm.warehouseLocation"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddVis=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addSaveWare}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"复制仓库",visible:e.dialogCopyVis,width:"30%"},on:{"update:visible":function(t){e.dialogCopyVis=t}}},[a("el-form",{ref:"form",attrs:{model:e.CopyForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库名称"}},[a("el-input",{attrs:{placeholder:"请输入仓库名称"},model:{value:e.CopyForm.name,callback:function(t){e.$set(e.CopyForm,"name",t)},expression:"CopyForm.name"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCopyVis=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogCopyVis=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改仓库",visible:e.dialogEditVis,width:"30%"},on:{"update:visible":function(t){e.dialogEditVis=t}}},[a("el-form",{ref:"Form",attrs:{model:e.EditForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"warehouseName"}},[a("el-input",{attrs:{placeholder:"请输入仓库名称"},model:{value:e.EditForm.warehouseName,callback:function(t){e.$set(e.EditForm,"warehouseName",t)},expression:"EditForm.warehouseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓库数量",prop:"warehouseNum"}},[a("el-input",{attrs:{placeholder:"请输入仓库ID"},model:{value:e.EditForm.warehouseNum,callback:function(t){e.$set(e.EditForm,"warehouseNum",t)},expression:"EditForm.warehouseNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓库位置",prop:"warehouseLocation"}},[a("el-input",{attrs:{placeholder:"请输入仓库位置"},model:{value:e.EditForm.warehouseLocation,callback:function(t){e.$set(e.EditForm,"warehouseLocation",t)},expression:"EditForm.warehouseLocation"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVis=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e._updateWarehouse}},[e._v("确 定")])],1)],1)],1)},r=[],s=(a("2338"),a("f763"),a("fb37"),a("b04f")),i=a("35fb"),n=a("52c1"),l=a("b775"),u=a("fed1"),d=a.n(u);function c(e){return Object(l["a"])({url:"/warehouseManage/getWarehoseList",method:"post",data:d.a.stringify(e)})}function h(e){return Object(l["a"])({url:"/warehouseManage/getWarehoseCount",method:"post",data:d.a.stringify(e)})}function m(e){return Object(l["a"])({url:"/warehouseManage/addWarehose",method:"post",data:d.a.stringify(e)})}function g(e){return Object(l["a"])({url:"/warehouseManage/deleteWarehouse",method:"post",data:d.a.stringify(e)})}function p(e){return Object(l["a"])({url:"/warehouseManage/updateWarehouse",method:"post",data:d.a.stringify(e)})}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={data:function(){return{loading:!1,search_txt:"",currentPage:1,pageSize:10,total:1,ghouseData:[],dialogAddVis:!1,addForm:{warehouseName:"",warehouseNum:"",warehouseLocation:""},rulesAddForm:{warehouseName:[{required:!0,message:"请输入仓库名称",trigger:"blur"}],warehouseNum:[{required:!0,message:"请输入仓库数量",trigger:"blur"}],warehouseLocation:[{required:!0,message:"请输入仓库位置",trigger:"blur"}]},dialogCopyVis:!1,CopyForm:{name:""},dialogEditVis:!1,EditForm:{}}},methods:{search:function(){this.currentPage=1,this._getWarehoseList(),this._getWarehoseCount()},showAdd:function(){this.dialogAddVis=!0},menuEdit:function(e){this.EditForm=e,this.dialogEditVis=!0},linkTo:function(e){this.$router.push({path:e})},linkControlAdmin:function(e,t){var a=this,o={index:t,id:e.id,name:e.warehouseName};this.$store.dispatch("info/saveControlInfo",o).then((function(){a.linkTo("/business_management/ware_manage_index/control_admin")}))},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this._getWarehoseList(),this._getWarehoseCount()},handleCurrentChange:function(e){this.currentPage=e,this._getWarehoseList(),this._getWarehoseCount()},menuDel:function(e){var t=this;this.$confirm("确定删除该仓库吗?","删除该仓库",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t._deleteWarehouse(e.id)}))},tableheaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},addSaveWare:function(){var e=this;this.$refs.AddForm.validate((function(t){t&&e._addWarehose()}))},_getWarehoseList:function(){var e=this;this.loading=!0;var t={companyId:this.busiid,warehouseName:this.search_txt,page:this.currentPage,pageSize:this.pageSize};c(t).then((function(t){e.loading=!1,1===t.statusCode?(e.ghouseData.length=0,e.ghouseData=Object(i["a"])(t.result)):e.$message({message:t.message,type:"warning"})}))},_getWarehoseCount:function(){var e=this,t={companyId:this.busiid,warehouseName:this.search_txt};h(t).then((function(t){1===t.statusCode?e.total=t.result:e.$message({message:t.message,type:"warning"})}))},_addWarehose:function(){var e=this;this.addForm.companyId=this.busiid,m(this.addForm).then((function(t){1===t.statusCode?(e.dialogAddVis=!1,e.$message({message:"仓库添加成功",type:"success"}),e.search_txt="",e.currentPage=1,e._getWarehoseList(),e._getWarehoseCount()):e.$message({message:t.message,type:"warning"})}))},_deleteWarehouse:function(e){var t=this,a={warehouseId:e};g(a).then((function(e){1===e.statusCode?(t.$message({message:"仓库删除成功",type:"success"}),t.search_txt="",t.currentPage=1,t._getWarehoseList(),t._getWarehoseCount()):t.$message({message:e.message,type:"warning"})}))},_updateWarehouse:function(){var e=this;this.EditForm.warehouseId=this.EditForm.id,p(this.EditForm).then((function(t){1===t.statusCode?(e.dialogEditVis=!1,e.$message({message:"仓库修改成功",type:"success"}),e._getWarehoseList(),e._getWarehoseCount()):e.$message({message:t.message,type:"warning"})}))}},mounted:function(){this._getWarehoseList(),this._getWarehoseCount()},computed:b({},Object(n["b"])(["busiid","businame"]))},w=v,_=(a("c370"),a("6691")),y=Object(_["a"])(w,o,r,!1,null,null,null);t["default"]=y.exports},"865b":function(e,t,a){},c370:function(e,t,a){"use strict";var o=a("865b"),r=a.n(o);r.a}}]);