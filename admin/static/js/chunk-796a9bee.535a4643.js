(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-796a9bee"],{"14c0":function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return d}));var a=n("b775"),i=n("fed1"),r=n.n(i);function o(t){return Object(a["a"])({url:"/mainControlManage/getMainControlList",method:"post",data:r.a.stringify(t)})}function s(t){return Object(a["a"])({url:"/mainControlManage/getMainControlCount",method:"post",data:r.a.stringify(t)})}function c(t){return Object(a["a"])({url:"/mainControlManage/addMainControl",method:"post",data:r.a.stringify(t)})}function u(t){return Object(a["a"])({url:"/mainControlManage/deleteMainControl",method:"post",data:r.a.stringify(t)})}function l(t){return Object(a["a"])({url:"/mainControlManage/updateMainControl",method:"post",data:r.a.stringify(t)})}function d(t){return Object(a["a"])({url:"/mainControlManage/copyMainControl",method:"post",data:r.a.stringify(t)})}},"15f6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control_list"},[n("div",{staticClass:"header"},[n("h4",{staticClass:"title"},[t._v("设备名称: "+t._s(t.deviceName))]),t._v(" "),n("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的主控ID名称"},model:{value:t.search_txt,callback:function(e){t.search_txt=e},expression:"search_txt"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"content"},[n("h4",{staticClass:"title"},[t._v("以下主控ID已使用该设备")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.controlData,"header-cell-class-name":t.tableheaderClassName}},[n("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"mainControlName",label:"主控ID名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"areaName",label:"所属大棚"}}),t._v(" "),n("el-table-column",{attrs:{prop:"companyName",label:"所属公司"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t._v(" "),n("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.menuEdit(e.row)}}},[t._v("修改")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){return t.menuDel(e.row)}}},[t._v("取消使用")])]}}])})],1)],1),t._v(" "),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{title:"修改主控ID",visible:t.dialogEditVis,width:"30%"},on:{"update:visible":function(e){t.dialogEditVis=e}}},[n("el-form",{ref:"EditForm",attrs:{rules:t.rulesAddForm,model:t.EditForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"主控ID名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入主控ID名称"},model:{value:t.EditForm.name,callback:function(e){t.$set(t.EditForm,"name",e)},expression:"EditForm.name"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogEditVis=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t._updateMainControl}},[t._v("确 定")])],1)],1)],1)},i=[],r=n("35fb"),o=n("640a"),s=n("14c0"),c=n("cff2"),u={data:function(){return{deviceName:"",deviceId:"",loading:!1,search_txt:"",currentPage:1,pageSize:10,total:1,controlData:[],dialogEditVis:!1,EditForm:{mainControlId:"",name:""},rulesAddForm:{name:[{required:!0,message:"请输入主控ID名称",trigger:"blur"}]}}},methods:{search:function(){this.currentPage=1,this._getUseDeviceMainControlList(),this._getUseDeviceMainControlCount()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this._getUseDeviceMainControlList(),this._getUseDeviceMainControlCount()},handleCurrentChange:function(t){this.currentPage=t,this._getUseDeviceMainControlList(),this._getUseDeviceMainControlCount()},tableheaderClassName:function(t){t.row,t.rowIndex;return"table-head-th"},menuEdit:function(t){this.EditForm.mainControlId=t.mainControlId,this.EditForm.name=t.mainControlName,this.dialogEditVis=!0},menuDel:function(t){var e=this;this.$confirm("确定取消使用该主控ID吗?","取消使用该主控",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e._deleteDeviceRelation(t.id)}))},_getUseDeviceMainControlList:function(){var t=this;this.loading=!0;var e={deviceId:this.deviceId,name:this.search_txt,page:this.currentPage,pageSize:this.pageSize};Object(o["o"])(e).then((function(e){t.loading=!1,1===e.statusCode?(t.controlData.length=0,t.controlData=Object(r["a"])(e.result)):t.$message({message:e.message,type:"warning"})}))},_getUseDeviceMainControlCount:function(){var t=this,e={deviceId:"",name:this.search_txt};Object(o["n"])(e).then((function(e){1===e.statusCode?t.total=e.result:t.$message({message:e.message,type:"warning"})}))},_updateMainControl:function(){var t=this;this.$refs.EditForm.validate((function(e){e&&Object(s["f"])(t.EditForm).then((function(e){1===e.statusCode?(t.dialogEditVis=!1,t.$message({message:"主控ID修改成功",type:"success"}),t._getUseDeviceMainControlList(),t._getUseDeviceMainControlCount()):t.$message({message:e.message,type:"warning"})}))}))},_deleteDeviceRelation:function(t){var e=this,n={relationId:t};Object(c["a"])(n).then((function(t){1===t.statusCode?(e.$message({message:t.message,type:"success"}),e.currentPage=1,e._getUseDeviceMainControlList(),e._getUseDeviceMainControlCount()):e.$message({message:t.message,type:"warning"})}))}},mounted:function(){this.deviceName=this.$route.query.deviceName,this.deviceId=this.$route.query.id,this._getUseDeviceMainControlList(),this._getUseDeviceMainControlCount()}},l=u,d=(n("c8ef"),n("6691")),f=Object(d["a"])(l,a,i,!1,null,null,null);e["default"]=f.exports},"25d6":function(t,e,n){},"35fb":function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return a(t)||i(t)||r()}n.d(e,"a",(function(){return o}))},"640a":function(t,e,n){"use strict";n.d(e,"m",(function(){return o})),n.d(e,"s",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"g",(function(){return m})),n.d(e,"a",(function(){return h})),n.d(e,"p",(function(){return v})),n.d(e,"i",(function(){return p})),n.d(e,"r",(function(){return C})),n.d(e,"b",(function(){return b})),n.d(e,"q",(function(){return y})),n.d(e,"e",(function(){return M})),n.d(e,"h",(function(){return D})),n.d(e,"o",(function(){return _})),n.d(e,"n",(function(){return j}));var a=n("b775"),i=n("fed1"),r=n.n(i);function o(t){return Object(a["a"])({url:"/deviceManage/getSensorDeviceList",method:"post",data:r.a.stringify(t)})}function s(t){return Object(a["a"])({url:"/deviceManage/updateSensorDevice",method:"post",data:r.a.stringify(t)})}function c(t){return Object(a["a"])({url:"/deviceManage/addSensorDevice",method:"post",data:r.a.stringify(t)})}function u(t){return Object(a["a"])({url:"/deviceManage/getIconList",method:"post",data:r.a.stringify(t)})}function l(t){return Object(a["a"])({url:"/deviceManage/getDeviceCount",method:"post",data:r.a.stringify(t)})}function d(t){return Object(a["a"])({url:"/deviceManage/deleteDeviceById",method:"post",data:r.a.stringify(t)})}function f(t){return Object(a["a"])({url:"/deviceManage/getControllerDeviceList",method:"post",data:r.a.stringify(t)})}function g(t){return Object(a["a"])({url:"/deviceManage/addControllerDevice",method:"post",data:r.a.stringify(t)})}function m(t){return Object(a["a"])({url:"/deviceManage/getCameraDeviceList",method:"post",data:r.a.stringify(t)})}function h(t){return Object(a["a"])({url:"/deviceManage/addCameraDevice",method:"post",data:r.a.stringify(t)})}function v(t){return Object(a["a"])({url:"/deviceManage/updateCaneraDevice",method:"post",data:r.a.stringify(t)})}function p(t){return Object(a["a"])({url:"/deviceManage/getControllerDeviceDetail",method:"post",data:r.a.stringify(t)})}function C(t){return Object(a["a"])({url:"/deviceManage/updateControllerDevice",method:"post",data:r.a.stringify(t)})}function b(t){return Object(a["a"])({url:"/deviceManage/addControllerChannel",method:"post",data:r.a.stringify(t)})}function y(t){return Object(a["a"])({url:"/deviceManage/updateControllerChannelSwitch",method:"post",data:r.a.stringify(t)})}function M(t){return Object(a["a"])({url:"/deviceManage/deleteControllerChannel",method:"post",data:r.a.stringify(t)})}function D(t){return Object(a["a"])({url:"/deviceManage/getControllerChannelSwitch",method:"post",data:r.a.stringify(t)})}function _(t){return Object(a["a"])({url:"/deviceManage/getUseDeviceMainControlList",method:"post",data:r.a.stringify(t)})}function j(t){return Object(a["a"])({url:"/deviceManage/getUseDeviceMainControlCount",method:"post",data:r.a.stringify(t)})}},c8ef:function(t,e,n){"use strict";var a=n("25d6"),i=n.n(a);i.a},cff2:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return u}));var a=n("b775"),i=n("fed1"),r=n.n(i);function o(t){return Object(a["a"])({url:"/deviceUseManage/deleteDeviceRelation",method:"post",data:r.a.stringify(t)})}function s(t){return Object(a["a"])({url:"/deviceUseManage/getDeviceUseCount",method:"post",data:r.a.stringify(t)})}function c(t){return Object(a["a"])({url:"/deviceUseManage/getDeviceUseList",method:"post",data:r.a.stringify(t)})}function u(t){return Object(a["a"])({url:"/deviceUseManage/saveDeviceRelation",method:"post",data:r.a.stringify(t)})}}}]);