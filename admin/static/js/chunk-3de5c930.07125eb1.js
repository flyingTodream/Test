(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3de5c930"],{"0e44":function(t,e,n){var a=n("88dd"),s=n("a013"),i=function(t,e){if(s(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("01f5")(Function.call,n("acb9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:i}},1328:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return h})),n.d(e,"j",(function(){return v}));var a=n("b775"),s=n("fed1"),i=n.n(s);function r(t){return Object(a["a"])({url:"/login/getUserList",method:"post",data:i.a.stringify(t)})}function o(t){return Object(a["a"])({url:"/login/getUserCount",method:"post",data:i.a.stringify(t)})}function c(t){return Object(a["a"])({url:"/login/updateUserInfo",method:"post",data:i.a.stringify(t)})}function u(t){return Object(a["a"])({url:"/login/updateUserState",method:"post",data:i.a.stringify(t)})}function l(t){return Object(a["a"])({url:"/login/deleteUser",method:"post",data:i.a.stringify(t)})}function d(t){return Object(a["a"])({url:"/login/saveUser",method:"post",data:i.a.stringify(t)})}function f(t){return Object(a["a"])({url:"/areaManage/getAreaList",method:"post",data:i.a.stringify(t)})}function m(t){return Object(a["a"])({url:"/areaManage/getAreaCount",method:"post",data:i.a.stringify(t)})}function g(t){return Object(a["a"])({url:"/areaManage/addArea",method:"post",data:i.a.stringify(t)})}function p(t){return Object(a["a"])({url:"/areaManage/copyArea",method:"post",data:i.a.stringify(t)})}function h(t){return Object(a["a"])({url:"/areaManage/deleteArea",method:"post",data:i.a.stringify(t)})}function v(t){return Object(a["a"])({url:"/areaManage/updateArea",method:"post",data:i.a.stringify(t)})}},"35fb":function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){return a(t)||s(t)||i()}n.d(e,"a",(function(){return r}))},"44de":function(t,e,n){var a=n("88dd"),s=n("0e44").set;t.exports=function(t,e,n){var i,r=e.constructor;return r!==n&&"function"==typeof r&&(i=r.prototype)!==n.prototype&&a(i)&&s&&s(t,i),t}},"539d":function(t,e,n){var a=n("b2f5"),s=n("f01a"),i=n("b6f1"),r=n("c9ea"),o="["+r+"]",c="​",u=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t,e,n){var s={},o=i((function(){return!!r[t]()||c[t]()!=c})),u=s[t]=o?e(f):r[t];n&&(s[n]=u),a(a.P+a.F*o,"String",s)},f=d.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},"7aa5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"business-management"},[n("div",{staticClass:"header"},[n("el-input",{staticClass:"search",attrs:{placeholder:"请输入要搜索的企业名称或账号"},model:{value:t.search_txt,callback:function(e){t.search_txt=e},expression:"search_txt"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addComInfo}},[t._v("新增企业")])],1),t._v(" "),n("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},t._l(t.enterData,(function(e){return n("li",{staticClass:"item"},[n("div",{staticClass:"top"},[n("h4",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(e.createTime))])]),t._v(" "),n("div",{staticClass:"con"},[n("ul",{staticClass:"con-info"},[n("li",{staticClass:"info-item"},[t._v("ID: "+t._s(e.id))]),t._v(" "),n("li",{staticClass:"info-item"},[t._v("账号: "+t._s(e.mobile))]),t._v(" "),n("li",{staticClass:"info-item"},[t._v("账号类型: "+t._s(e.typeName))]),t._v(" "),n("li",{staticClass:"info-item"},[t._v("密码: "+t._s(e.pwd))])]),t._v(" "),n("div",{staticClass:"con-contac"},[t._v("\n          联系方式："+t._s(e.contactsUser)+"  "+t._s(e.contacts)+"\n        ")]),t._v(" "),n("div",{staticClass:"con-gree"},[t._v("\n          下属大棚 "),n("a",{staticClass:"link",on:{click:function(n){return t.linkBusinessManage(e)}}},[t._v(t._s(e.warehouseCount?e.warehouseCount:0))])]),t._v(" "),n("div",{staticClass:"con-gree"},[t._v("\n          仓库 "),n("a",{staticClass:"link",on:{click:function(n){return t.linkWareManage(e)}}},[t._v(t._s(e.warehouseCount?e.warehouseCount:0))])]),t._v(" "),n("div",{staticClass:"con-btn-wra"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.editComInfo(e)}}},[t._v("修改")]),t._v(" "),1==e.state?n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){return t.forbiddenComInfo(e)}}},[t._v("禁用")]):t._e(),t._v(" "),0==e.state?n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){return t.forbiddenComInfo(e)}}},[t._v("启用")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.delComInfo(e)}}},[t._v("删除")])],1)])])})),0),t._v(" "),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{title:"新增公司信息",visible:t.dialogAddVis,width:"30%"},on:{"update:visible":function(e){t.dialogAddVis=e}}},[n("el-form",{ref:"userAddForm",attrs:{rules:t.rulesAddForm,model:t.addForm,"label-width":"80px"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"账号",prop:"mobile"}},[n("el-input",{attrs:{placeholder:"请输入账号名称"},model:{value:t.addForm.mobile,callback:function(e){t.$set(t.addForm,"mobile",e)},expression:"addForm.mobile"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"企业名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系人"}},[n("el-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:t.addForm.contactsUser,callback:function(e){t.$set(t.addForm,"contactsUser",e)},expression:"addForm.contactsUser"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系方式"}},[n("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:t.addForm.contacts,callback:function(e){t.$set(t.addForm,"contacts",e)},expression:"addForm.contacts"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogAddVis=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addSaveUser}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"修改公司信息",visible:t.dialogEditVis,width:"30%"},on:{"update:visible":function(e){t.dialogEditVis=e}}},[n("el-form",{ref:"form",attrs:{model:t.editForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{attrs:{disabled:!0},model:{value:t.editForm.mobile,callback:function(e){t.$set(t.editForm,"mobile",e)},expression:"editForm.mobile"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"企业名称"}},[n("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系人"}},[n("el-input",{model:{value:t.editForm.contactsUser,callback:function(e){t.$set(t.editForm,"contactsUser",e)},expression:"editForm.contactsUser"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系方式"}},[n("el-input",{model:{value:t.editForm.contacts,callback:function(e){t.$set(t.editForm,"contacts",e)},expression:"editForm.contacts"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"报警电话"}},[n("el-input",{model:{value:t.editForm.exceptionMobile,callback:function(e){t.$set(t.editForm,"exceptionMobile",e)},expression:"editForm.exceptionMobile"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogEditVis=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t._updateUserInfo}},[t._v("确 定")])],1)],1)],1)},s=[],i=(n("d4d5"),n("35fb")),r=n("1328"),o={name:"BusinessManagement",data:function(){return{loading:!1,search_txt:"",currentPage:1,pageSize:10,total:1,enterData:[],dialogEditVis:!1,editForm:{},dialogAddVis:!1,addForm:{mobile:"",name:"",contactsUser:"",contacts:"",roleId:0,exceptionMobile:""},rulesAddForm:{mobile:[{required:!0,message:"请输入账号名称",trigger:"blur"}],name:[{required:!0,message:"请输入企业名称",trigger:"blur"}]}}},methods:{search:function(){this.currentPage=1,this._getUserCount(),this._getBusiList()},addComInfo:function(){this.addForm.mobile="",this.addForm.name="",this.addForm.contactsUser="",this.addForm.contacts="",this.dialogAddVis=!0},editComInfo:function(t){this.dialogEditVis=!0,this.editForm=t},forbiddenComInfo:function(t){var e=this;this.$confirm("确定禁用该公司账号吗?","禁用该公司账号",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e._updateUserState(t)}))},delComInfo:function(t){var e=this;this.$confirm("确定删除该公司账号吗?","删除该公司账号",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e._deleteUser(t.id)}))},linkTo:function(t){this.$router.push({path:t})},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t,this._getBusiList()},addSaveUser:function(){var t=this;this.$refs.userAddForm.validate((function(e){e&&t._saveUser()}))},linkBusinessManage:function(t){var e=this;this.$store.dispatch("info/saveBusiInfo",t).then((function(){e.linkTo("/business_management/ghouse_manage")}))},linkWareManage:function(t){var e=this;this.$store.dispatch("info/saveBusiInfo",t).then((function(){e.linkTo("/business_management/ware_manage")}))},_getBusiList:function(){var t=this;this.loading=!0;var e={name:this.search_txt,page:this.currentPage,pageSize:this.pageSize};Object(r["g"])(e).then((function(e){t.loading=!1,1===e.statusCode?(t.enterData.length=0,t.enterData=Object(i["a"])(e.result)):t.$message({message:e.message,type:"warning"})}))},_getUserCount:function(){var t=this,e={name:this.search_txt};Object(r["h"])(e).then((function(e){1===e.statusCode?t.total=e.result:t.$message({message:e.message,type:"warning"})}))},_updateUserInfo:function(){var t=this;Object(r["k"])(this.editForm).then((function(e){1===e.statusCode?(t.dialogEditVis=!1,t.$message({message:"修改成功",type:"success"}),t._getBusiList()):t.$message({message:e.message,type:"warning"})}))},_updateUserState:function(t){var e=this,n=1===Number(t.state)?0:1,a=1===Number(t.state)?"禁用":"启用",s={id:t.id,state:n};Object(r["l"])(s).then((function(t){1===t.statusCode?(e.$message({message:"企业".concat(a,"成功"),type:"success"}),e._getBusiList()):e.$message({message:t.message,type:"warning"})}))},_deleteUser:function(t){var e=this,n={id:t};Object(r["d"])(n).then((function(t){1===t.statusCode?(e.$message({message:"企业删除成功",type:"success"}),e.search_txt="",e.currentPage=1,e._getUserCount(),e._getBusiList()):e.$message({message:t.message,type:"warning"})}))},_saveUser:function(){var t=this;Object(r["i"])(this.addForm).then((function(e){1===e.statusCode?(t.dialogAddVis=!1,t.$message({message:"企业添加成功",type:"success"}),t.search_txt="",t.currentPage=1,t._getUserCount(),t._getBusiList()):t.$message({message:e.message,type:"warning"})}))}},mounted:function(){this._getUserCount(),this._getBusiList()}},c=o,u=(n("cdd8"),n("6691")),l=Object(u["a"])(c,a,s,!1,null,"2b54e986",null);e["default"]=l.exports},c9ea:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},cdd8:function(t,e,n){"use strict";var a=n("f540"),s=n.n(a);s.a},d4d5:function(t,e,n){"use strict";var a=n("3754"),s=n("03b3"),i=n("94ac"),r=n("44de"),o=n("5325"),c=n("b6f1"),u=n("a891").f,l=n("acb9").f,d=n("ddf7").f,f=n("539d").trim,m="Number",g=a[m],p=g,h=g.prototype,v=i(n("a7b8")(h))==m,_="trim"in String.prototype,b=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():f(e,3);var n,a,s,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,s=49;break;case 79:case 111:a=8,s=55;break;default:return+e}for(var r,c=e.slice(2),u=0,l=c.length;u<l;u++)if(r=c.charCodeAt(u),r<48||r>s)return NaN;return parseInt(c,a)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof g&&(v?c((function(){h.valueOf.call(n)})):i(n)!=m)?r(new p(b(e)),n,g):b(e)};for(var y,C=n("dad2")?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;C.length>F;F++)s(p,y=C[F])&&!s(g,y)&&d(g,y,l(p,y));g.prototype=h,h.constructor=g,n("e5ef")(a,m,g)}},f540:function(t,e,n){}}]);